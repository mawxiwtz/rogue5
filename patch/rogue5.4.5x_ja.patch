diff -Naur rogue5.4.5x-src.orig/Makefile.in rogue5.4.5x-src/Makefile.in
--- rogue5.4.5x-src.orig/Makefile.in	2021-03-25 09:27:06.000000000 +0900
+++ rogue5.4.5x-src/Makefile.in	2025-08-02 14:24:23.770375582 +0900
@@ -18,8 +18,6 @@
 
 DISTNAME=@PACKAGE_TARNAME@@PACKAGE_VERSION@
 PACKAGE_TARNAME = @PACKAGE_TARNAME@-@PACKAGE_VERSION@
-DISTNAME=@PACKAGE_TARNAME@-@PACKAGE_VERSION@
-PACKAGE_TARNAME = @PACKAGE_TARNAME@
 PROGRAM=@PROGRAM@
 
 O=o
@@ -112,14 +110,14 @@
 	   move.$(O) new_level.$(O)
 OBJS2    = options.$(O) pack.$(O) passages.$(O) potions.$(O) rings.$(O) \
 	   rip.$(O) rooms.$(O) save.$(O) scrolls.$(O) state.$(O) sticks.$(O) \
-	   things.$(O) weapons.$(O) wizard.$(O) xcrypt.$(O)
+	   things.$(O) weapons.$(O) wizard.$(O) xcrypt.$(O) messages.${O} utf8.${O}
 OBJS     = $(OBJS1) $(OBJS2)
 CFILES   = vers.c extern.c armor.c chase.c command.c daemon.c \
 	   daemons.c fight.c init.c io.c list.c mach_dep.c \
 	   main.c  mdport.c misc.c monsters.c move.c new_level.c \
 	   options.c pack.c passages.c potions.c rings.c rip.c \
 	   rooms.c save.c scrolls.c state.c sticks.c things.c \
-	   weapons.c wizard.c xcrypt.c
+	   weapons.c wizard.c xcrypt.c messages.c utf8.c
 MISC_C   = findpw.c scedit.c scmisc.c
 DOCSRC   = rogue.me.in rogue.6.in rogue.doc.in rogue.html.in rogue.cat.in
 DOCS     = $(PROGRAM).doc $(PROGRAM).html $(PROGRAM).cat $(PROGRAM).me \
diff -Naur rogue5.4.5x-src.orig/armor.c rogue5.4.5x-src/armor.c
--- rogue5.4.5x-src.orig/armor.c	2017-07-07 12:00:46.000000000 +0900
+++ rogue5.4.5x-src/armor.c	2025-08-02 14:24:23.770375582 +0900
@@ -22,20 +22,20 @@
     THING *obj;
     char *sp;
 
-    if ((obj = get_item("wear", ARMOR)) == NULL)
+    if ((obj = get_item(GET_MSG("armor.wear"), ARMOR)) == NULL)
 	return;
     if (cur_armor != NULL)
     {
-	addmsg("you are already wearing some");
+	addmsg(GET_MSG("armor.already_wearing"));
 	if (!terse)
-	    addmsg(".  You'll have to take it off first");
+	    addmsg(GET_MSG("armor.need_take_off"));
 	endmsg();
 	after = FALSE;
 	return;
     }
     if (obj->o_type != ARMOR)
     {
-	msg("you can't wear that");
+	msg(GET_MSG("armor.cant_wear"));
 	return;
     }
     waste_time();
@@ -43,8 +43,8 @@
     sp = inv_name(obj, TRUE);
     cur_armor = obj;
     if (!terse)
-	addmsg("you are now ");
-    msg("wearing %s", sp);
+	addmsg(GET_MSG("armor.you_are_now"));
+    msg(GET_MSG("armor.wearing"), sp);
 }
 
 /*
@@ -60,19 +60,19 @@
     {
 	after = FALSE;
 	if (terse)
-		msg("not wearing armor");
+		msg(GET_MSG("armor.not_wearing"));
 	else
-		msg("you aren't wearing any armor");
+		msg(GET_MSG("armor.you_arent_wearing"));
 	return;
     }
     if (!dropcheck(cur_armor))
 	return;
     cur_armor = NULL;
     if (terse)
-	addmsg("was");
+	addmsg(GET_MSG("armor.was"));
     else
-	addmsg("you used to be");
-    msg(" wearing %c) %s", obj->o_packch, inv_name(obj, TRUE));
+	addmsg(GET_MSG("armor.used_to_be"));
+    msg(GET_MSG("armor.wearing_with_label"), obj->o_packch, inv_name(obj, TRUE));
 }
 
 /*
diff -Naur rogue5.4.5x-src.orig/chase.c rogue5.4.5x-src/chase.c
--- rogue5.4.5x-src.orig/chase.c	2017-08-24 08:41:52.000000000 +0900
+++ rogue5.4.5x-src/chase.c	2025-08-02 14:24:23.770375582 +0900
@@ -176,7 +176,7 @@
 	    delta.x = sign(hero.x - th->t_pos.x);
 	    if (has_hit)
 		endmsg();
-	    fire_bolt(&th->t_pos, &delta, "flame");
+	    fire_bolt(&th->t_pos, &delta, dragon_flame);
 	    running = FALSE;
 	    count = 0;
 	    quiet = 0;
diff -Naur rogue5.4.5x-src.orig/command.c rogue5.4.5x-src/command.c
--- rogue5.4.5x-src.orig/command.c	2019-05-06 12:01:32.000000000 +0900
+++ rogue5.4.5x-src/command.c	2025-08-02 14:24:23.770375582 +0900
@@ -74,9 +74,9 @@
 
     if (rname && first_time)
 	if (wizard)
-	    msg("Hello %s.  Welcome to the Dungeons of Doom #%d.", whoami, dnum);
+	    msg(GET_MSG("command.hello1"), whoami, dnum);
 	else
-	    msg("Hello %s.  Welcome to the Dungeons of Doom.", whoami);
+	    msg(GET_MSG("command.hello2"), whoami);
     first_time = 0;
     if (on(player, ISHASTE))
 	ntimes++;
@@ -145,7 +145,7 @@
 	{
 	    if (--no_command == 0)
 	    {
-		msg("you can move again");
+		msg(GET_MSG("command.move_again"));
 	    }
 	}
 	else
@@ -240,11 +240,12 @@
 			    pick_up(obj->o_type);
 		    }
 		    else {
+			addmsg(GET_MSG("command.nothing_to_pick_up1"));
 			if (!terse)
-			    addmsg("there is ");
-			addmsg("nothing here");
+			    addmsg(GET_MSG("command.nothing_to_pick_up2"));
+			addmsg(GET_MSG("command.nothing_to_pick_up3"));
 			if (!terse)
-			    addmsg(" to pick up");
+			    addmsg(GET_MSG("command.nothing_to_pick_up4"));
 			endmsg();
 		    }
 		}
@@ -297,8 +298,8 @@
 			|| ((!see_monst(mp)) && !on(player, SEEMONST)))
 		    {
 			if (!terse)
-			    addmsg("I see ");
-			msg("no monster there");
+			    addmsg(GET_MSG("command.i_see"));
+			msg(GET_MSG("command.no_monster"));
 			after = FALSE;
 		    }
 		    else if (diag_ok(&hero, &delta))
@@ -317,7 +318,7 @@
 		when 'a':
 		    if (last_comm == '\0')
 		    {
-			msg("you haven't typed a command yet");
+			msg(GET_MSG("command.command_yet"));
 			after = FALSE;
 		    }
 		    else
@@ -375,16 +376,16 @@
 			delta.x += hero.x;
 			fp = &flat(delta.y, delta.x);
 			if (!terse)
-			    addmsg("You have found ");
+			    addmsg(GET_MSG("command.no_trap1"));
 			if (chat(delta.y, delta.x) != TRAP)
-			    msg("no trap there");
+			    msg(GET_MSG("command.no_trap2"));
 			else if (on(player, ISHALU))
 			    if (pc_md == FALSE)
-				msg(tr_name[rnd(NTRAPS)]);
+				msg(GET_MSG(tr_name[rnd(NTRAPS)]));
 			    else
-				msg(tr_name[rnd(NTRAPS2)]);
+				msg(GET_MSG(tr_name[rnd(NTRAPS2)]));
 			else {
-			    msg(tr_name[*fp & F_TMASK]);
+			    msg(GET_MSG(tr_name[*fp & F_TMASK]));
 			    *fp |= F_SEEN;
 			}
 		    }
@@ -395,7 +396,7 @@
 		    {
 			wizard = FALSE;
 			turn_see(TRUE);
-			msg("not wizard any more");
+			msg(GET_MSG("command.not_wizard_any_more"));
 		    }
 		    else
 		    {
@@ -404,10 +405,10 @@
 			{
 			    noscore = TRUE;
 			    turn_see(FALSE);
-			    msg("you are suddenly as smart as Ken Arnold in dungeon #%d", dnum);
+			    msg(GET_MSG("command.suddenly_arnold"), dnum);
 			}
 			else
-			    msg("sorry");
+			    msg(GET_MSG("command.sorry"));
 		    }
 #endif
 		when ESCAPE:	/* Escape */
@@ -425,13 +426,13 @@
 			countch = dir_ch;
 			goto over;
 		    }
-		when ')': current(cur_weapon, "wielding", NULL);
-		when ']': current(cur_armor, "wearing", NULL);
+		when ')': current(cur_weapon, GET_MSG("command.weapon_wielding"), NULL);
+		when ']': current(cur_armor, GET_MSG("command.armor_wearing"), NULL);
 		when '=':
-		    current(cur_ring[LEFT], "wearing",
-					    terse ? "(L)" : "on left hand");
-		    current(cur_ring[RIGHT], "wearing",
-					    terse ? "(R)" : "on right hand");
+		    current(cur_ring[LEFT], GET_MSG("command.ring_wearing"),
+					    terse ? GET_MSG("command.ring_left") : GET_MSG("command.ring_left_hand"));
+		    current(cur_ring[RIGHT], GET_MSG("command.ring_wearing"),
+					    terse ? GET_MSG("command.ring_right") : GET_MSG("command.ring_right_hand"));
 		when '@':
 		    stat_msg = TRUE;
 		    status();
@@ -444,21 +445,21 @@
 		    {
 			case '|': msg("@ %d,%d", hero.y, hero.x);
 			when 'C': create_obj();
-			when '$': msg("inpack = %d", inpack);
+			when '$': msg(GET_MSG("command.inpack"), inpack);
 			when CTRL('G'): inventory(lvl_obj, 0);
 			when CTRL('W'): whatis(FALSE, 0);
 			when CTRL('D'): level++; new_level();
 			when CTRL('A'): level--; new_level();
 			when CTRL('F'): show_map();
 			when CTRL('T'): teleport();
-			when CTRL('E'): msg("food left: %d", food_left);
+			when CTRL('E'): msg(GET_MSG("command.food_left"), food_left);
 			when CTRL('Q'): add_pass();
 			when CTRL('X'): turn_see(on(player, SEEMONST));
 			when '~':
 			{
 			    THING *item;
 
-			    if ((item = get_item("charge", STICK)) != NULL)
+			    if ((item = get_item(GET_MSG("command.stick_charge"), STICK)) != NULL)
 				item->o_charges = 10000;
 			}
 			when CTRL('I'):
@@ -537,7 +538,7 @@
 {
     save_msg = FALSE;
     count = 0;
-    msg("illegal command '%s'", unctrl(ch));
+    msg(GET_MSG("command.illegal_command"), unctrl(ch));
     save_msg = TRUE;
 }
 
@@ -573,7 +574,7 @@
 			if (rnd(5 + probinc) != 0)
 			    break;
 			chat(y, x) = DOOR;
-			msg("a secret door");
+			msg(GET_MSG("command.secret_door"));
 foundone:
 			found = TRUE;
 			*fp |= F_REAL;
@@ -585,16 +586,19 @@
 			    break;
 			chat(y, x) = TRAP;
 			if (!terse)
-			    addmsg("you found ");
+			    addmsg(GET_MSG("command.you_found1"));
 			if (on(player, ISHALU))
 			    if (pc_md == FALSE)
-				msg(tr_name[rnd(NTRAPS)]);
+				addmsg(GET_MSG(tr_name[rnd(NTRAPS)]));
 			    else
-				msg(tr_name[rnd(NTRAPS2)]);
+				addmsg(GET_MSG(tr_name[rnd(NTRAPS2)]));
 			else {
-			    msg(tr_name[*fp & F_TMASK]);
+			    addmsg(GET_MSG(tr_name[*fp & F_TMASK]));
 			    *fp |= F_SEEN;
 			}
+			if (!terse)
+			    addmsg(GET_MSG("command.you_found2"));
+			endmsg();
 			goto foundone;
 			break;
 		    case ' ':
@@ -618,7 +622,7 @@
     const struct h_list *strp;
     int helpch;
     int numprint, cnt;
-    msg("character you want help for (* for all): ");
+    msg(GET_MSG("command.help"));
     helpch = readchar();
     mpos = 0;
     /*
@@ -628,7 +632,7 @@
     if (helpch != '*')
     {
 	move(0, 0);
-	for (strp = helpstr; strp->h_desc != NULL; strp++)
+	for (strp = get_help(); strp->h_desc != NULL; strp++)
 	    if (strp->h_ch == helpch)
 	    {
 		lower_msg = TRUE;
@@ -636,7 +640,7 @@
 		lower_msg = FALSE;
 		return;
 	    }
-	msg("unknown character '%s'", unctrl(helpch));
+	msg(GET_MSG("command.unknown_char_s"), unctrl(helpch));
 	return;
     }
     /*
@@ -644,7 +648,7 @@
      * Then wait before we return to command mode
      */
     numprint = 0;
-    for (strp = helpstr; strp->h_desc != NULL; strp++)
+    for (strp = get_help(); strp->h_desc != NULL; strp++)
 	if (strp->h_print)
 	    numprint++;
     if (numprint & 01)		/* round odd numbers up */
@@ -655,10 +659,10 @@
 
     wclear(hw);
     cnt = 0;
-    for (strp = helpstr; strp->h_desc != NULL; strp++)
+    for (strp = get_help(); strp->h_desc != NULL; strp++)
 	if (strp->h_print)
 	{
-	    wmove(hw, cnt % numprint, cnt >= numprint ? COLS / 2 : 0);
+	    wmove(hw, cnt % numprint, cnt >= numprint ? (COLS-2) / 2 : 0);
 	    if (strp->h_ch)
 		waddstr(hw, unctrl(strp->h_ch));
 	    waddstr(hw, strp->h_desc);
@@ -666,7 +670,7 @@
 		break;
 	}
     wmove(hw, LINES - 1, 0);
-    waddstr(hw, "--Press space to continue--");
+    waddstr(hw, GET_MSG("command.press_space"));
     wrefresh(hw);
     wait_for(hw, ' ');
     clearok(stdscr, TRUE);
@@ -689,28 +693,28 @@
     const struct h_list *hp;
     const char *str;
     const struct h_list ident_list[] = {
-	{'|',		"wall of a room",		FALSE},
-	{'-',		"wall of a room",		FALSE},
-	{GOLD,		"gold",				FALSE},
-	{STAIRS,	"a staircase",			FALSE},
-	{DOOR,		"door",				FALSE},
-	{FLOOR,		"room floor",			FALSE},
-	{PLAYER,	"you",				FALSE},
-	{PASSAGE,	"passage",			FALSE},
-	{TRAP,		"trap",				FALSE},
-	{POTION,	"potion",			FALSE},
-	{SCROLL,	"scroll",			FALSE},
-	{FOOD,		"food",				FALSE},
-	{WEAPON,	"weapon",			FALSE},
-	{' ',		"solid rock",			FALSE},
-	{ARMOR,		"armor",			FALSE},
-	{AMULET,	"the Amulet of Yendor",		FALSE},
-	{RING,		"ring",				FALSE},
-	{STICK,		"wand or staff",		FALSE},
+	{'|',		"command.ident_wall1",		FALSE},
+	{'-',		"command.ident_wall2",		FALSE},
+	{GOLD,		"command.ident_gold",		FALSE},
+	{STAIRS,	"command.ident_staircase",	FALSE},
+	{DOOR,		"command.ident_door",		FALSE},
+	{FLOOR,		"command.ident_floor",		FALSE},
+	{PLAYER,	"command.ident_you",		FALSE},
+	{PASSAGE,	"command.ident_passage",	FALSE},
+	{TRAP,		"command.ident_trap",		FALSE},
+	{POTION,	"command.ident_potion",		FALSE},
+	{SCROLL,	"command.ident_scroll",		FALSE},
+	{FOOD,		"command.ident_food",		FALSE},
+	{WEAPON,	"command.ident_weapon",		FALSE},
+	{' ',		"command.ident_solid_rock",	FALSE},
+	{ARMOR,		"command.ident_armor",		FALSE},
+	{AMULET,	"command.ident_yendor_amulet",	FALSE},
+	{RING,		"command.ident_ring",		FALSE},
+	{STICK,		"command.ident_wand_or_staff",	FALSE},
 	{'\0'}
     };
 
-    msg("what do you want identified? ");
+    msg(GET_MSG("command.what_want_ident"));
     ch = readchar();
     mpos = 0;
     if (ch == ESCAPE)
@@ -719,14 +723,14 @@
 	return;
     }
     if (isupper(ch))
-	str = monsters[ch-'A'].m_name;
+	str = GET_MSG(monsters[ch-'A'].m_name);
     else
     {
-	str = "unknown character";
+	str = GET_MSG("command.unknown_char");
 	for (hp = ident_list; hp->h_ch != '\0'; hp++)
 	    if (hp->h_ch == ch)
 	    {
-		str = hp->h_desc;
+		str = GET_MSG(hp->h_desc);
 		break;
 	    }
     }
@@ -743,7 +747,7 @@
     if (levit_check())
 	return;
     if (chat(hero.y, hero.x) != STAIRS)
-	msg("I see no way down");
+	msg(GET_MSG("command.no_way_down"));
     else
     {
 	level++;
@@ -768,12 +772,12 @@
 	    if (level == 0)
 		total_winner();
 	    new_level();
-	    msg("you feel a wrenching sensation in your gut");
+	    msg(GET_MSG("command.feel_wrench_gut"));
 	}
 	else
-	    msg("your way is magically blocked");
+	    msg(GET_MSG("command.magically_blocked"));
     else
-	msg("I see no way up");
+	msg(GET_MSG("command.no_way_up"));
 }
 
 /*
@@ -786,7 +790,7 @@
 {
     if (!on(player, ISLEVIT))
 	return FALSE;
-    msg("You can't.  You're floating off the ground!");
+    msg(GET_MSG("command.floating_off"));
     return TRUE;
 }
 
@@ -803,7 +807,7 @@
     const char *elsewise = NULL;
     int *know;
 
-    obj = get_item("call", CALLABLE);
+    obj = get_item(GET_MSG("command.call"), CALLABLE);
     /*
      * Make certain that it is somethings that we want to wear
      */
@@ -813,11 +817,11 @@
     {
 	case RING:
 	    op = &ring_info[obj->o_which];
-	    elsewise = r_stones[obj->o_which];
+	    elsewise = GET_MSG(r_stones[obj->o_which]);
 	    goto norm;
 	when POTION:
 	    op = &pot_info[obj->o_which];
-	    elsewise = p_colors[obj->o_which];
+	    elsewise = GET_MSG(p_colors[obj->o_which]);
 	    goto norm;
 	when SCROLL:
 	    op = &scr_info[obj->o_which];
@@ -825,14 +829,14 @@
 	    goto norm;
 	when STICK:
 	    op = &ws_info[obj->o_which];
-	    elsewise = ws_made[obj->o_which];
+	    elsewise = GET_MSG(ws_made[obj->o_which]);
 norm:
 	    know = &op->oi_know;
 	    guess = &op->oi_guess;
 	    if (*guess != NULL)
 		elsewise = *guess;
 	when FOOD:
-	    msg("you can't call that anything");
+	    msg(GET_MSG("command.cant_call_anything"));
 	    return;
 	otherwise:
 	    guess = &obj->o_label;
@@ -841,19 +845,19 @@
     }
     if (know != NULL && *know)
     {
-	msg("that has already been identified");
+	msg(GET_MSG("command.already_identified"));
 	return;
     }
     if (elsewise != NULL && elsewise == *guess)
     {
 	if (!terse)
-	    addmsg("Was ");
-	msg("called \"%s\"", elsewise);
+	    addmsg(GET_MSG("command.called1"));
+	msg(GET_MSG("command.called2"), elsewise);
     }
     if (terse)
-	msg("call it: ");
+	msg(GET_MSG("command.call_it"));
     else
-	msg("what do you want to call it? ");
+	msg(GET_MSG("command.what_call_it"));
 
     if (elsewise == NULL)
 	strcpy(prbuf, "");
@@ -882,9 +886,11 @@
     if (cur != NULL)
     {
 	if (!terse)
-	    addmsg("you are %s (", how);
+	    addmsg(GET_MSG("command.you_are_how1"), how);
 	inv_describe = FALSE;
 	addmsg("%c) %s", cur->o_packch, inv_name(cur, TRUE));
+	if (!terse)
+	    addmsg(GET_MSG("command.you_are_how2"), how);
 	inv_describe = TRUE;
 	if (where)
 	    addmsg(" %s", where);
@@ -893,8 +899,8 @@
     else
     {
 	if (!terse)
-	    addmsg("you are ");
-	addmsg("%s nothing", how);
+	    addmsg(GET_MSG("command.you_are_nothing_how1"));
+	addmsg(GET_MSG("command.you_are_nothing_how2"), how);
 	if (where)
 	    addmsg(" %s", where);
 	endmsg();
diff -Naur rogue5.4.5x-src.orig/config.h.in rogue5.4.5x-src/config.h.in
--- rogue5.4.5x-src.orig/config.h.in	2013-09-10 21:43:44.000000000 +0900
+++ rogue5.4.5x-src/config.h.in	2025-08-02 14:24:23.774375659 +0900
@@ -64,9 +64,6 @@
    zero-length file name argument. */
 #undef HAVE_LSTAT_EMPTY_STRING_BUG
 
-/* Define to 1 if you have the <memory.h> header file. */
-#undef HAVE_MEMORY_H
-
 /* Define to 1 if you have the `memset' function. */
 #undef HAVE_MEMSET
 
@@ -122,6 +119,9 @@
 /* Define to 1 if you have the <stdint.h> header file. */
 #undef HAVE_STDINT_H
 
+/* Define to 1 if you have the <stdio.h> header file. */
+#undef HAVE_STDIO_H
+
 /* Define to 1 if you have the <stdlib.h> header file. */
 #undef HAVE_STDLIB_H
 
@@ -245,7 +245,9 @@
 /* Define to file to use for scoreboard */
 #undef SCOREFILE
 
-/* Define to 1 if you have the ANSI C header files. */
+/* Define to 1 if all of the C90 standard headers exist (not just the ones
+   required in a freestanding environment). This macro is provided for
+   backward compatibility; new code need not use it. */
 #undef STDC_HEADERS
 
 /* Define to 1 if your <sys/time.h> declares `struct tm'. */
@@ -265,7 +267,7 @@
 /* Define to `int' if <sys/types.h> doesn't define. */
 #undef gid_t
 
-/* Define to `int' if <sys/types.h> does not define. */
+/* Define as a signed integer type capable of holding a process identifier. */
 #undef pid_t
 
 /* Define to `unsigned int' if <sys/types.h> does not define. */
diff -Naur rogue5.4.5x-src.orig/configure rogue5.4.5x-src/configure
--- rogue5.4.5x-src.orig/configure	2021-03-25 09:12:44.000000000 +0900
+++ rogue5.4.5x-src/configure	2025-08-02 14:24:23.778375736 +0900
@@ -1,11 +1,12 @@
 #! /bin/sh
 # Guess values for system-dependent variables and create Makefiles.
-# Generated by GNU Autoconf 2.69 for Rogue 5.4.5.
+# Generated by GNU Autoconf 2.71 for Rogue 5.4.5.
 #
 # Report bugs to <yendor@rogueforge.net>.
 #
 #
-# Copyright (C) 1992-1996, 1998-2012 Free Software Foundation, Inc.
+# Copyright (C) 1992-1996, 1998-2017, 2020-2021 Free Software Foundation,
+# Inc.
 #
 #
 # This configure script is free software; the Free Software Foundation
@@ -16,14 +17,16 @@
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
+else $as_nop
   case `(set -o) 2>/dev/null` in #(
   *posix*) :
     set -o posix ;; #(
@@ -33,46 +36,46 @@
 fi
 
 
+
+# Reset variables that may have inherited troublesome values from
+# the environment.
+
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
 export as_nl
-# Printing a long string crashes Solaris 7 /usr/bin/printf.
-as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
-# Prefer a ksh shell builtin over an external printf program on Solaris,
-# but without wasting forks for bash or zsh.
-if test -z "$BASH_VERSION$ZSH_VERSION" \
-    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='print -r --'
-  as_echo_n='print -rn --'
-elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='printf %s\n'
-  as_echo_n='printf %s'
-else
-  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
-    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
-    as_echo_n='/usr/ucb/echo -n'
-  else
-    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
-    as_echo_n_body='eval
-      arg=$1;
-      case $arg in #(
-      *"$as_nl"*)
-	expr "X$arg" : "X\\(.*\\)$as_nl";
-	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
-      esac;
-      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
-    '
-    export as_echo_n_body
-    as_echo_n='sh -c $as_echo_n_body as_echo'
-  fi
-  export as_echo_body
-  as_echo='sh -c $as_echo_body as_echo'
-fi
+IFS=" ""	$as_nl"
+
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
 
 # The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
+if ${PATH_SEPARATOR+false} :; then
   PATH_SEPARATOR=:
   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
@@ -81,13 +84,6 @@
 fi
 
 
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
-IFS=" ""	$as_nl"
-
 # Find who we are.  Look in the path if we contain no directory separator.
 as_myself=
 case $0 in #((
@@ -96,8 +92,12 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
   done
 IFS=$as_save_IFS
 
@@ -109,30 +109,10 @@
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
   exit 1
 fi
 
-# Unset variables that we do not need and which cause bugs (e.g. in
-# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
-# suppresses any "Segmentation fault" message there.  '((' could
-# trigger a bug in pdksh 5.2.14.
-for as_var in BASH_ENV ENV MAIL MAILPATH
-do eval test x\${$as_var+set} = xset \
-  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
-
-# NLS nuisances.
-LC_ALL=C
-export LC_ALL
-LANGUAGE=C
-export LANGUAGE
-
-# CDPATH.
-(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 # Use a proper internal environment variable to ensure we don't fall
   # into an infinite loop, continuously re-executing ourselves.
@@ -154,20 +134,22 @@
 exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
 # Admittedly, this is quite paranoid, since all the known shells bail
 # out after a failed `exec'.
-$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
-as_fn_exit 255
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
+exit 255
   fi
   # We don't want this to propagate to other subprocesses.
           { _as_can_reexec=; unset _as_can_reexec;}
 if test "x$CONFIG_SHELL" = x; then
-  as_bourne_compatible="if test -n \"\${ZSH_VERSION+set}\" && (emulate sh) >/dev/null 2>&1; then :
+  as_bourne_compatible="as_nop=:
+if test \${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on \${1+\"\$@\"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '\${1+\"\$@\"}'='\"\$@\"'
   setopt NO_GLOB_SUBST
-else
+else \$as_nop
   case \`(set -o) 2>/dev/null\` in #(
   *posix*) :
     set -o posix ;; #(
@@ -187,42 +169,53 @@
 as_fn_failure && { exitcode=1; echo as_fn_failure succeeded.; }
 as_fn_ret_success || { exitcode=1; echo as_fn_ret_success failed.; }
 as_fn_ret_failure && { exitcode=1; echo as_fn_ret_failure succeeded.; }
-if ( set x; as_fn_ret_success y && test x = \"\$1\" ); then :
+if ( set x; as_fn_ret_success y && test x = \"\$1\" )
+then :
 
-else
+else \$as_nop
   exitcode=1; echo positional parameters were not saved.
 fi
 test x\$exitcode = x0 || exit 1
+blah=\$(echo \$(echo blah))
+test x\"\$blah\" = xblah || exit 1
 test -x / || exit 1"
   as_suggested="  as_lineno_1=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_1a=\$LINENO
   as_lineno_2=";as_suggested=$as_suggested$LINENO;as_suggested=$as_suggested" as_lineno_2a=\$LINENO
   eval 'test \"x\$as_lineno_1'\$as_run'\" != \"x\$as_lineno_2'\$as_run'\" &&
   test \"x\`expr \$as_lineno_1'\$as_run' + 1\`\" = \"x\$as_lineno_2'\$as_run'\"' || exit 1
 test \$(( 1 + 1 )) = 2 || exit 1"
-  if (eval "$as_required") 2>/dev/null; then :
+  if (eval "$as_required") 2>/dev/null
+then :
   as_have_required=yes
-else
+else $as_nop
   as_have_required=no
 fi
-  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null; then :
+  if test x$as_have_required = xyes && (eval "$as_suggested") 2>/dev/null
+then :
 
-else
+else $as_nop
   as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
 as_found=false
 for as_dir in /bin$PATH_SEPARATOR/usr/bin$PATH_SEPARATOR$PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
   as_found=:
   case $as_dir in #(
 	 /*)
 	   for as_base in sh bash ksh sh5; do
 	     # Try only shells that exist, to save several forks.
-	     as_shell=$as_dir/$as_base
+	     as_shell=$as_dir$as_base
 	     if { test -f "$as_shell" || test -f "$as_shell.exe"; } &&
-		    { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$as_shell"; } 2>/dev/null; then :
+		    as_run=a "$as_shell" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
   CONFIG_SHELL=$as_shell as_have_required=yes
-		   if { $as_echo "$as_bourne_compatible""$as_suggested" | as_run=a "$as_shell"; } 2>/dev/null; then :
+		   if as_run=a "$as_shell" -c "$as_bourne_compatible""$as_suggested" 2>/dev/null
+then :
   break 2
 fi
 fi
@@ -230,14 +223,21 @@
        esac
   as_found=false
 done
-$as_found || { if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
-	      { $as_echo "$as_bourne_compatible""$as_required" | as_run=a "$SHELL"; } 2>/dev/null; then :
-  CONFIG_SHELL=$SHELL as_have_required=yes
-fi; }
 IFS=$as_save_IFS
+if $as_found
+then :
 
+else $as_nop
+  if { test -f "$SHELL" || test -f "$SHELL.exe"; } &&
+	      as_run=a "$SHELL" -c "$as_bourne_compatible""$as_required" 2>/dev/null
+then :
+  CONFIG_SHELL=$SHELL as_have_required=yes
+fi
+fi
 
-      if test "x$CONFIG_SHELL" != x; then :
+
+      if test "x$CONFIG_SHELL" != x
+then :
   export CONFIG_SHELL
              # We cannot yet assume a decent shell, so we have to provide a
 # neutralization value for shells without unset; and this also
@@ -255,18 +255,19 @@
 exec $CONFIG_SHELL $as_opts "$as_myself" ${1+"$@"}
 # Admittedly, this is quite paranoid, since all the known shells bail
 # out after a failed `exec'.
-$as_echo "$0: could not re-execute with $CONFIG_SHELL" >&2
+printf "%s\n" "$0: could not re-execute with $CONFIG_SHELL" >&2
 exit 255
 fi
 
-    if test x$as_have_required = xno; then :
-  $as_echo "$0: This script requires a shell more modern than all"
-  $as_echo "$0: the shells that I found on your system."
-  if test x${ZSH_VERSION+set} = xset ; then
-    $as_echo "$0: In particular, zsh $ZSH_VERSION has bugs and should"
-    $as_echo "$0: be upgraded to zsh 4.3.4 or later."
+    if test x$as_have_required = xno
+then :
+  printf "%s\n" "$0: This script requires a shell more modern than all"
+  printf "%s\n" "$0: the shells that I found on your system."
+  if test ${ZSH_VERSION+y} ; then
+    printf "%s\n" "$0: In particular, zsh $ZSH_VERSION has bugs and should"
+    printf "%s\n" "$0: be upgraded to zsh 4.3.4 or later."
   else
-    $as_echo "$0: Please tell bug-autoconf@gnu.org and
+    printf "%s\n" "$0: Please tell bug-autoconf@gnu.org and
 $0: yendor@rogueforge.net about your system, including any
 $0: error possibly output before this message. Then install
 $0: a modern shell, or manually run the script under such a
@@ -294,6 +295,7 @@
 }
 as_unset=as_fn_unset
 
+
 # as_fn_set_status STATUS
 # -----------------------
 # Set $? to STATUS, without forking.
@@ -311,6 +313,14 @@
   as_fn_set_status $1
   exit $1
 } # as_fn_exit
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
+}
+as_nop=as_fn_nop
 
 # as_fn_mkdir_p
 # -------------
@@ -325,7 +335,7 @@
     as_dirs=
     while :; do
       case $as_dir in #(
-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
       *) as_qdir=$as_dir;;
       esac
       as_dirs="'$as_qdir' $as_dirs"
@@ -334,7 +344,7 @@
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_dir" |
+printf "%s\n" X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -373,12 +383,13 @@
 # advantage of any shell optimizations that allow amortized linear growth over
 # repeated appends, instead of the typical quadratic growth present in naive
 # implementations.
-if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
   eval 'as_fn_append ()
   {
     eval $1+=\$2
   }'
-else
+else $as_nop
   as_fn_append ()
   {
     eval $1=\$$1\$2
@@ -390,18 +401,27 @@
 # Perform arithmetic evaluation on the ARGs, and store the result in the
 # global $as_val. Take advantage of shells that can avoid forks. The arguments
 # must be portable across $(()) and expr.
-if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
   eval 'as_fn_arith ()
   {
     as_val=$(( $* ))
   }'
-else
+else $as_nop
   as_fn_arith ()
   {
     as_val=`expr "$@" || test $? -eq 1`
   }
 fi # as_fn_arith
 
+# as_fn_nop
+# ---------
+# Do nothing but, unlike ":", preserve the value of $?.
+as_fn_nop ()
+{
+  return $?
+}
+as_nop=as_fn_nop
 
 # as_fn_error STATUS ERROR [LINENO LOG_FD]
 # ----------------------------------------
@@ -413,9 +433,9 @@
   as_status=$1; test $as_status -eq 0 && as_status=1
   if test "$4"; then
     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $2" >&2
+  printf "%s\n" "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
@@ -442,7 +462,7 @@
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X/"$0" |
+printf "%s\n" X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{
 	    s//\1/
 	    q
@@ -486,7 +506,7 @@
       s/-\n.*//
     ' >$as_me.lineno &&
   chmod +x "$as_me.lineno" ||
-    { $as_echo "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
+    { printf "%s\n" "$as_me: error: cannot create $as_me.lineno; rerun with a POSIX shell" >&2; as_fn_exit 1; }
 
   # If we had to re-execute with $CONFIG_SHELL, we're ensured to have
   # already done that, so ensure we don't try to do so again and fall
@@ -500,6 +520,10 @@
   exit
 }
 
+
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
 case `echo -n x` in #(((((
 -n*)
@@ -513,6 +537,13 @@
   ECHO_N='-n';;
 esac
 
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
+
+
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
@@ -588,40 +619,37 @@
 ac_unique_file="armor.c"
 # Factoring default headers for most tests.
 ac_includes_default="\
-#include <stdio.h>
-#ifdef HAVE_SYS_TYPES_H
-# include <sys/types.h>
+#include <stddef.h>
+#ifdef HAVE_STDIO_H
+# include <stdio.h>
 #endif
-#ifdef HAVE_SYS_STAT_H
-# include <sys/stat.h>
-#endif
-#ifdef STDC_HEADERS
+#ifdef HAVE_STDLIB_H
 # include <stdlib.h>
-# include <stddef.h>
-#else
-# ifdef HAVE_STDLIB_H
-#  include <stdlib.h>
-# endif
 #endif
 #ifdef HAVE_STRING_H
-# if !defined STDC_HEADERS && defined HAVE_MEMORY_H
-#  include <memory.h>
-# endif
 # include <string.h>
 #endif
-#ifdef HAVE_STRINGS_H
-# include <strings.h>
-#endif
 #ifdef HAVE_INTTYPES_H
 # include <inttypes.h>
 #endif
 #ifdef HAVE_STDINT_H
 # include <stdint.h>
 #endif
+#ifdef HAVE_STRINGS_H
+# include <strings.h>
+#endif
+#ifdef HAVE_SYS_TYPES_H
+# include <sys/types.h>
+#endif
+#ifdef HAVE_SYS_STAT_H
+# include <sys/stat.h>
+#endif
 #ifdef HAVE_UNISTD_H
 # include <unistd.h>
 #endif"
 
+ac_header_c_list=
+ac_func_c_list=
 ac_subst_vars='LTLIBOBJS
 TARGET
 SAVEDIR
@@ -630,18 +658,18 @@
 SCOREFILE
 GROUPOWNER
 PROGRAM
-SED
 DOCS_NONE
 DOCS_NROFF
 DOCS_GROFF
+SED
 TBL
 COLCRT
 GROFF
 NROFF
 LIBOBJS
+CPP
 EGREP
 GREP
-CPP
 OBJEXT
 EXEEXT
 ac_ct_CC
@@ -680,6 +708,7 @@
 docdir
 oldincludedir
 includedir
+runstatedir
 localstatedir
 sharedstatedir
 sysconfdir
@@ -766,6 +795,7 @@
 sysconfdir='${prefix}/etc'
 sharedstatedir='${prefix}/com'
 localstatedir='${prefix}/var'
+runstatedir='${localstatedir}/run'
 includedir='${prefix}/include'
 oldincludedir='/usr/include'
 docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
@@ -795,8 +825,6 @@
   *)    ac_optarg=yes ;;
   esac
 
-  # Accept the important Cygnus configure options, so we can diagnose typos.
-
   case $ac_dashdash$ac_option in
   --)
     ac_dashdash=yes ;;
@@ -837,9 +865,9 @@
     ac_useropt=`expr "x$ac_option" : 'x-*disable-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
@@ -863,9 +891,9 @@
     ac_useropt=`expr "x$ac_option" : 'x-*enable-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid feature name: $ac_useropt"
+      as_fn_error $? "invalid feature name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "enable_$ac_useropt"
@@ -1018,6 +1046,15 @@
   | -silent | --silent | --silen | --sile | --sil)
     silent=yes ;;
 
+  -runstatedir | --runstatedir | --runstatedi | --runstated \
+  | --runstate | --runstat | --runsta | --runst | --runs \
+  | --run | --ru | --r)
+    ac_prev=runstatedir ;;
+  -runstatedir=* | --runstatedir=* | --runstatedi=* | --runstated=* \
+  | --runstate=* | --runstat=* | --runsta=* | --runst=* | --runs=* \
+  | --run=* | --ru=* | --r=*)
+    runstatedir=$ac_optarg ;;
+
   -sbindir | --sbindir | --sbindi | --sbind | --sbin | --sbi | --sb)
     ac_prev=sbindir ;;
   -sbindir=* | --sbindir=* | --sbindi=* | --sbind=* | --sbin=* \
@@ -1067,9 +1104,9 @@
     ac_useropt=`expr "x$ac_option" : 'x-*with-\([^=]*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
@@ -1083,9 +1120,9 @@
     ac_useropt=`expr "x$ac_option" : 'x-*without-\(.*\)'`
     # Reject names that are not valid shell variable names.
     expr "x$ac_useropt" : ".*[^-+._$as_cr_alnum]" >/dev/null &&
-      as_fn_error $? "invalid package name: $ac_useropt"
+      as_fn_error $? "invalid package name: \`$ac_useropt'"
     ac_useropt_orig=$ac_useropt
-    ac_useropt=`$as_echo "$ac_useropt" | sed 's/[-+.]/_/g'`
+    ac_useropt=`printf "%s\n" "$ac_useropt" | sed 's/[-+.]/_/g'`
     case $ac_user_opts in
       *"
 "with_$ac_useropt"
@@ -1129,9 +1166,9 @@
 
   *)
     # FIXME: should be removed in autoconf 3.0.
-    $as_echo "$as_me: WARNING: you should use --build, --host, --target" >&2
+    printf "%s\n" "$as_me: WARNING: you should use --build, --host, --target" >&2
     expr "x$ac_option" : ".*[^-._$as_cr_alnum]" >/dev/null &&
-      $as_echo "$as_me: WARNING: invalid host type: $ac_option" >&2
+      printf "%s\n" "$as_me: WARNING: invalid host type: $ac_option" >&2
     : "${build_alias=$ac_option} ${host_alias=$ac_option} ${target_alias=$ac_option}"
     ;;
 
@@ -1147,7 +1184,7 @@
   case $enable_option_checking in
     no) ;;
     fatal) as_fn_error $? "unrecognized options: $ac_unrecognized_opts" ;;
-    *)     $as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
+    *)     printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2 ;;
   esac
 fi
 
@@ -1155,7 +1192,7 @@
 for ac_var in	exec_prefix prefix bindir sbindir libexecdir datarootdir \
 		datadir sysconfdir sharedstatedir localstatedir includedir \
 		oldincludedir docdir infodir htmldir dvidir pdfdir psdir \
-		libdir localedir mandir
+		libdir localedir mandir runstatedir
 do
   eval ac_val=\$$ac_var
   # Remove trailing slashes.
@@ -1211,7 +1248,7 @@
 	 X"$as_myself" : 'X\(//\)[^/]' \| \
 	 X"$as_myself" : 'X\(//\)$' \| \
 	 X"$as_myself" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_myself" |
+printf "%s\n" X"$as_myself" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -1308,6 +1345,7 @@
   --sysconfdir=DIR        read-only single-machine data [PREFIX/etc]
   --sharedstatedir=DIR    modifiable architecture-independent data [PREFIX/com]
   --localstatedir=DIR     modifiable single-machine data [PREFIX/var]
+  --runstatedir=DIR       modifiable per-process data [LOCALSTATEDIR/run]
   --libdir=DIR            object code libraries [EPREFIX/lib]
   --includedir=DIR        C header files [PREFIX/include]
   --oldincludedir=DIR     C header files for non-gcc [/usr/include]
@@ -1404,9 +1442,9 @@
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -1434,7 +1472,8 @@
 ac_abs_srcdir=$ac_abs_top_srcdir$ac_dir_suffix
 
     cd "$ac_dir" || { ac_status=$?; continue; }
-    # Check for guested configure.
+    # Check for configure.gnu first; this name is used for a wrapper for
+    # Metaconfig's "Configure" on case-insensitive file systems.
     if test -f "$ac_srcdir/configure.gnu"; then
       echo &&
       $SHELL "$ac_srcdir/configure.gnu" --help=recursive
@@ -1442,7 +1481,7 @@
       echo &&
       $SHELL "$ac_srcdir/configure" --help=recursive
     else
-      $as_echo "$as_me: WARNING: no configuration information is in $ac_dir" >&2
+      printf "%s\n" "$as_me: WARNING: no configuration information is in $ac_dir" >&2
     fi || ac_status=$?
     cd "$ac_pwd" || { ac_status=$?; break; }
   done
@@ -1452,9 +1491,9 @@
 if $ac_init_version; then
   cat <<\_ACEOF
 Rogue configure 5.4.5
-generated by GNU Autoconf 2.69
+generated by GNU Autoconf 2.71
 
-Copyright (C) 2012 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This configure script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it.
 _ACEOF
@@ -1471,14 +1510,14 @@
 ac_fn_c_try_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  rm -f conftest.$ac_objext
+  rm -f conftest.$ac_objext conftest.beam
   if { { ac_try="$ac_compile"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compile") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -1486,14 +1525,15 @@
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
-       } && test -s conftest.$ac_objext; then :
+       } && test -s conftest.$ac_objext
+then :
   ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 	ac_retval=1
@@ -1503,176 +1543,6 @@
 
 } # ac_fn_c_try_compile
 
-# ac_fn_c_try_cpp LINENO
-# ----------------------
-# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
-ac_fn_c_try_cpp ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { { ac_try="$ac_cpp conftest.$ac_ext"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
-  ac_status=$?
-  if test -s conftest.err; then
-    grep -v '^ *+' conftest.err >conftest.er1
-    cat conftest.er1 >&5
-    mv -f conftest.er1 conftest.err
-  fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } > conftest.i && {
-	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
-	 test ! -s conftest.err
-       }; then :
-  ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-    ac_retval=1
-fi
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-  as_fn_set_status $ac_retval
-
-} # ac_fn_c_try_cpp
-
-# ac_fn_c_try_run LINENO
-# ----------------------
-# Try to link conftest.$ac_ext, and return whether this succeeded. Assumes
-# that executables *can* be run.
-ac_fn_c_try_run ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if { { ac_try="$ac_link"
-case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_link") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
-  { { case "(($ac_try" in
-  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
-  *) ac_try_echo=$ac_try;;
-esac
-eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
-  (eval "$ac_try") 2>&5
-  ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; }; then :
-  ac_retval=0
-else
-  $as_echo "$as_me: program exited with status $ac_status" >&5
-       $as_echo "$as_me: failed program was:" >&5
-sed 's/^/| /' conftest.$ac_ext >&5
-
-       ac_retval=$ac_status
-fi
-  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-  as_fn_set_status $ac_retval
-
-} # ac_fn_c_try_run
-
-# ac_fn_c_check_header_mongrel LINENO HEADER VAR INCLUDES
-# -------------------------------------------------------
-# Tests whether HEADER exists, giving a warning if it cannot be compiled using
-# the include files in INCLUDES and setting the cache variable VAR
-# accordingly.
-ac_fn_c_check_header_mongrel ()
-{
-  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  if eval \${$3+:} false; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-fi
-eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-else
-  # Is the header compilable?
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 usability" >&5
-$as_echo_n "checking $2 usability... " >&6; }
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-$4
-#include <$2>
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_header_compiler=yes
-else
-  ac_header_compiler=no
-fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_compiler" >&5
-$as_echo "$ac_header_compiler" >&6; }
-
-# Is the header present?
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking $2 presence" >&5
-$as_echo_n "checking $2 presence... " >&6; }
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <$2>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  ac_header_preproc=yes
-else
-  ac_header_preproc=no
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_header_preproc" >&5
-$as_echo "$ac_header_preproc" >&6; }
-
-# So?  What about this header?
-case $ac_header_compiler:$ac_header_preproc:$ac_c_preproc_warn_flag in #((
-  yes:no: )
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&5
-$as_echo "$as_me: WARNING: $2: accepted by the compiler, rejected by the preprocessor!" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
-$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-    ;;
-  no:yes:* )
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: present but cannot be compiled" >&5
-$as_echo "$as_me: WARNING: $2: present but cannot be compiled" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     check for missing prerequisite headers?" >&5
-$as_echo "$as_me: WARNING: $2:     check for missing prerequisite headers?" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: see the Autoconf documentation" >&5
-$as_echo "$as_me: WARNING: $2: see the Autoconf documentation" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&5
-$as_echo "$as_me: WARNING: $2:     section \"Present But Cannot Be Compiled\"" >&2;}
-    { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $2: proceeding with the compiler's result" >&5
-$as_echo "$as_me: WARNING: $2: proceeding with the compiler's result" >&2;}
-( $as_echo "## ------------------------------------ ##
-## Report this to yendor@rogueforge.net ##
-## ------------------------------------ ##"
-     ) | sed "s/^/$as_me: WARNING:     /" >&2
-    ;;
-esac
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  eval "$3=\$ac_header_compiler"
-fi
-eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
-fi
-  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
-
-} # ac_fn_c_check_header_mongrel
-
 # ac_fn_c_check_header_compile LINENO HEADER VAR INCLUDES
 # -------------------------------------------------------
 # Tests whether HEADER exists and can be compiled using the include files in
@@ -1680,26 +1550,28 @@
 ac_fn_c_check_header_compile ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 #include <$2>
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   eval "$3=yes"
-else
+else $as_nop
   eval "$3=no"
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_header_compile
@@ -1711,17 +1583,18 @@
 ac_fn_c_check_type ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   eval "$3=no"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 if (sizeof ($2))
 	 return 0;
@@ -1729,12 +1602,13 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $4
 int
-main ()
+main (void)
 {
 if (sizeof (($2)))
 	    return 0;
@@ -1742,36 +1616,75 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-else
+else $as_nop
   eval "$3=yes"
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_type
 
+# ac_fn_c_try_cpp LINENO
+# ----------------------
+# Try to preprocess conftest.$ac_ext, and return whether this succeeded.
+ac_fn_c_try_cpp ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if { { ac_try="$ac_cpp conftest.$ac_ext"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_cpp conftest.$ac_ext") 2>conftest.err
+  ac_status=$?
+  if test -s conftest.err; then
+    grep -v '^ *+' conftest.err >conftest.er1
+    cat conftest.er1 >&5
+    mv -f conftest.er1 conftest.err
+  fi
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } > conftest.i && {
+	 test -z "$ac_c_preproc_warn_flag$ac_c_werror_flag" ||
+	 test ! -s conftest.err
+       }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+    ac_retval=1
+fi
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_cpp
+
 # ac_fn_c_try_link LINENO
 # -----------------------
 # Try to link conftest.$ac_ext, and return whether this succeeded.
 ac_fn_c_try_link ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  rm -f conftest.$ac_objext conftest$ac_exeext
+  rm -f conftest.$ac_objext conftest.beam conftest$ac_exeext
   if { { ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -1779,17 +1692,18 @@
     cat conftest.er1 >&5
     mv -f conftest.er1 conftest.err
   fi
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; } && {
 	 test -z "$ac_c_werror_flag" ||
 	 test ! -s conftest.err
        } && test -s conftest$ac_exeext && {
 	 test "$cross_compiling" = yes ||
 	 test -x conftest$ac_exeext
-       }; then :
+       }
+then :
   ac_retval=0
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
 	ac_retval=1
@@ -1810,11 +1724,12 @@
 ac_fn_c_check_func ()
 {
   as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
-$as_echo_n "checking for $2... " >&6; }
-if eval \${$3+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $2" >&5
+printf %s "checking for $2... " >&6; }
+if eval test \${$3+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 /* Define $2 to an innocuous variant, in case <limits.h> declares $2.
@@ -1822,16 +1737,9 @@
 #define $2 innocuous_$2
 
 /* System header to define __stub macros and hopefully few prototypes,
-    which can conflict with char $2 (); below.
-    Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-    <limits.h> exists even on freestanding compilers.  */
-
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
+   which can conflict with char $2 (); below.  */
 
+#include <limits.h>
 #undef $2
 
 /* Override any GCC internal prototype to avoid an error.
@@ -1849,35 +1757,99 @@
 #endif
 
 int
-main ()
+main (void)
 {
 return $2 ();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   eval "$3=yes"
-else
+else $as_nop
   eval "$3=no"
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
 eval ac_res=\$$3
-	       { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
-$as_echo "$ac_res" >&6; }
+	       { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_res" >&5
+printf "%s\n" "$ac_res" >&6; }
   eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
 
 } # ac_fn_c_check_func
+
+# ac_fn_c_try_run LINENO
+# ----------------------
+# Try to run conftest.$ac_ext, and return whether this succeeded. Assumes that
+# executables *can* be run.
+ac_fn_c_try_run ()
+{
+  as_lineno=${as_lineno-"$1"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
+  if { { ac_try="$ac_link"
+case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_link") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; } && { ac_try='./conftest$ac_exeext'
+  { { case "(($ac_try" in
+  *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
+  *) ac_try_echo=$ac_try;;
+esac
+eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
+printf "%s\n" "$ac_try_echo"; } >&5
+  (eval "$ac_try") 2>&5
+  ac_status=$?
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }; }
+then :
+  ac_retval=0
+else $as_nop
+  printf "%s\n" "$as_me: program exited with status $ac_status" >&5
+       printf "%s\n" "$as_me: failed program was:" >&5
+sed 's/^/| /' conftest.$ac_ext >&5
+
+       ac_retval=$ac_status
+fi
+  rm -rf conftest.dSYM conftest_ipa8_conftest.oo
+  eval $as_lineno_stack; ${as_lineno_stack:+:} unset as_lineno
+  as_fn_set_status $ac_retval
+
+} # ac_fn_c_try_run
+ac_configure_args_raw=
+for ac_arg
+do
+  case $ac_arg in
+  *\'*)
+    ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+  esac
+  as_fn_append ac_configure_args_raw " '$ac_arg'"
+done
+
+case $ac_configure_args_raw in
+  *$as_nl*)
+    ac_safe_unquote= ;;
+  *)
+    ac_unsafe_z='|&;<>()$`\\"*?[ ''	' # This string ends in space, tab.
+    ac_unsafe_a="$ac_unsafe_z#~"
+    ac_safe_unquote="s/ '\\([^$ac_unsafe_a][^$ac_unsafe_z]*\\)'/ \\1/g"
+    ac_configure_args_raw=`      printf "%s\n" "$ac_configure_args_raw" | sed "$ac_safe_unquote"`;;
+esac
+
 cat >config.log <<_ACEOF
 This file contains any messages produced by compilers while
 running configure, to aid debugging if configure makes a mistake.
 
 It was created by Rogue $as_me 5.4.5, which was
-generated by GNU Autoconf 2.69.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
-  $ $0 $@
+  $ $0$ac_configure_args_raw
 
 _ACEOF
 exec 5>>config.log
@@ -1910,8 +1882,12 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    $as_echo "PATH: $as_dir"
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    printf "%s\n" "PATH: $as_dir"
   done
 IFS=$as_save_IFS
 
@@ -1946,7 +1922,7 @@
     | -silent | --silent | --silen | --sile | --sil)
       continue ;;
     *\'*)
-      ac_arg=`$as_echo "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
+      ac_arg=`printf "%s\n" "$ac_arg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     case $ac_pass in
     1) as_fn_append ac_configure_args0 " '$ac_arg'" ;;
@@ -1981,11 +1957,13 @@
 # WARNING: Use '\'' to represent an apostrophe within the trap.
 # WARNING: Do not start the trap code with a newline, due to a FreeBSD 4.0 bug.
 trap 'exit_status=$?
+  # Sanitize IFS.
+  IFS=" ""	$as_nl"
   # Save into config.log some information that might help in debugging.
   {
     echo
 
-    $as_echo "## ---------------- ##
+    printf "%s\n" "## ---------------- ##
 ## Cache variables. ##
 ## ---------------- ##"
     echo
@@ -1996,8 +1974,8 @@
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
-$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
@@ -2021,7 +1999,7 @@
 )
     echo
 
-    $as_echo "## ----------------- ##
+    printf "%s\n" "## ----------------- ##
 ## Output variables. ##
 ## ----------------- ##"
     echo
@@ -2029,14 +2007,14 @@
     do
       eval ac_val=\$$ac_var
       case $ac_val in
-      *\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+      *\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
       esac
-      $as_echo "$ac_var='\''$ac_val'\''"
+      printf "%s\n" "$ac_var='\''$ac_val'\''"
     done | sort
     echo
 
     if test -n "$ac_subst_files"; then
-      $as_echo "## ------------------- ##
+      printf "%s\n" "## ------------------- ##
 ## File substitutions. ##
 ## ------------------- ##"
       echo
@@ -2044,15 +2022,15 @@
       do
 	eval ac_val=\$$ac_var
 	case $ac_val in
-	*\'\''*) ac_val=`$as_echo "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
+	*\'\''*) ac_val=`printf "%s\n" "$ac_val" | sed "s/'\''/'\''\\\\\\\\'\'''\''/g"`;;
 	esac
-	$as_echo "$ac_var='\''$ac_val'\''"
+	printf "%s\n" "$ac_var='\''$ac_val'\''"
       done | sort
       echo
     fi
 
     if test -s confdefs.h; then
-      $as_echo "## ----------- ##
+      printf "%s\n" "## ----------- ##
 ## confdefs.h. ##
 ## ----------- ##"
       echo
@@ -2060,8 +2038,8 @@
       echo
     fi
     test "$ac_signal" != 0 &&
-      $as_echo "$as_me: caught signal $ac_signal"
-    $as_echo "$as_me: exit $exit_status"
+      printf "%s\n" "$as_me: caught signal $ac_signal"
+    printf "%s\n" "$as_me: exit $exit_status"
   } >&5
   rm -f core *.core core.conftest.* &&
     rm -f -r conftest* confdefs* conf$$* $ac_clean_files &&
@@ -2075,63 +2053,48 @@
 # confdefs.h avoids OS command line length limits that DEFS can exceed.
 rm -f -r conftest* confdefs.h
 
-$as_echo "/* confdefs.h */" > confdefs.h
+printf "%s\n" "/* confdefs.h */" > confdefs.h
 
 # Predefined preprocessor variables.
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_NAME "$PACKAGE_NAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_NAME \"$PACKAGE_NAME\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_TARNAME "$PACKAGE_TARNAME"
-_ACEOF
+printf "%s\n" "#define PACKAGE_TARNAME \"$PACKAGE_TARNAME\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_VERSION "$PACKAGE_VERSION"
-_ACEOF
+printf "%s\n" "#define PACKAGE_VERSION \"$PACKAGE_VERSION\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_STRING "$PACKAGE_STRING"
-_ACEOF
+printf "%s\n" "#define PACKAGE_STRING \"$PACKAGE_STRING\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_BUGREPORT "$PACKAGE_BUGREPORT"
-_ACEOF
+printf "%s\n" "#define PACKAGE_BUGREPORT \"$PACKAGE_BUGREPORT\"" >>confdefs.h
 
-cat >>confdefs.h <<_ACEOF
-#define PACKAGE_URL "$PACKAGE_URL"
-_ACEOF
+printf "%s\n" "#define PACKAGE_URL \"$PACKAGE_URL\"" >>confdefs.h
 
 
 # Let the site file select an alternate cache file if it wants to.
 # Prefer an explicitly selected file to automatically selected ones.
-ac_site_file1=NONE
-ac_site_file2=NONE
 if test -n "$CONFIG_SITE"; then
-  # We do not want a PATH search for config.site.
-  case $CONFIG_SITE in #((
-    -*)  ac_site_file1=./$CONFIG_SITE;;
-    */*) ac_site_file1=$CONFIG_SITE;;
-    *)   ac_site_file1=./$CONFIG_SITE;;
-  esac
+  ac_site_files="$CONFIG_SITE"
 elif test "x$prefix" != xNONE; then
-  ac_site_file1=$prefix/share/config.site
-  ac_site_file2=$prefix/etc/config.site
+  ac_site_files="$prefix/share/config.site $prefix/etc/config.site"
 else
-  ac_site_file1=$ac_default_prefix/share/config.site
-  ac_site_file2=$ac_default_prefix/etc/config.site
+  ac_site_files="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
 fi
-for ac_site_file in "$ac_site_file1" "$ac_site_file2"
+
+for ac_site_file in $ac_site_files
 do
-  test "x$ac_site_file" = xNONE && continue
-  if test /dev/null != "$ac_site_file" && test -r "$ac_site_file"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
-$as_echo "$as_me: loading site script $ac_site_file" >&6;}
+  case $ac_site_file in #(
+  */*) :
+     ;; #(
+  *) :
+    ac_site_file=./$ac_site_file ;;
+esac
+  if test -f "$ac_site_file" && test -r "$ac_site_file"; then
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading site script $ac_site_file" >&5
+printf "%s\n" "$as_me: loading site script $ac_site_file" >&6;}
     sed 's/^/| /' "$ac_site_file" >&5
     . "$ac_site_file" \
-      || { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+      || { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "failed to load site script $ac_site_file
 See \`config.log' for more details" "$LINENO" 5; }
   fi
@@ -2141,19 +2104,438 @@
   # Some versions of bash will fail to source /dev/null (special files
   # actually), so we avoid doing that.  DJGPP emulates it as a regular file.
   if test /dev/null != "$cache_file" && test -f "$cache_file"; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
-$as_echo "$as_me: loading cache $cache_file" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: loading cache $cache_file" >&5
+printf "%s\n" "$as_me: loading cache $cache_file" >&6;}
     case $cache_file in
       [\\/]* | ?:[\\/]* ) . "$cache_file";;
       *)                      . "./$cache_file";;
     esac
   fi
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
-$as_echo "$as_me: creating cache $cache_file" >&6;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating cache $cache_file" >&5
+printf "%s\n" "$as_me: creating cache $cache_file" >&6;}
   >$cache_file
 fi
 
+# Test code for whether the C compiler supports C89 (global declarations)
+ac_c_conftest_c89_globals='
+/* Does the compiler advertise C89 conformance?
+   Do not test the value of __STDC__, because some compilers set it to 0
+   while being otherwise adequately conformant. */
+#if !defined __STDC__
+# error "Compiler does not advertise C89 conformance"
+#endif
+
+#include <stddef.h>
+#include <stdarg.h>
+struct stat;
+/* Most of the following tests are stolen from RCS 5.7 src/conf.sh.  */
+struct buf { int x; };
+struct buf * (*rcsopen) (struct buf *, struct stat *, int);
+static char *e (p, i)
+     char **p;
+     int i;
+{
+  return p[i];
+}
+static char *f (char * (*g) (char **, int), char **p, ...)
+{
+  char *s;
+  va_list v;
+  va_start (v,p);
+  s = g (p, va_arg (v,int));
+  va_end (v);
+  return s;
+}
+
+/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
+   function prototypes and stuff, but not \xHH hex character constants.
+   These do not provoke an error unfortunately, instead are silently treated
+   as an "x".  The following induces an error, until -std is added to get
+   proper ANSI mode.  Curiously \x00 != x always comes out true, for an
+   array size at least.  It is necessary to write \x00 == 0 to get something
+   that is true only with -std.  */
+int osf4_cc_array ['\''\x00'\'' == 0 ? 1 : -1];
+
+/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
+   inside strings and character constants.  */
+#define FOO(x) '\''x'\''
+int xlc6_cc_array[FOO(a) == '\''x'\'' ? 1 : -1];
+
+int test (int i, double x);
+struct s1 {int (*f) (int a);};
+struct s2 {int (*f) (double a);};
+int pairnames (int, char **, int *(*)(struct buf *, struct stat *, int),
+               int, int);'
+
+# Test code for whether the C compiler supports C89 (body of main).
+ac_c_conftest_c89_main='
+ok |= (argc == 0 || f (e, argv, 0) != argv[0] || f (e, argv, 1) != argv[1]);
+'
+
+# Test code for whether the C compiler supports C99 (global declarations)
+ac_c_conftest_c99_globals='
+// Does the compiler advertise C99 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 199901L
+# error "Compiler does not advertise C99 conformance"
+#endif
+
+#include <stdbool.h>
+extern int puts (const char *);
+extern int printf (const char *, ...);
+extern int dprintf (int, const char *, ...);
+extern void *malloc (size_t);
+
+// Check varargs macros.  These examples are taken from C99 6.10.3.5.
+// dprintf is used instead of fprintf to avoid needing to declare
+// FILE and stderr.
+#define debug(...) dprintf (2, __VA_ARGS__)
+#define showlist(...) puts (#__VA_ARGS__)
+#define report(test,...) ((test) ? puts (#test) : printf (__VA_ARGS__))
+static void
+test_varargs_macros (void)
+{
+  int x = 1234;
+  int y = 5678;
+  debug ("Flag");
+  debug ("X = %d\n", x);
+  showlist (The first, second, and third items.);
+  report (x>y, "x is %d but y is %d", x, y);
+}
+
+// Check long long types.
+#define BIG64 18446744073709551615ull
+#define BIG32 4294967295ul
+#define BIG_OK (BIG64 / BIG32 == 4294967297ull && BIG64 % BIG32 == 0)
+#if !BIG_OK
+  #error "your preprocessor is broken"
+#endif
+#if BIG_OK
+#else
+  #error "your preprocessor is broken"
+#endif
+static long long int bignum = -9223372036854775807LL;
+static unsigned long long int ubignum = BIG64;
+
+struct incomplete_array
+{
+  int datasize;
+  double data[];
+};
+
+struct named_init {
+  int number;
+  const wchar_t *name;
+  double average;
+};
+
+typedef const char *ccp;
+
+static inline int
+test_restrict (ccp restrict text)
+{
+  // See if C++-style comments work.
+  // Iterate through items via the restricted pointer.
+  // Also check for declarations in for loops.
+  for (unsigned int i = 0; *(text+i) != '\''\0'\''; ++i)
+    continue;
+  return 0;
+}
+
+// Check varargs and va_copy.
+static bool
+test_varargs (const char *format, ...)
+{
+  va_list args;
+  va_start (args, format);
+  va_list args_copy;
+  va_copy (args_copy, args);
+
+  const char *str = "";
+  int number = 0;
+  float fnumber = 0;
+
+  while (*format)
+    {
+      switch (*format++)
+	{
+	case '\''s'\'': // string
+	  str = va_arg (args_copy, const char *);
+	  break;
+	case '\''d'\'': // int
+	  number = va_arg (args_copy, int);
+	  break;
+	case '\''f'\'': // float
+	  fnumber = va_arg (args_copy, double);
+	  break;
+	default:
+	  break;
+	}
+    }
+  va_end (args_copy);
+  va_end (args);
+
+  return *str && number && fnumber;
+}
+'
+
+# Test code for whether the C compiler supports C99 (body of main).
+ac_c_conftest_c99_main='
+  // Check bool.
+  _Bool success = false;
+  success |= (argc != 0);
+
+  // Check restrict.
+  if (test_restrict ("String literal") == 0)
+    success = true;
+  char *restrict newvar = "Another string";
+
+  // Check varargs.
+  success &= test_varargs ("s, d'\'' f .", "string", 65, 34.234);
+  test_varargs_macros ();
+
+  // Check flexible array members.
+  struct incomplete_array *ia =
+    malloc (sizeof (struct incomplete_array) + (sizeof (double) * 10));
+  ia->datasize = 10;
+  for (int i = 0; i < ia->datasize; ++i)
+    ia->data[i] = i * 1.234;
+
+  // Check named initializers.
+  struct named_init ni = {
+    .number = 34,
+    .name = L"Test wide string",
+    .average = 543.34343,
+  };
+
+  ni.number = 58;
+
+  int dynamic_array[ni.number];
+  dynamic_array[0] = argv[0][0];
+  dynamic_array[ni.number - 1] = 543;
+
+  // work around unused variable warnings
+  ok |= (!success || bignum == 0LL || ubignum == 0uLL || newvar[0] == '\''x'\''
+	 || dynamic_array[ni.number - 1] != 543);
+'
+
+# Test code for whether the C compiler supports C11 (global declarations)
+ac_c_conftest_c11_globals='
+// Does the compiler advertise C11 conformance?
+#if !defined __STDC_VERSION__ || __STDC_VERSION__ < 201112L
+# error "Compiler does not advertise C11 conformance"
+#endif
+
+// Check _Alignas.
+char _Alignas (double) aligned_as_double;
+char _Alignas (0) no_special_alignment;
+extern char aligned_as_int;
+char _Alignas (0) _Alignas (int) aligned_as_int;
+
+// Check _Alignof.
+enum
+{
+  int_alignment = _Alignof (int),
+  int_array_alignment = _Alignof (int[100]),
+  char_alignment = _Alignof (char)
+};
+_Static_assert (0 < -_Alignof (int), "_Alignof is signed");
+
+// Check _Noreturn.
+int _Noreturn does_not_return (void) { for (;;) continue; }
+
+// Check _Static_assert.
+struct test_static_assert
+{
+  int x;
+  _Static_assert (sizeof (int) <= sizeof (long int),
+                  "_Static_assert does not work in struct");
+  long int y;
+};
+
+// Check UTF-8 literals.
+#define u8 syntax error!
+char const utf8_literal[] = u8"happens to be ASCII" "another string";
+
+// Check duplicate typedefs.
+typedef long *long_ptr;
+typedef long int *long_ptr;
+typedef long_ptr long_ptr;
+
+// Anonymous structures and unions -- taken from C11 6.7.2.1 Example 1.
+struct anonymous
+{
+  union {
+    struct { int i; int j; };
+    struct { int k; long int l; } w;
+  };
+  int m;
+} v1;
+'
+
+# Test code for whether the C compiler supports C11 (body of main).
+ac_c_conftest_c11_main='
+  _Static_assert ((offsetof (struct anonymous, i)
+		   == offsetof (struct anonymous, w.k)),
+		  "Anonymous union alignment botch");
+  v1.i = 2;
+  v1.w.k = 5;
+  ok |= v1.i != 5;
+'
+
+# Test code for whether the C compiler supports C11 (complete).
+ac_c_conftest_c11_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+${ac_c_conftest_c11_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  ${ac_c_conftest_c11_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C99 (complete).
+ac_c_conftest_c99_program="${ac_c_conftest_c89_globals}
+${ac_c_conftest_c99_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  ${ac_c_conftest_c99_main}
+  return ok;
+}
+"
+
+# Test code for whether the C compiler supports C89 (complete).
+ac_c_conftest_c89_program="${ac_c_conftest_c89_globals}
+
+int
+main (int argc, char **argv)
+{
+  int ok = 0;
+  ${ac_c_conftest_c89_main}
+  return ok;
+}
+"
+
+as_fn_append ac_header_c_list " stdio.h stdio_h HAVE_STDIO_H"
+as_fn_append ac_header_c_list " stdlib.h stdlib_h HAVE_STDLIB_H"
+as_fn_append ac_header_c_list " string.h string_h HAVE_STRING_H"
+as_fn_append ac_header_c_list " inttypes.h inttypes_h HAVE_INTTYPES_H"
+as_fn_append ac_header_c_list " stdint.h stdint_h HAVE_STDINT_H"
+as_fn_append ac_header_c_list " strings.h strings_h HAVE_STRINGS_H"
+as_fn_append ac_header_c_list " sys/stat.h sys_stat_h HAVE_SYS_STAT_H"
+as_fn_append ac_header_c_list " sys/types.h sys_types_h HAVE_SYS_TYPES_H"
+as_fn_append ac_header_c_list " unistd.h unistd_h HAVE_UNISTD_H"
+as_fn_append ac_header_c_list " vfork.h vfork_h HAVE_VFORK_H"
+as_fn_append ac_func_c_list " fork HAVE_FORK"
+as_fn_append ac_func_c_list " vfork HAVE_VFORK"
+as_fn_append ac_func_c_list " vprintf HAVE_VPRINTF"
+
+# Auxiliary files required by this configure script.
+ac_aux_files="config.guess config.sub"
+
+# Locations in which to look for auxiliary files.
+ac_aux_dir_candidates="${srcdir}${PATH_SEPARATOR}${srcdir}/..${PATH_SEPARATOR}${srcdir}/../.."
+
+# Search for a directory containing all of the required auxiliary files,
+# $ac_aux_files, from the $PATH-style list $ac_aux_dir_candidates.
+# If we don't find one directory that contains all the files we need,
+# we report the set of missing files from the *first* directory in
+# $ac_aux_dir_candidates and give up.
+ac_missing_aux_files=""
+ac_first_candidate=:
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: looking for aux files: $ac_aux_files" >&5
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+as_found=false
+for as_dir in $ac_aux_dir_candidates
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+  as_found=:
+
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}:  trying $as_dir" >&5
+  ac_aux_dir_found=yes
+  ac_install_sh=
+  for ac_aux in $ac_aux_files
+  do
+    # As a special case, if "install-sh" is required, that requirement
+    # can be satisfied by any of "install-sh", "install.sh", or "shtool",
+    # and $ac_install_sh is set appropriately for whichever one is found.
+    if test x"$ac_aux" = x"install-sh"
+    then
+      if test -f "${as_dir}install-sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install-sh found" >&5
+        ac_install_sh="${as_dir}install-sh -c"
+      elif test -f "${as_dir}install.sh"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}install.sh found" >&5
+        ac_install_sh="${as_dir}install.sh -c"
+      elif test -f "${as_dir}shtool"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}shtool found" >&5
+        ac_install_sh="${as_dir}shtool install -c"
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} install-sh"
+        else
+          break
+        fi
+      fi
+    else
+      if test -f "${as_dir}${ac_aux}"; then
+        printf "%s\n" "$as_me:${as_lineno-$LINENO}:   ${as_dir}${ac_aux} found" >&5
+      else
+        ac_aux_dir_found=no
+        if $ac_first_candidate; then
+          ac_missing_aux_files="${ac_missing_aux_files} ${ac_aux}"
+        else
+          break
+        fi
+      fi
+    fi
+  done
+  if test "$ac_aux_dir_found" = yes; then
+    ac_aux_dir="$as_dir"
+    break
+  fi
+  ac_first_candidate=false
+
+  as_found=false
+done
+IFS=$as_save_IFS
+if $as_found
+then :
+
+else $as_nop
+  as_fn_error $? "cannot find required auxiliary files:$ac_missing_aux_files" "$LINENO" 5
+fi
+
+
+# These three variables are undocumented and unsupported,
+# and are intended to be withdrawn in a future Autoconf release.
+# They can cause serious problems if a builder's source tree is in a directory
+# whose full name contains unusual characters.
+if test -f "${ac_aux_dir}config.guess"; then
+  ac_config_guess="$SHELL ${ac_aux_dir}config.guess"
+fi
+if test -f "${ac_aux_dir}config.sub"; then
+  ac_config_sub="$SHELL ${ac_aux_dir}config.sub"
+fi
+if test -f "$ac_aux_dir/configure"; then
+  ac_configure="$SHELL ${ac_aux_dir}configure"
+fi
+
 # Check that the precious variables saved in the cache have kept the same
 # value.
 ac_cache_corrupted=false
@@ -2164,12 +2546,12 @@
   eval ac_new_val=\$ac_env_${ac_var}_value
   case $ac_old_set,$ac_new_set in
     set,)
-      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
-$as_echo "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was set to \`$ac_old_val' in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,set)
-      { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
-$as_echo "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' was not set in the previous run" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' was not set in the previous run" >&2;}
       ac_cache_corrupted=: ;;
     ,);;
     *)
@@ -2178,24 +2560,24 @@
 	ac_old_val_w=`echo x $ac_old_val`
 	ac_new_val_w=`echo x $ac_new_val`
 	if test "$ac_old_val_w" != "$ac_new_val_w"; then
-	  { $as_echo "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
-$as_echo "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: \`$ac_var' has changed since the previous run:" >&5
+printf "%s\n" "$as_me: error: \`$ac_var' has changed since the previous run:" >&2;}
 	  ac_cache_corrupted=:
 	else
-	  { $as_echo "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
-$as_echo "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
+	  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&5
+printf "%s\n" "$as_me: warning: ignoring whitespace changes in \`$ac_var' since the previous run:" >&2;}
 	  eval $ac_var=\$ac_old_val
 	fi
-	{ $as_echo "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
-$as_echo "$as_me:   former value:  \`$ac_old_val'" >&2;}
-	{ $as_echo "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
-$as_echo "$as_me:   current value: \`$ac_new_val'" >&2;}
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   former value:  \`$ac_old_val'" >&5
+printf "%s\n" "$as_me:   former value:  \`$ac_old_val'" >&2;}
+	{ printf "%s\n" "$as_me:${as_lineno-$LINENO}:   current value: \`$ac_new_val'" >&5
+printf "%s\n" "$as_me:   current value: \`$ac_new_val'" >&2;}
       fi;;
   esac
   # Pass precious variables to config.status.
   if test "$ac_new_set" = set; then
     case $ac_new_val in
-    *\'*) ac_arg=$ac_var=`$as_echo "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_arg=$ac_var=`printf "%s\n" "$ac_new_val" | sed "s/'/'\\\\\\\\''/g"` ;;
     *) ac_arg=$ac_var=$ac_new_val ;;
     esac
     case " $ac_configure_args " in
@@ -2205,11 +2587,12 @@
   fi
 done
 if $ac_cache_corrupted; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-  { $as_echo "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
-$as_echo "$as_me: error: changes in the environment can compromise the build" >&2;}
-  as_fn_error $? "run \`make distclean' and/or \`rm $cache_file' and start over" "$LINENO" 5
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: changes in the environment can compromise the build" >&5
+printf "%s\n" "$as_me: error: changes in the environment can compromise the build" >&2;}
+  as_fn_error $? "run \`${MAKE-make} distclean' and/or \`rm $cache_file'
+	    and start over" "$LINENO" 5
 fi
 ## -------------------- ##
 ## Main body of script. ##
@@ -2227,55 +2610,30 @@
 
 ac_config_files="$ac_config_files Makefile rogue.6 rogue.cat rogue.doc rogue.html rogue.me"
 
-ac_aux_dir=
-for ac_dir in "$srcdir" "$srcdir/.." "$srcdir/../.."; do
-  if test -f "$ac_dir/install-sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install-sh -c"
-    break
-  elif test -f "$ac_dir/install.sh"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/install.sh -c"
-    break
-  elif test -f "$ac_dir/shtool"; then
-    ac_aux_dir=$ac_dir
-    ac_install_sh="$ac_aux_dir/shtool install -c"
-    break
-  fi
-done
-if test -z "$ac_aux_dir"; then
-  as_fn_error $? "cannot find install-sh, install.sh, or shtool in \"$srcdir\" \"$srcdir/..\" \"$srcdir/../..\"" "$LINENO" 5
-fi
 
-# These three variables are undocumented and unsupported,
-# and are intended to be withdrawn in a future Autoconf release.
-# They can cause serious problems if a builder's source tree is in a directory
-# whose full name contains unusual characters.
-ac_config_guess="$SHELL $ac_aux_dir/config.guess"  # Please don't use this var.
-ac_config_sub="$SHELL $ac_aux_dir/config.sub"  # Please don't use this var.
-ac_configure="$SHELL $ac_aux_dir/configure"  # Please don't use this var.
 
 
-# Make sure we can run config.sub.
-$SHELL "$ac_aux_dir/config.sub" sun4 >/dev/null 2>&1 ||
-  as_fn_error $? "cannot run $SHELL $ac_aux_dir/config.sub" "$LINENO" 5
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
-$as_echo_n "checking build system type... " >&6; }
-if ${ac_cv_build+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+  # Make sure we can run config.sub.
+$SHELL "${ac_aux_dir}config.sub" sun4 >/dev/null 2>&1 ||
+  as_fn_error $? "cannot run $SHELL ${ac_aux_dir}config.sub" "$LINENO" 5
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking build system type" >&5
+printf %s "checking build system type... " >&6; }
+if test ${ac_cv_build+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_build_alias=$build_alias
 test "x$ac_build_alias" = x &&
-  ac_build_alias=`$SHELL "$ac_aux_dir/config.guess"`
+  ac_build_alias=`$SHELL "${ac_aux_dir}config.guess"`
 test "x$ac_build_alias" = x &&
   as_fn_error $? "cannot guess build type; you must specify one" "$LINENO" 5
-ac_cv_build=`$SHELL "$ac_aux_dir/config.sub" $ac_build_alias` ||
-  as_fn_error $? "$SHELL $ac_aux_dir/config.sub $ac_build_alias failed" "$LINENO" 5
+ac_cv_build=`$SHELL "${ac_aux_dir}config.sub" $ac_build_alias` ||
+  as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $ac_build_alias failed" "$LINENO" 5
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
-$as_echo "$ac_cv_build" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_build" >&5
+printf "%s\n" "$ac_cv_build" >&6; }
 case $ac_cv_build in
 *-*-*) ;;
 *) as_fn_error $? "invalid value of canonical build" "$LINENO" 5;;
@@ -2294,21 +2652,22 @@
 case $build_os in *\ *) build_os=`echo "$build_os" | sed 's/ /-/g'`;; esac
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
-$as_echo_n "checking host system type... " >&6; }
-if ${ac_cv_host+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking host system type" >&5
+printf %s "checking host system type... " >&6; }
+if test ${ac_cv_host+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$host_alias" = x; then
   ac_cv_host=$ac_cv_build
 else
-  ac_cv_host=`$SHELL "$ac_aux_dir/config.sub" $host_alias` ||
-    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $host_alias failed" "$LINENO" 5
+  ac_cv_host=`$SHELL "${ac_aux_dir}config.sub" $host_alias` ||
+    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $host_alias failed" "$LINENO" 5
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
-$as_echo "$ac_cv_host" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_host" >&5
+printf "%s\n" "$ac_cv_host" >&6; }
 case $ac_cv_host in
 *-*-*) ;;
 *) as_fn_error $? "invalid value of canonical host" "$LINENO" 5;;
@@ -2327,21 +2686,22 @@
 case $host_os in *\ *) host_os=`echo "$host_os" | sed 's/ /-/g'`;; esac
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
-$as_echo_n "checking target system type... " >&6; }
-if ${ac_cv_target+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking target system type" >&5
+printf %s "checking target system type... " >&6; }
+if test ${ac_cv_target+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test "x$target_alias" = x; then
   ac_cv_target=$ac_cv_host
 else
-  ac_cv_target=`$SHELL "$ac_aux_dir/config.sub" $target_alias` ||
-    as_fn_error $? "$SHELL $ac_aux_dir/config.sub $target_alias failed" "$LINENO" 5
+  ac_cv_target=`$SHELL "${ac_aux_dir}config.sub" $target_alias` ||
+    as_fn_error $? "$SHELL ${ac_aux_dir}config.sub $target_alias failed" "$LINENO" 5
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
-$as_echo "$ac_cv_target" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_target" >&5
+printf "%s\n" "$ac_cv_target" >&6; }
 case $ac_cv_target in
 *-*-*) ;;
 *) as_fn_error $? "invalid value of canonical target" "$LINENO" 5;;
@@ -2369,6 +2729,15 @@
 
 
 # Checks for programs.
+
+
+
+
+
+
+
+
+
 ac_ext=c
 ac_cpp='$CPP $CPPFLAGS'
 ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
@@ -2377,11 +2746,12 @@
 if test -n "$ac_tool_prefix"; then
   # Extract the first word of "${ac_tool_prefix}gcc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}gcc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -2389,11 +2759,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}gcc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2404,11 +2778,11 @@
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2417,11 +2791,12 @@
   ac_ct_CC=$CC
   # Extract the first word of "gcc", so it can be a program name with args.
 set dummy gcc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -2429,11 +2804,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="gcc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2444,11 +2823,11 @@
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
-$as_echo "$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
   if test "x$ac_ct_CC" = x; then
@@ -2456,8 +2835,8 @@
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
@@ -2470,11 +2849,12 @@
           if test -n "$ac_tool_prefix"; then
     # Extract the first word of "${ac_tool_prefix}cc", so it can be a program name with args.
 set dummy ${ac_tool_prefix}cc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -2482,11 +2862,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="${ac_tool_prefix}cc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2497,11 +2881,11 @@
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2510,11 +2894,12 @@
 if test -z "$CC"; then
   # Extract the first word of "cc", so it can be a program name with args.
 set dummy cc; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -2523,15 +2908,19 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
-    if test "$as_dir/$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    if test "$as_dir$ac_word$ac_exec_ext" = "/usr/ucb/cc"; then
        ac_prog_rejected=yes
        continue
      fi
     ac_cv_prog_CC="cc"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2547,18 +2936,18 @@
     # However, it has the same basename, so the bogon will be chosen
     # first if we set CC to just the basename; use the full file name.
     shift
-    ac_cv_prog_CC="$as_dir/$ac_word${1+' '}$@"
+    ac_cv_prog_CC="$as_dir$ac_word${1+' '}$@"
   fi
 fi
 fi
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2569,11 +2958,12 @@
   do
     # Extract the first word of "$ac_tool_prefix$ac_prog", so it can be a program name with args.
 set dummy $ac_tool_prefix$ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$CC"; then
   ac_cv_prog_CC="$CC" # Let the user override the test.
 else
@@ -2581,11 +2971,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_CC="$ac_tool_prefix$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2596,11 +2990,11 @@
 fi
 CC=$ac_cv_prog_CC
 if test -n "$CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
-$as_echo "$CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2613,11 +3007,12 @@
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
 set dummy $ac_prog; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_ac_ct_CC+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$ac_ct_CC"; then
   ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
 else
@@ -2625,11 +3020,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_ac_ct_CC="$ac_prog"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -2640,11 +3039,11 @@
 fi
 ac_ct_CC=$ac_cv_prog_ac_ct_CC
 if test -n "$ac_ct_CC"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
-$as_echo "$ac_ct_CC" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -2656,8 +3055,8 @@
   else
     case $cross_compiling:$ac_tool_warned in
 yes:)
-{ $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
-$as_echo "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
 ac_tool_warned=yes ;;
 esac
     CC=$ac_ct_CC
@@ -2665,25 +3064,129 @@
 fi
 
 fi
+if test -z "$CC"; then
+  if test -n "$ac_tool_prefix"; then
+  # Extract the first word of "${ac_tool_prefix}clang", so it can be a program name with args.
+set dummy ${ac_tool_prefix}clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$CC"; then
+  ac_cv_prog_CC="$CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_CC="${ac_tool_prefix}clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+CC=$ac_cv_prog_CC
+if test -n "$CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CC" >&5
+printf "%s\n" "$CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
 
 
-test -z "$CC" && { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+fi
+if test -z "$ac_cv_prog_CC"; then
+  ac_ct_CC=$CC
+  # Extract the first word of "clang", so it can be a program name with args.
+set dummy clang; ac_word=$2
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_ac_ct_CC+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test -n "$ac_ct_CC"; then
+  ac_cv_prog_ac_ct_CC="$ac_ct_CC" # Let the user override the test.
+else
+as_save_IFS=$IFS; IFS=$PATH_SEPARATOR
+for as_dir in $PATH
+do
+  IFS=$as_save_IFS
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_exec_ext in '' $ac_executable_extensions; do
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
+    ac_cv_prog_ac_ct_CC="clang"
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
+    break 2
+  fi
+done
+  done
+IFS=$as_save_IFS
+
+fi
+fi
+ac_ct_CC=$ac_cv_prog_ac_ct_CC
+if test -n "$ac_ct_CC"; then
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_ct_CC" >&5
+printf "%s\n" "$ac_ct_CC" >&6; }
+else
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+fi
+
+  if test "x$ac_ct_CC" = x; then
+    CC=""
+  else
+    case $cross_compiling:$ac_tool_warned in
+yes:)
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: using cross tools not prefixed with host triplet" >&5
+printf "%s\n" "$as_me: WARNING: using cross tools not prefixed with host triplet" >&2;}
+ac_tool_warned=yes ;;
+esac
+    CC=$ac_ct_CC
+  fi
+else
+  CC="$ac_cv_prog_CC"
+fi
+
+fi
+
+
+test -z "$CC" && { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "no acceptable C compiler found in \$PATH
 See \`config.log' for more details" "$LINENO" 5; }
 
 # Provide some information about the compiler.
-$as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
+printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler version" >&5
 set X $ac_compile
 ac_compiler=$2
-for ac_option in --version -v -V -qversion; do
+for ac_option in --version -v -V -qversion -version; do
   { { ac_try="$ac_compiler $ac_option >&5"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compiler $ac_option >&5") 2>conftest.err
   ac_status=$?
   if test -s conftest.err; then
@@ -2693,7 +3196,7 @@
     cat conftest.er1 >&5
   fi
   rm -f conftest.er1 conftest.err
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
 done
 
@@ -2701,7 +3204,7 @@
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -2713,9 +3216,9 @@
 # Try to create an executable without -o first, disregard a.out.
 # It will help us diagnose broken compilers, and finding out an intuition
 # of exeext.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
-$as_echo_n "checking whether the C compiler works... " >&6; }
-ac_link_default=`$as_echo "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the C compiler works" >&5
+printf %s "checking whether the C compiler works... " >&6; }
+ac_link_default=`printf "%s\n" "$ac_link" | sed 's/ -o *conftest[^ ]*//'`
 
 # The possible output files:
 ac_files="a.out conftest.exe conftest a.exe a_out.exe b.out conftest.*"
@@ -2736,11 +3239,12 @@
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link_default") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # Autoconf-2.13 could set the ac_cv_exeext variable to `no'.
 # So ignore a value of `no', otherwise this would lead to `EXEEXT = no'
 # in a Makefile.  We should not override ac_cv_exeext if it was cached,
@@ -2757,7 +3261,7 @@
 	# certainly right.
 	break;;
     *.* )
-	if test "${ac_cv_exeext+set}" = set && test "$ac_cv_exeext" != no;
+	if test ${ac_cv_exeext+y} && test "$ac_cv_exeext" != no;
 	then :; else
 	   ac_cv_exeext=`expr "$ac_file" : '[^.]*\(\..*\)'`
 	fi
@@ -2773,44 +3277,46 @@
 done
 test "$ac_cv_exeext" = no && ac_cv_exeext=
 
-else
+else $as_nop
   ac_file=''
 fi
-if test -z "$ac_file"; then :
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
-$as_echo "$as_me: failed program was:" >&5
+if test -z "$ac_file"
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
+printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error 77 "C compiler cannot create executables
 See \`config.log' for more details" "$LINENO" 5; }
-else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
-$as_echo_n "checking for C compiler default output file name... " >&6; }
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
-$as_echo "$ac_file" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for C compiler default output file name" >&5
+printf %s "checking for C compiler default output file name... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_file" >&5
+printf "%s\n" "$ac_file" >&6; }
 ac_exeext=$ac_cv_exeext
 
 rm -f -r a.out a.out.dSYM a.exe conftest$ac_cv_exeext b.out
 ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
-$as_echo_n "checking for suffix of executables... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of executables" >&5
+printf %s "checking for suffix of executables... " >&6; }
 if { { ac_try="$ac_link"
 case "(($ac_try" in
   *\"* | *\`* | *\\*) ac_try_echo=\$ac_try;;
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   # If both `conftest.exe' and `conftest' are `present' (well, observable)
 # catch `conftest.exe'.  For instance with Cygwin, `ls conftest' will
 # work properly (i.e., refer to `conftest.exe'), while it won't with
@@ -2824,15 +3330,15 @@
     * ) break;;
   esac
 done
-else
-  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of executables: cannot compile and link
 See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest conftest$ac_cv_exeext
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
-$as_echo "$ac_cv_exeext" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_exeext" >&5
+printf "%s\n" "$ac_cv_exeext" >&6; }
 
 rm -f conftest.$ac_ext
 EXEEXT=$ac_cv_exeext
@@ -2841,7 +3347,7 @@
 /* end confdefs.h.  */
 #include <stdio.h>
 int
-main ()
+main (void)
 {
 FILE *f = fopen ("conftest.out", "w");
  return ferror (f) || fclose (f) != 0;
@@ -2853,8 +3359,8 @@
 ac_clean_files="$ac_clean_files conftest.out"
 # Check that the compiler produces executables we can run.  If not, either
 # the compiler is broken, or we cross compile.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
-$as_echo_n "checking whether we are cross compiling... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether we are cross compiling" >&5
+printf %s "checking whether we are cross compiling... " >&6; }
 if test "$cross_compiling" != yes; then
   { { ac_try="$ac_link"
 case "(($ac_try" in
@@ -2862,10 +3368,10 @@
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_link") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }
   if { ac_try='./conftest$ac_cv_exeext'
   { { case "(($ac_try" in
@@ -2873,39 +3379,40 @@
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_try") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
   test $ac_status = 0; }; }; then
     cross_compiling=no
   else
     if test "$cross_compiling" = maybe; then
 	cross_compiling=yes
     else
-	{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "cannot run C compiled programs.
+	{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error 77 "cannot run C compiled programs.
 If you meant to cross compile, use \`--host'.
 See \`config.log' for more details" "$LINENO" 5; }
     fi
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
-$as_echo "$cross_compiling" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $cross_compiling" >&5
+printf "%s\n" "$cross_compiling" >&6; }
 
 rm -f conftest.$ac_ext conftest$ac_cv_exeext conftest.out
 ac_clean_files=$ac_clean_files_save
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
-$as_echo_n "checking for suffix of object files... " >&6; }
-if ${ac_cv_objext+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for suffix of object files" >&5
+printf %s "checking for suffix of object files... " >&6; }
+if test ${ac_cv_objext+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
@@ -2919,11 +3426,12 @@
   *) ac_try_echo=$ac_try;;
 esac
 eval ac_try_echo="\"\$as_me:${as_lineno-$LINENO}: $ac_try_echo\""
-$as_echo "$ac_try_echo"; } >&5
+printf "%s\n" "$ac_try_echo"; } >&5
   (eval "$ac_compile") 2>&5
   ac_status=$?
-  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
-  test $ac_status = 0; }; then :
+  printf "%s\n" "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
+  test $ac_status = 0; }
+then :
   for ac_file in conftest.o conftest.obj conftest.*; do
   test -f "$ac_file" || continue;
   case $ac_file in
@@ -2932,31 +3440,32 @@
        break;;
   esac
 done
-else
-  $as_echo "$as_me: failed program was:" >&5
+else $as_nop
+  printf "%s\n" "$as_me: failed program was:" >&5
 sed 's/^/| /' conftest.$ac_ext >&5
 
-{ { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
+{ { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
 as_fn_error $? "cannot compute suffix of object files: cannot compile
 See \`config.log' for more details" "$LINENO" 5; }
 fi
 rm -f conftest.$ac_cv_objext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
-$as_echo "$ac_cv_objext" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_objext" >&5
+printf "%s\n" "$ac_cv_objext" >&6; }
 OBJEXT=$ac_cv_objext
 ac_objext=$OBJEXT
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether we are using the GNU C compiler" >&5
-$as_echo_n "checking whether we are using the GNU C compiler... " >&6; }
-if ${ac_cv_c_compiler_gnu+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether the compiler supports GNU C" >&5
+printf %s "checking whether the compiler supports GNU C... " >&6; }
+if test ${ac_cv_c_compiler_gnu+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 #ifndef __GNUC__
        choke me
@@ -2966,29 +3475,33 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_compiler_gnu=yes
-else
+else $as_nop
   ac_compiler_gnu=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 ac_cv_c_compiler_gnu=$ac_compiler_gnu
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
-$as_echo "$ac_cv_c_compiler_gnu" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_compiler_gnu" >&5
+printf "%s\n" "$ac_cv_c_compiler_gnu" >&6; }
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
 if test $ac_compiler_gnu = yes; then
   GCC=yes
 else
   GCC=
 fi
-ac_test_CFLAGS=${CFLAGS+set}
+ac_test_CFLAGS=${CFLAGS+y}
 ac_save_CFLAGS=$CFLAGS
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
-$as_echo_n "checking whether $CC accepts -g... " >&6; }
-if ${ac_cv_prog_cc_g+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CC accepts -g" >&5
+printf %s "checking whether $CC accepts -g... " >&6; }
+if test ${ac_cv_prog_cc_g+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   ac_save_c_werror_flag=$ac_c_werror_flag
    ac_c_werror_flag=yes
    ac_cv_prog_cc_g=no
@@ -2997,57 +3510,60 @@
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
-else
+else $as_nop
   CFLAGS=""
       cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
 
-else
+else $as_nop
   ac_c_werror_flag=$ac_save_c_werror_flag
 	 CFLAGS="-g"
 	 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_g=yes
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
    ac_c_werror_flag=$ac_save_c_werror_flag
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
-$as_echo "$ac_cv_prog_cc_g" >&6; }
-if test "$ac_test_CFLAGS" = set; then
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_g" >&5
+printf "%s\n" "$ac_cv_prog_cc_g" >&6; }
+if test $ac_test_CFLAGS; then
   CFLAGS=$ac_save_CFLAGS
 elif test $ac_cv_prog_cc_g = yes; then
   if test "$GCC" = yes; then
@@ -3062,94 +3578,144 @@
     CFLAGS=
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $CC option to accept ISO C89" >&5
-$as_echo_n "checking for $CC option to accept ISO C89... " >&6; }
-if ${ac_cv_prog_cc_c89+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  ac_cv_prog_cc_c89=no
+ac_prog_cc_stdc=no
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C11 features" >&5
+printf %s "checking for $CC option to enable C11 features... " >&6; }
+if test ${ac_cv_prog_cc_c11+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c11=no
 ac_save_CC=$CC
 cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
-#include <stdarg.h>
-#include <stdio.h>
-struct stat;
-/* Most of the following tests are stolen from RCS 5.7's src/conf.sh.  */
-struct buf { int x; };
-FILE * (*rcsopen) (struct buf *, struct stat *, int);
-static char *e (p, i)
-     char **p;
-     int i;
-{
-  return p[i];
-}
-static char *f (char * (*g) (char **, int), char **p, ...)
-{
-  char *s;
-  va_list v;
-  va_start (v,p);
-  s = g (p, va_arg (v,int));
-  va_end (v);
-  return s;
-}
-
-/* OSF 4.0 Compaq cc is some sort of almost-ANSI by default.  It has
-   function prototypes and stuff, but not '\xHH' hex character constants.
-   These don't provoke an error unfortunately, instead are silently treated
-   as 'x'.  The following induces an error, until -std is added to get
-   proper ANSI mode.  Curiously '\x00'!='x' always comes out true, for an
-   array size at least.  It's necessary to write '\x00'==0 to get something
-   that's true only with -std.  */
-int osf4_cc_array ['\x00' == 0 ? 1 : -1];
+$ac_c_conftest_c11_program
+_ACEOF
+for ac_arg in '' -std=gnu11
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c11=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c11" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
 
-/* IBM C 6 for AIX is almost-ANSI by default, but it replaces macro parameters
-   inside strings and character constants.  */
-#define FOO(x) 'x'
-int xlc6_cc_array[FOO(a) == 'x' ? 1 : -1];
+if test "x$ac_cv_prog_cc_c11" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c11" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c11" >&5
+printf "%s\n" "$ac_cv_prog_cc_c11" >&6; }
+     CC="$CC $ac_cv_prog_cc_c11"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c11
+  ac_prog_cc_stdc=c11
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C99 features" >&5
+printf %s "checking for $CC option to enable C99 features... " >&6; }
+if test ${ac_cv_prog_cc_c99+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c99=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c99_program
+_ACEOF
+for ac_arg in '' -std=gnu99 -std=c99 -c99 -qlanglvl=extc1x -qlanglvl=extc99 -AC99 -D_STDC_C99=
+do
+  CC="$ac_save_CC $ac_arg"
+  if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_cv_prog_cc_c99=$ac_arg
+fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam
+  test "x$ac_cv_prog_cc_c99" != "xno" && break
+done
+rm -f conftest.$ac_ext
+CC=$ac_save_CC
+fi
 
-int test (int i, double x);
-struct s1 {int (*f) (int a);};
-struct s2 {int (*f) (double a);};
-int pairnames (int, char **, FILE *(*)(struct buf *, struct stat *, int), int, int);
-int argc;
-char **argv;
-int
-main ()
-{
-return f (e, argv, 0) != argv[0]  ||  f (e, argv, 1) != argv[1];
-  ;
-  return 0;
-}
+if test "x$ac_cv_prog_cc_c99" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c99" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c99" >&5
+printf "%s\n" "$ac_cv_prog_cc_c99" >&6; }
+     CC="$CC $ac_cv_prog_cc_c99"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c99
+  ac_prog_cc_stdc=c99
+fi
+fi
+if test x$ac_prog_cc_stdc = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $CC option to enable C89 features" >&5
+printf %s "checking for $CC option to enable C89 features... " >&6; }
+if test ${ac_cv_prog_cc_c89+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  ac_cv_prog_cc_c89=no
+ac_save_CC=$CC
+cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+$ac_c_conftest_c89_program
 _ACEOF
-for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std \
-	-Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
+for ac_arg in '' -qlanglvl=extc89 -qlanglvl=ansi -std -Ae "-Aa -D_HPUX_SOURCE" "-Xc -D__EXTENSIONS__"
 do
   CC="$ac_save_CC $ac_arg"
-  if ac_fn_c_try_compile "$LINENO"; then :
+  if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_prog_cc_c89=$ac_arg
 fi
-rm -f core conftest.err conftest.$ac_objext
+rm -f core conftest.err conftest.$ac_objext conftest.beam
   test "x$ac_cv_prog_cc_c89" != "xno" && break
 done
 rm -f conftest.$ac_ext
 CC=$ac_save_CC
-
 fi
-# AC_CACHE_VAL
-case "x$ac_cv_prog_cc_c89" in
-  x)
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
-$as_echo "none needed" >&6; } ;;
-  xno)
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
-$as_echo "unsupported" >&6; } ;;
-  *)
-    CC="$CC $ac_cv_prog_cc_c89"
-    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
-$as_echo "$ac_cv_prog_cc_c89" >&6; } ;;
-esac
-if test "x$ac_cv_prog_cc_c89" != xno; then :
 
+if test "x$ac_cv_prog_cc_c89" = xno
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unsupported" >&5
+printf "%s\n" "unsupported" >&6; }
+else $as_nop
+  if test "x$ac_cv_prog_cc_c89" = x
+then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: none needed" >&5
+printf "%s\n" "none needed" >&6; }
+else $as_nop
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_cc_c89" >&5
+printf "%s\n" "$ac_cv_prog_cc_c89" >&6; }
+     CC="$CC $ac_cv_prog_cc_c89"
+fi
+  ac_cv_prog_cc_stdc=$ac_cv_prog_cc_c89
+  ac_prog_cc_stdc=c89
+fi
 fi
 
 ac_ext=c
@@ -3163,149 +3729,41 @@
 
 # Checks for header files.
 
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
-$as_echo_n "checking how to run the C preprocessor... " >&6; }
-# On Suns, sometimes $CPP names a directory.
-if test -n "$CPP" && test -d "$CPP"; then
-  CPP=
-fi
-if test -z "$CPP"; then
-  if ${ac_cv_prog_CPP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-      # Double quotes because CPP needs to be expanded
-    for CPP in "$CC -E" "$CC -E -traditional-cpp" "/lib/cpp"
-    do
-      ac_preproc_ok=false
-for ac_c_preproc_warn_flag in '' yes
+ac_header= ac_cache=
+for ac_item in $ac_header_c_list
 do
-  # Use a header file that comes with gcc, so configuring glibc
-  # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp. "Syntax error" is here to catch this case.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-		     Syntax error
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-
-else
-  # Broken: fails on valid input.
-continue
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
-
-  # OK, works on sane cases.  Now check whether nonexistent headers
-  # can be detected and how.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ac_nonexistent.h>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  # Broken: success on invalid input.
-continue
-else
-  # Passes both tests.
-ac_preproc_ok=:
-break
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
-
+  if test $ac_cache; then
+    ac_fn_c_check_header_compile "$LINENO" $ac_header ac_cv_header_$ac_cache "$ac_includes_default"
+    if eval test \"x\$ac_cv_header_$ac_cache\" = xyes; then
+      printf "%s\n" "#define $ac_item 1" >> confdefs.h
+    fi
+    ac_header= ac_cache=
+  elif test $ac_header; then
+    ac_cache=$ac_item
+  else
+    ac_header=$ac_item
+  fi
 done
-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then :
-  break
-fi
 
-    done
-    ac_cv_prog_CPP=$CPP
 
-fi
-  CPP=$ac_cv_prog_CPP
-else
-  ac_cv_prog_CPP=$CPP
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
-$as_echo "$CPP" >&6; }
-ac_preproc_ok=false
-for ac_c_preproc_warn_flag in '' yes
-do
-  # Use a header file that comes with gcc, so configuring glibc
-  # with a fresh cross-compiler works.
-  # Prefer <limits.h> to <assert.h> if __STDC__ is defined, since
-  # <limits.h> exists even on freestanding compilers.
-  # On the NeXT, cc -E runs the code through the compiler's parser,
-  # not just through cpp. "Syntax error" is here to catch this case.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#ifdef __STDC__
-# include <limits.h>
-#else
-# include <assert.h>
-#endif
-		     Syntax error
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
 
-else
-  # Broken: fails on valid input.
-continue
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
 
-  # OK, works on sane cases.  Now check whether nonexistent headers
-  # can be detected and how.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ac_nonexistent.h>
-_ACEOF
-if ac_fn_c_try_cpp "$LINENO"; then :
-  # Broken: success on invalid input.
-continue
-else
-  # Passes both tests.
-ac_preproc_ok=:
-break
-fi
-rm -f conftest.err conftest.i conftest.$ac_ext
 
-done
-# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
-rm -f conftest.i conftest.err conftest.$ac_ext
-if $ac_preproc_ok; then :
 
-else
-  { { $as_echo "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
-$as_echo "$as_me: error: in \`$ac_pwd':" >&2;}
-as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
-See \`config.log' for more details" "$LINENO" 5; }
-fi
 
-ac_ext=c
-ac_cpp='$CPP $CPPFLAGS'
-ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
-ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
-ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
+if test $ac_cv_header_stdlib_h = yes && test $ac_cv_header_string_h = yes
+then :
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
-$as_echo_n "checking for grep that handles long lines and -e... " >&6; }
-if ${ac_cv_path_GREP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+printf "%s\n" "#define STDC_HEADERS 1" >>confdefs.h
+
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for grep that handles long lines and -e" >&5
+printf %s "checking for grep that handles long lines and -e... " >&6; }
+if test ${ac_cv_path_GREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -z "$GREP"; then
   ac_path_GREP_found=false
   # Loop through the user's path and test for each of PROGNAME-LIST
@@ -3313,10 +3771,15 @@
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_prog in grep ggrep; do
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in grep ggrep
+   do
     for ac_exec_ext in '' $ac_executable_extensions; do
-      ac_path_GREP="$as_dir/$ac_prog$ac_exec_ext"
+      ac_path_GREP="$as_dir$ac_prog$ac_exec_ext"
       as_fn_executable_p "$ac_path_GREP" || continue
 # Check for GNU ac_path_GREP and select it if it is found.
   # Check for GNU $ac_path_GREP
@@ -3325,13 +3788,13 @@
   ac_cv_path_GREP="$ac_path_GREP" ac_path_GREP_found=:;;
 *)
   ac_count=0
-  $as_echo_n 0123456789 >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    $as_echo 'GREP' >> "conftest.nl"
+    printf "%s\n" 'GREP' >> "conftest.nl"
     "$ac_path_GREP" -e 'GREP$' -e '-(cannot match)-' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
     as_fn_arith $ac_count + 1 && ac_count=$as_val
@@ -3359,16 +3822,20 @@
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
-$as_echo "$ac_cv_path_GREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_GREP" >&5
+printf "%s\n" "$ac_cv_path_GREP" >&6; }
  GREP="$ac_cv_path_GREP"
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
-$as_echo_n "checking for egrep... " >&6; }
-if ${ac_cv_path_EGREP+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+# Autoupdate added the next two lines to ensure that your configure
+# script's behavior did not change.  They are probably safe to remove.
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for egrep" >&5
+printf %s "checking for egrep... " >&6; }
+if test ${ac_cv_path_EGREP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if echo a | $GREP -E '(a|b)' >/dev/null 2>&1
    then ac_cv_path_EGREP="$GREP -E"
    else
@@ -3379,10 +3846,15 @@
 for as_dir in $PATH$PATH_SEPARATOR/usr/xpg4/bin
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    for ac_prog in egrep; do
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    for ac_prog in egrep
+   do
     for ac_exec_ext in '' $ac_executable_extensions; do
-      ac_path_EGREP="$as_dir/$ac_prog$ac_exec_ext"
+      ac_path_EGREP="$as_dir$ac_prog$ac_exec_ext"
       as_fn_executable_p "$ac_path_EGREP" || continue
 # Check for GNU ac_path_EGREP and select it if it is found.
   # Check for GNU $ac_path_EGREP
@@ -3391,13 +3863,13 @@
   ac_cv_path_EGREP="$ac_path_EGREP" ac_path_EGREP_found=:;;
 *)
   ac_count=0
-  $as_echo_n 0123456789 >"conftest.in"
+  printf %s 0123456789 >"conftest.in"
   while :
   do
     cat "conftest.in" "conftest.in" >"conftest.tmp"
     mv "conftest.tmp" "conftest.in"
     cp "conftest.in" "conftest.nl"
-    $as_echo 'EGREP' >> "conftest.nl"
+    printf "%s\n" 'EGREP' >> "conftest.nl"
     "$ac_path_EGREP" 'EGREP$' < "conftest.nl" >"conftest.out" 2>/dev/null || break
     diff "conftest.out" "conftest.nl" >/dev/null 2>&1 || break
     as_fn_arith $ac_count + 1 && ac_count=$as_val
@@ -3426,258 +3898,258 @@
 
    fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
-$as_echo "$ac_cv_path_EGREP" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_path_EGREP" >&5
+printf "%s\n" "$ac_cv_path_EGREP" >&6; }
  EGREP="$ac_cv_path_EGREP"
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for ANSI C header files" >&5
-$as_echo_n "checking for ANSI C header files... " >&6; }
-if ${ac_cv_header_stdc+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
-#include <stdarg.h>
-#include <string.h>
-#include <float.h>
 
-int
-main ()
-{
+ac_fn_c_check_header_compile "$LINENO" "arpa/inet.h" "ac_cv_header_arpa_inet_h" "$ac_includes_default"
+if test "x$ac_cv_header_arpa_inet_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_ARPA_INET_H 1" >>confdefs.h
 
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
-  ac_cv_header_stdc=yes
-else
-  ac_cv_header_stdc=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
-
-if test $ac_cv_header_stdc = yes; then
-  # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <string.h>
+ac_fn_c_check_header_compile "$LINENO" "sys/utsname.h" "ac_cv_header_sys_utsname_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_utsname_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_SYS_UTSNAME_H 1" >>confdefs.h
 
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "memchr" >/dev/null 2>&1; then :
-
-else
-  ac_cv_header_stdc=no
 fi
-rm -f conftest*
+ac_fn_c_check_header_compile "$LINENO" "pwd.h" "ac_cv_header_pwd_h" "$ac_includes_default"
+if test "x$ac_cv_header_pwd_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_PWD_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "fcntl.h" "ac_cv_header_fcntl_h" "$ac_includes_default"
+if test "x$ac_cv_header_fcntl_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_FCNTL_H 1" >>confdefs.h
 
-if test $ac_cv_header_stdc = yes; then
-  # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <stdlib.h>
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "free" >/dev/null 2>&1; then :
-
-else
-  ac_cv_header_stdc=no
 fi
-rm -f conftest*
+ac_fn_c_check_header_compile "$LINENO" "limits.h" "ac_cv_header_limits_h" "$ac_includes_default"
+if test "x$ac_cv_header_limits_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_LIMITS_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "nlist.h" "ac_cv_header_nlist_h" "$ac_includes_default"
+if test "x$ac_cv_header_nlist_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_NLIST_H 1" >>confdefs.h
 
-if test $ac_cv_header_stdc = yes; then
-  # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
-  if test "$cross_compiling" = yes; then :
-  :
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#include <ctype.h>
-#include <stdlib.h>
-#if ((' ' & 0x0FF) == 0x020)
-# define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
-# define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
-#else
-# define ISLOWER(c) \
-		   (('a' <= (c) && (c) <= 'i') \
-		     || ('j' <= (c) && (c) <= 'r') \
-		     || ('s' <= (c) && (c) <= 'z'))
-# define TOUPPER(c) (ISLOWER(c) ? ((c) | 0x40) : (c))
-#endif
+fi
+ac_fn_c_check_header_compile "$LINENO" "stdlib.h" "ac_cv_header_stdlib_h" "$ac_includes_default"
+if test "x$ac_cv_header_stdlib_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STDLIB_H 1" >>confdefs.h
 
-#define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
-int
-main ()
-{
-  int i;
-  for (i = 0; i < 256; i++)
-    if (XOR (islower (i), ISLOWER (i))
-	|| toupper (i) != TOUPPER (i))
-      return 2;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+fi
+ac_fn_c_check_header_compile "$LINENO" "string.h" "ac_cv_header_string_h" "$ac_includes_default"
+if test "x$ac_cv_header_string_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRING_H 1" >>confdefs.h
 
-else
-  ac_cv_header_stdc=no
 fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
+ac_fn_c_check_header_compile "$LINENO" "sys/ioctl.h" "ac_cv_header_sys_ioctl_h" "$ac_includes_default"
+if test "x$ac_cv_header_sys_ioctl_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_SYS_IOCTL_H 1" >>confdefs.h
+
 fi
+ac_fn_c_check_header_compile "$LINENO" "termios.h" "ac_cv_header_termios_h" "$ac_includes_default"
+if test "x$ac_cv_header_termios_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_TERMIOS_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "unistd.h" "ac_cv_header_unistd_h" "$ac_includes_default"
+if test "x$ac_cv_header_unistd_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_UNISTD_H 1" >>confdefs.h
+
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdc" >&5
-$as_echo "$ac_cv_header_stdc" >&6; }
-if test $ac_cv_header_stdc = yes; then
+ac_fn_c_check_header_compile "$LINENO" "utmp.h" "ac_cv_header_utmp_h" "$ac_includes_default"
+if test "x$ac_cv_header_utmp_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_UTMP_H 1" >>confdefs.h
 
-$as_echo "#define STDC_HEADERS 1" >>confdefs.h
+fi
+ac_fn_c_check_header_compile "$LINENO" "term.h" "ac_cv_header_term_h" "$ac_includes_default"
+if test "x$ac_cv_header_term_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_TERM_H 1" >>confdefs.h
 
 fi
+ac_fn_c_check_header_compile "$LINENO" "ncurses/term.h" "ac_cv_header_ncurses_term_h" "$ac_includes_default"
+if test "x$ac_cv_header_ncurses_term_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_NCURSES_TERM_H 1" >>confdefs.h
 
-# On IRIX 5.3, sys/types and inttypes.h are conflicting.
-for ac_header in sys/types.h sys/stat.h stdlib.h string.h memory.h strings.h \
-		  inttypes.h stdint.h unistd.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_compile "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default
-"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+fi
+ac_fn_c_check_header_compile "$LINENO" "process.h" "ac_cv_header_process_h" "$ac_includes_default"
+if test "x$ac_cv_header_process_h" = xyes
+then :
+  printf "%s\n" "#define HAVE_PROCESS_H 1" >>confdefs.h
 
 fi
 
-done
 
+# Checks for typedefs, structures, and compiler characteristics.
+ac_fn_c_check_type "$LINENO" "_Bool" "ac_cv_type__Bool" "$ac_includes_default"
+if test "x$ac_cv_type__Bool" = xyes
+then :
 
-for ac_header in arpa/inet.h sys/utsname.h pwd.h fcntl.h limits.h nlist.h stdlib.h string.h sys/ioctl.h termios.h unistd.h utmp.h term.h ncurses/term.h process.h
-do :
-  as_ac_Header=`$as_echo "ac_cv_header_$ac_header" | $as_tr_sh`
-ac_fn_c_check_header_mongrel "$LINENO" "$ac_header" "$as_ac_Header" "$ac_includes_default"
-if eval test \"x\$"$as_ac_Header"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_header" | $as_tr_cpp` 1
-_ACEOF
+printf "%s\n" "#define HAVE__BOOL 1" >>confdefs.h
 
-fi
-
-done
 
+fi
 
-# Checks for typedefs, structures, and compiler characteristics.
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for stdbool.h that conforms to C99" >&5
-$as_echo_n "checking for stdbool.h that conforms to C99... " >&6; }
-if ${ac_cv_header_stdbool_h+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for stdbool.h that conforms to C99" >&5
+printf %s "checking for stdbool.h that conforms to C99... " >&6; }
+if test ${ac_cv_header_stdbool_h+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
+#include <stdbool.h>
 
-             #include <stdbool.h>
-             #ifndef bool
-              "error: bool is not defined"
-             #endif
-             #ifndef false
-              "error: false is not defined"
-             #endif
-             #if false
-              "error: false is not 0"
+             #ifndef __bool_true_false_are_defined
+               #error "__bool_true_false_are_defined is not defined"
              #endif
-             #ifndef true
-              "error: true is not defined"
+             char a[__bool_true_false_are_defined == 1 ? 1 : -1];
+
+             /* Regardless of whether this is C++ or "_Bool" is a
+                valid type name, "true" and "false" should be usable
+                in #if expressions and integer constant expressions,
+                and "bool" should be a valid type name.  */
+
+             #if !true
+               #error "'true' is not true"
              #endif
              #if true != 1
-              "error: true is not 1"
+               #error "'true' is not equal to 1"
              #endif
-             #ifndef __bool_true_false_are_defined
-              "error: __bool_true_false_are_defined is not defined"
+             char b[true == 1 ? 1 : -1];
+             char c[true];
+
+             #if false
+               #error "'false' is not false"
              #endif
+             #if false != 0
+               #error "'false' is not equal to 0"
+             #endif
+             char d[false == 0 ? 1 : -1];
+
+             enum { e = false, f = true, g = false * true, h = true * 256 };
 
-             struct s { _Bool s: 1; _Bool t; } s;
+             char i[(bool) 0.5 == true ? 1 : -1];
+             char j[(bool) 0.0 == false ? 1 : -1];
+             char k[sizeof (bool) > 0 ? 1 : -1];
+
+             struct sb { bool s: 1; bool t; } s;
+             char l[sizeof s.t > 0 ? 1 : -1];
 
-             char a[true == 1 ? 1 : -1];
-             char b[false == 0 ? 1 : -1];
-             char c[__bool_true_false_are_defined == 1 ? 1 : -1];
-             char d[(bool) 0.5 == true ? 1 : -1];
-             /* See body of main program for 'e'.  */
-             char f[(_Bool) 0.0 == false ? 1 : -1];
-             char g[true];
-             char h[sizeof (_Bool)];
-             char i[sizeof s.t];
-             enum { j = false, k = true, l = false * true, m = true * 256 };
              /* The following fails for
                 HP aC++/ANSI C B3910B A.05.55 [Dec 04 2003]. */
-             _Bool n[m];
-             char o[sizeof n == m * sizeof n[0] ? 1 : -1];
-             char p[-1 - (_Bool) 0 < 0 && -1 - (bool) 0 < 0 ? 1 : -1];
+             bool m[h];
+             char n[sizeof m == h * sizeof m[0] ? 1 : -1];
+             char o[-1 - (bool) 0 < 0 ? 1 : -1];
              /* Catch a bug in an HP-UX C compiler.  See
-                http://gcc.gnu.org/ml/gcc-patches/2003-12/msg02303.html
-                http://lists.gnu.org/archive/html/bug-coreutils/2005-11/msg00161.html
+         https://gcc.gnu.org/ml/gcc-patches/2003-12/msg02303.html
+         https://lists.gnu.org/archive/html/bug-coreutils/2005-11/msg00161.html
               */
-             _Bool q = true;
-             _Bool *pq = &q;
+             bool p = true;
+             bool *pp = &p;
+
+             /* C 1999 specifies that bool, true, and false are to be
+                macros, but C++ 2011 and later overrule this.  */
+             #if __cplusplus < 201103
+              #ifndef bool
+               #error "bool is not defined"
+              #endif
+              #ifndef false
+               #error "false is not defined"
+              #endif
+              #ifndef true
+               #error "true is not defined"
+              #endif
+             #endif
+
+             /* If _Bool is available, repeat with it all the tests
+                above that used bool.  */
+             #ifdef HAVE__BOOL
+               struct sB { _Bool s: 1; _Bool t; } t;
+
+               char q[(_Bool) 0.5 == true ? 1 : -1];
+               char r[(_Bool) 0.0 == false ? 1 : -1];
+               char u[sizeof (_Bool) > 0 ? 1 : -1];
+               char v[sizeof t.t > 0 ? 1 : -1];
+
+               _Bool w[h];
+               char x[sizeof m == h * sizeof m[0] ? 1 : -1];
+               char y[-1 - (_Bool) 0 < 0 ? 1 : -1];
+               _Bool z = true;
+               _Bool *pz = &p;
+             #endif
 
 int
-main ()
+main (void)
 {
 
-             bool e = &s;
-             *pq |= q;
-             *pq |= ! q;
-             /* Refer to every declared value, to avoid compiler optimizations.  */
-             return (!a + !b + !c + !d + !e + !f + !g + !h + !i + !!j + !k + !!l
-                     + !m + !n + !o + !p + !q + !pq);
+             bool ps = &s;
+             *pp |= p;
+             *pp |= ! p;
+
+             #ifdef HAVE__BOOL
+               _Bool pt = &t;
+               *pz |= z;
+               *pz |= ! z;
+             #endif
+
+             /* Refer to every declared value, so they cannot be
+                discarded as unused.  */
+             return (!a + !b + !c + !d + !e + !f + !g + !h + !i + !j + !k
+                     + !l + !m + !n + !o + !p + !pp + !ps
+             #ifdef HAVE__BOOL
+                     + !q + !r + !u + !v + !w + !x + !y + !z + !pt
+             #endif
+                    );
 
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_header_stdbool_h=yes
-else
+else $as_nop
   ac_cv_header_stdbool_h=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdbool_h" >&5
-$as_echo "$ac_cv_header_stdbool_h" >&6; }
-   ac_fn_c_check_type "$LINENO" "_Bool" "ac_cv_type__Bool" "$ac_includes_default"
-if test "x$ac_cv_type__Bool" = xyes; then :
-
-cat >>confdefs.h <<_ACEOF
-#define HAVE__BOOL 1
-_ACEOF
-
-
-fi
-
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_header_stdbool_h" >&5
+printf "%s\n" "$ac_cv_header_stdbool_h" >&6; }
 
 if test $ac_cv_header_stdbool_h = yes; then
 
-$as_echo "#define HAVE_STDBOOL_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_STDBOOL_H 1" >>confdefs.h
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
-$as_echo_n "checking for an ANSI C-conforming const... " >&6; }
-if ${ac_cv_c_const+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for an ANSI C-conforming const" >&5
+printf %s "checking for an ANSI C-conforming const... " >&6; }
+if test ${ac_cv_c_const+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
 #ifndef __cplusplus
@@ -3690,7 +4162,7 @@
   /* NEC SVR4.0.2 mips cc rejects this.  */
   struct point {int x, y;};
   static struct point const zero = {0,0};
-  /* AIX XL C 1.02.0.0 rejects this.
+  /* IBM XL C 1.02.0.0 rejects this.
      It does not let you subtract one const X* pointer from another in
      an arm of an if-expression whose if-part is not a constant
      expression */
@@ -3718,7 +4190,7 @@
     iptr p = 0;
     ++p;
   }
-  { /* AIX XL C 1.02.0.0 rejects this sort of thing, saying
+  { /* IBM XL C 1.02.0.0 rejects this sort of thing, saying
        "k.c", line 2.27: 1506-025 (S) Operand must be a modifiable lvalue. */
     struct s { int j; const int *ap[3]; } bx;
     struct s *b = &bx; b->j = 5;
@@ -3734,74 +4206,210 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_c_const=yes
-else
+else $as_nop
   ac_cv_c_const=no
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
-$as_echo "$ac_cv_c_const" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_c_const" >&5
+printf "%s\n" "$ac_cv_c_const" >&6; }
 if test $ac_cv_c_const = no; then
 
-$as_echo "#define const /**/" >>confdefs.h
+printf "%s\n" "#define const /**/" >>confdefs.h
+
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking how to run the C preprocessor" >&5
+printf %s "checking how to run the C preprocessor... " >&6; }
+# On Suns, sometimes $CPP names a directory.
+if test -n "$CPP" && test -d "$CPP"; then
+  CPP=
+fi
+if test -z "$CPP"; then
+  if test ${ac_cv_prog_CPP+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+      # Double quotes because $CC needs to be expanded
+    for CPP in "$CC -E" "$CC -E -traditional-cpp" cpp /lib/cpp
+    do
+      ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <limits.h>
+		     Syntax error
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+
+else $as_nop
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+  # Broken: success on invalid input.
+continue
+else $as_nop
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
 
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+  break
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
-$as_echo_n "checking for uid_t in sys/types.h... " >&6; }
-if ${ac_cv_type_uid_t+:} false; then :
-  $as_echo_n "(cached) " >&6
+    done
+    ac_cv_prog_CPP=$CPP
+
+fi
+  CPP=$ac_cv_prog_CPP
 else
+  ac_cv_prog_CPP=$CPP
+fi
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $CPP" >&5
+printf "%s\n" "$CPP" >&6; }
+ac_preproc_ok=false
+for ac_c_preproc_warn_flag in '' yes
+do
+  # Use a header file that comes with gcc, so configuring glibc
+  # with a fresh cross-compiler works.
+  # On the NeXT, cc -E runs the code through the compiler's parser,
+  # not just through cpp. "Syntax error" is here to catch this case.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <limits.h>
+		     Syntax error
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+
+else $as_nop
+  # Broken: fails on valid input.
+continue
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+  # OK, works on sane cases.  Now check whether nonexistent headers
+  # can be detected and how.
+  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
+#include <ac_nonexistent.h>
+_ACEOF
+if ac_fn_c_try_cpp "$LINENO"
+then :
+  # Broken: success on invalid input.
+continue
+else $as_nop
+  # Passes both tests.
+ac_preproc_ok=:
+break
+fi
+rm -f conftest.err conftest.i conftest.$ac_ext
+
+done
+# Because of `break', _AC_PREPROC_IFELSE's cleaning code was skipped.
+rm -f conftest.i conftest.err conftest.$ac_ext
+if $ac_preproc_ok
+then :
+
+else $as_nop
+  { { printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: in \`$ac_pwd':" >&5
+printf "%s\n" "$as_me: error: in \`$ac_pwd':" >&2;}
+as_fn_error $? "C preprocessor \"$CPP\" fails sanity check
+See \`config.log' for more details" "$LINENO" 5; }
+fi
+
+ac_ext=c
+ac_cpp='$CPP $CPPFLAGS'
+ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
+ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
+ac_compiler_gnu=$ac_cv_c_compiler_gnu
+
+
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for uid_t in sys/types.h" >&5
+printf %s "checking for uid_t in sys/types.h... " >&6; }
+if test ${ac_cv_type_uid_t+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "uid_t" >/dev/null 2>&1; then :
+  $EGREP "uid_t" >/dev/null 2>&1
+then :
   ac_cv_type_uid_t=yes
-else
+else $as_nop
   ac_cv_type_uid_t=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_uid_t" >&5
-$as_echo "$ac_cv_type_uid_t" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_uid_t" >&5
+printf "%s\n" "$ac_cv_type_uid_t" >&6; }
 if test $ac_cv_type_uid_t = no; then
 
-$as_echo "#define uid_t int" >>confdefs.h
+printf "%s\n" "#define uid_t int" >>confdefs.h
 
 
-$as_echo "#define gid_t int" >>confdefs.h
+printf "%s\n" "#define gid_t int" >>confdefs.h
 
 fi
 
 ac_fn_c_check_type "$LINENO" "size_t" "ac_cv_type_size_t" "$ac_includes_default"
-if test "x$ac_cv_type_size_t" = xyes; then :
+if test "x$ac_cv_type_size_t" = xyes
+then :
 
-else
+else $as_nop
 
-cat >>confdefs.h <<_ACEOF
-#define size_t unsigned int
-_ACEOF
+printf "%s\n" "#define size_t unsigned int" >>confdefs.h
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether struct tm is in sys/time.h or time.h" >&5
-$as_echo_n "checking whether struct tm is in sys/time.h or time.h... " >&6; }
-if ${ac_cv_struct_tm+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether struct tm is in sys/time.h or time.h" >&5
+printf %s "checking whether struct tm is in sys/time.h or time.h... " >&6; }
+if test ${ac_cv_struct_tm+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <time.h>
 
 int
-main ()
+main (void)
 {
 struct tm tm;
 				     int *p = &tm.tm_sec;
@@ -3810,24 +4418,26 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_struct_tm=time.h
-else
+else $as_nop
   ac_cv_struct_tm=sys/time.h
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_struct_tm" >&5
-$as_echo "$ac_cv_struct_tm" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_struct_tm" >&5
+printf "%s\n" "$ac_cv_struct_tm" >&6; }
 if test $ac_cv_struct_tm = sys/time.h; then
 
-$as_echo "#define TM_IN_SYS_TIME 1" >>confdefs.h
+printf "%s\n" "#define TM_IN_SYS_TIME 1" >>confdefs.h
 
 fi
 
 
 # Check whether --with-ncurses was given.
-if test "${with_ncurses+set}" = set; then :
+if test ${with_ncurses+y}
+then :
   withval=$with_ncurses;
 fi
 
@@ -3835,37 +4445,39 @@
    CURSES_LIB=""
    if test "$with_ncurses" != yes
    then
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working curses" >&5
-$as_echo_n "checking for working curses... " >&6; }
-if ${mp_cv_curses+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working curses" >&5
+printf %s "checking for working curses... " >&6; }
+if test ${mp_cv_curses+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   LIBS="$LIBS -lcurses"
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <curses.h>
 int
-main ()
+main (void)
 {
 chtype a; int b=A_STANDOUT, c=KEY_LEFT; initscr();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mp_cv_curses=yes
-else
+else $as_nop
   mp_cv_curses=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mp_cv_curses" >&5
-$as_echo "$mp_cv_curses" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mp_cv_curses" >&5
+printf "%s\n" "$mp_cv_curses" >&6; }
      if test "$mp_cv_curses" = yes
      then
 
-$as_echo "#define HAVE_CURSES_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CURSES_H 1" >>confdefs.h
 
        #AC_DEFINE(HAVE_CURSES_H)
        CURSES_LIB="-lcurses"
@@ -3873,148 +4485,156 @@
    fi
    if test ! "$CURSES_LIB"
    then
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working ncurses" >&5
-$as_echo_n "checking for working ncurses... " >&6; }
-if ${mp_cv_ncurses+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working ncurses" >&5
+printf %s "checking for working ncurses... " >&6; }
+if test ${mp_cv_ncurses+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   LIBS="$mp_save_LIBS -lncurses"
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <ncurses.h>
 int
-main ()
+main (void)
 {
 chtype a; int b=A_STANDOUT, c=KEY_LEFT; initscr();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mp_cv_ncurses=yes
-else
+else $as_nop
   mp_cv_ncurses=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mp_cv_ncurses" >&5
-$as_echo "$mp_cv_ncurses" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mp_cv_ncurses" >&5
+printf "%s\n" "$mp_cv_ncurses" >&6; }
      if test "$mp_cv_ncurses" = yes
      then
 
-$as_echo "#define HAVE_NCURSES_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_NCURSES_H 1" >>confdefs.h
 
        CURSES_LIB="-lncurses"
      fi
    fi
    if test ! "$CURSES_LIB"
    then
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working pdcurses" >&5
-$as_echo_n "checking for working pdcurses... " >&6; }
-if ${mp_cv_pdcurses+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working pdcurses" >&5
+printf %s "checking for working pdcurses... " >&6; }
+if test ${mp_cv_pdcurses+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   LIBS="$mp_save_LIBS -lpdcurses"
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <curses.h>
 int
-main ()
+main (void)
 {
 chtype a; int b=A_STANDOUT, c=KEY_LEFT; initscr();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mp_cv_pdcurses=yes
-else
+else $as_nop
   mp_cv_pdcurses=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mp_cv_pdcurses" >&5
-$as_echo "$mp_cv_pdcurses" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mp_cv_pdcurses" >&5
+printf "%s\n" "$mp_cv_pdcurses" >&6; }
      if test "$mp_cv_pdcurses" = yes
      then
 
-$as_echo "#define HAVE_CURSES_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CURSES_H 1" >>confdefs.h
 
        CURSES_LIB="-lpdcurses"
      fi
    fi
    if test ! "$CURSES_LIB"
    then
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working pdcur" >&5
-$as_echo_n "checking for working pdcur... " >&6; }
-if ${mp_cv_pdcur+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working pdcur" >&5
+printf %s "checking for working pdcur... " >&6; }
+if test ${mp_cv_pdcur+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   LIBS="$mp_save_LIBS -lpdcur"
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <curses.h>
 int
-main ()
+main (void)
 {
 chtype a; int b=A_STANDOUT, c=KEY_LEFT; initscr();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mp_cv_pdcur=yes
-else
+else $as_nop
   mp_cv_pdcur=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mp_cv_pdcur" >&5
-$as_echo "$mp_cv_pdcur" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mp_cv_pdcur" >&5
+printf "%s\n" "$mp_cv_pdcur" >&6; }
      if test "$mp_cv_pdcur" = yes
      then
 
-$as_echo "#define HAVE_CURSES_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CURSES_H 1" >>confdefs.h
 
        CURSES_LIB="-lpdcur"
      fi
    fi
    if test ! "$CURSES_LIB"
    then
-     { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working peer pdcurses" >&5
-$as_echo_n "checking for working peer pdcurses... " >&6; }
-if ${mp_cv_lpdcurses+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+     { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working peer pdcurses" >&5
+printf %s "checking for working peer pdcurses... " >&6; }
+if test ${mp_cv_lpdcurses+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   LIBS="$mp_save_LIBS ../pdcurses/pdcurses.a"
         cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include "../pdcurses/curses.h"
 int
-main ()
+main (void)
 {
 chtype a; int b=A_STANDOUT, c=KEY_LEFT; initscr();
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mp_cv_lpdcurses=yes
-else
+else $as_nop
   mp_cv_lpdcurses=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mp_cv_lpdcurses" >&5
-$as_echo "$mp_cv_lpdcurses" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mp_cv_lpdcurses" >&5
+printf "%s\n" "$mp_cv_lpdcurses" >&6; }
      if test "$mp_cv_lpdcurses" = yes
      then
 
-$as_echo "#define HAVE_CURSES_H 1" >>confdefs.h
+printf "%s\n" "#define HAVE_CURSES_H 1" >>confdefs.h
 
        CURSES_LIB="../pdcurses/pdcurses.a"
 
@@ -4040,16 +4660,17 @@
 
      fi
    fi
-   { $as_echo "$as_me:${as_lineno-$LINENO}: checking for ESCDELAY variable" >&5
-$as_echo_n "checking for ESCDELAY variable... " >&6; }
-if ${mc_cv_ncurses_escdelay+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+   { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for ESCDELAY variable" >&5
+printf %s "checking for ESCDELAY variable... " >&6; }
+if test ${mc_cv_ncurses_escdelay+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 
 int
-main ()
+main (void)
 {
 
 			extern int ESCDELAY;
@@ -4059,20 +4680,21 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_link "$LINENO"; then :
+if ac_fn_c_try_link "$LINENO"
+then :
   mc_cv_ncurses_escdelay=yes
-else
+else $as_nop
   mc_cv_ncurses_escdelay=no
 fi
-rm -f core conftest.err conftest.$ac_objext \
+rm -f core conftest.err conftest.$ac_objext conftest.beam \
     conftest$ac_exeext conftest.$ac_ext
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $mc_cv_ncurses_escdelay" >&5
-$as_echo "$mc_cv_ncurses_escdelay" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $mc_cv_ncurses_escdelay" >&5
+printf "%s\n" "$mc_cv_ncurses_escdelay" >&6; }
     if test "$mc_cv_ncurses_escdelay" = yes; then
 
-$as_echo "#define HAVE_ESCDELAY 1" >>confdefs.h
+printf "%s\n" "#define HAVE_ESCDELAY 1" >>confdefs.h
 
     fi
    if test ! "$CURSES_LIB" ; then
@@ -4080,55 +4702,76 @@
    fi
 
 # Checks for library functions.
-ac_fn_c_check_type "$LINENO" "pid_t" "ac_cv_type_pid_t" "$ac_includes_default"
-if test "x$ac_cv_type_pid_t" = xyes; then :
 
-else
+  ac_fn_c_check_type "$LINENO" "pid_t" "ac_cv_type_pid_t" "$ac_includes_default
+"
+if test "x$ac_cv_type_pid_t" = xyes
+then :
 
-cat >>confdefs.h <<_ACEOF
-#define pid_t int
-_ACEOF
+else $as_nop
+                                          cat confdefs.h - <<_ACEOF >conftest.$ac_ext
+/* end confdefs.h.  */
 
-fi
+          #if defined _WIN64 && !defined __CYGWIN__
+          LLP64
+          #endif
 
-for ac_header in vfork.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "vfork.h" "ac_cv_header_vfork_h" "$ac_includes_default"
-if test "x$ac_cv_header_vfork_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_VFORK_H 1
-_ACEOF
+int
+main (void)
+{
+
+  ;
+  return 0;
+}
 
+_ACEOF
+if ac_fn_c_try_compile "$LINENO"
+then :
+  ac_pid_type='int'
+else $as_nop
+  ac_pid_type='__int64'
 fi
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 
-done
+printf "%s\n" "#define pid_t $ac_pid_type" >>confdefs.h
 
-for ac_func in fork vfork
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
 
 fi
+
+
+
+ac_func=
+for ac_item in $ac_func_c_list
+do
+  if test $ac_func; then
+    ac_fn_c_check_func "$LINENO" $ac_func ac_cv_func_$ac_func
+    if eval test \"x\$ac_cv_func_$ac_func\" = xyes; then
+      echo "#define $ac_item 1" >> confdefs.h
+    fi
+    ac_func=
+  else
+    ac_func=$ac_item
+  fi
 done
 
+
+
 if test "x$ac_cv_func_fork" = xyes; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working fork" >&5
-$as_echo_n "checking for working fork... " >&6; }
-if ${ac_cv_func_fork_works+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working fork" >&5
+printf %s "checking for working fork... " >&6; }
+if test ${ac_cv_func_fork_works+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
   ac_cv_func_fork_works=cross
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
 int
-main ()
+main (void)
 {
 
 	  /* By Ruediger Kuhlmann. */
@@ -4138,9 +4781,10 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_fork_works=yes
-else
+else $as_nop
   ac_cv_func_fork_works=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4148,8 +4792,8 @@
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_fork_works" >&5
-$as_echo "$ac_cv_func_fork_works" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_fork_works" >&5
+printf "%s\n" "$ac_cv_func_fork_works" >&6; }
 
 else
   ac_cv_func_fork_works=$ac_cv_func_fork
@@ -4164,27 +4808,37 @@
       ac_cv_func_fork_works=yes
       ;;
   esac
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: result $ac_cv_func_fork_works guessed because of cross compilation" >&5
-$as_echo "$as_me: WARNING: result $ac_cv_func_fork_works guessed because of cross compilation" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: result $ac_cv_func_fork_works guessed because of cross compilation" >&5
+printf "%s\n" "$as_me: WARNING: result $ac_cv_func_fork_works guessed because of cross compilation" >&2;}
 fi
 ac_cv_func_vfork_works=$ac_cv_func_vfork
 if test "x$ac_cv_func_vfork" = xyes; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: checking for working vfork" >&5
-$as_echo_n "checking for working vfork... " >&6; }
-if ${ac_cv_func_vfork_works+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for working vfork" >&5
+printf %s "checking for working vfork... " >&6; }
+if test ${ac_cv_func_vfork_works+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
   ac_cv_func_vfork_works=cross
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 /* Thanks to Paul Eggert for this test.  */
 $ac_includes_default
+#include <signal.h>
 #include <sys/wait.h>
 #ifdef HAVE_VFORK_H
 # include <vfork.h>
 #endif
+
+static void
+do_nothing (int sig)
+{
+  (void) sig;
+}
+
 /* On some sparc systems, changes by the child to local and incoming
    argument registers are propagated back to the parent.  The compiler
    is told about this with #include <vfork.h>, but some compilers
@@ -4192,11 +4846,7 @@
    static variable whose address is put into a register that is
    clobbered by the vfork.  */
 static void
-#ifdef __cplusplus
 sparc_address_test (int arg)
-# else
-sparc_address_test (arg) int arg;
-#endif
 {
   static pid_t child;
   if (!child) {
@@ -4214,13 +4864,18 @@
 }
 
 int
-main ()
+main (void)
 {
   pid_t parent = getpid ();
   pid_t child;
 
   sparc_address_test (0);
 
+  /* On Solaris 2.4, changes by the child to the signal handler
+     also munge signal handlers in the parent.  To detect this,
+     start by putting the parent's handler in a known state.  */
+  signal (SIGTERM, SIG_DFL);
+
   child = vfork ();
 
   if (child == 0) {
@@ -4242,6 +4897,10 @@
 	|| p != p5 || p != p6 || p != p7)
       _exit(1);
 
+    /* Alter the child's signal handler.  */
+    if (signal (SIGTERM, do_nothing) != SIG_DFL)
+      _exit(1);
+
     /* On some systems (e.g. IRIX 3.3), vfork doesn't separate parent
        from child file descriptors.  If the child closes a descriptor
        before it execs or exits, this munges the parent's descriptor
@@ -4257,6 +4916,9 @@
 	 /* Was there some problem with vforking?  */
 	 child < 0
 
+	 /* Did the child munge the parent's signal handler?  */
+	 || signal (SIGTERM, SIG_DFL) != SIG_DFL
+
 	 /* Did the child fail?  (This shouldn't happen.)  */
 	 || status
 
@@ -4269,9 +4931,10 @@
   }
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_vfork_works=yes
-else
+else $as_nop
   ac_cv_func_vfork_works=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4279,37 +4942,38 @@
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_vfork_works" >&5
-$as_echo "$ac_cv_func_vfork_works" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_vfork_works" >&5
+printf "%s\n" "$ac_cv_func_vfork_works" >&6; }
 
 fi;
 if test "x$ac_cv_func_fork_works" = xcross; then
   ac_cv_func_vfork_works=$ac_cv_func_vfork
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: result $ac_cv_func_vfork_works guessed because of cross compilation" >&5
-$as_echo "$as_me: WARNING: result $ac_cv_func_vfork_works guessed because of cross compilation" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: result $ac_cv_func_vfork_works guessed because of cross compilation" >&5
+printf "%s\n" "$as_me: WARNING: result $ac_cv_func_vfork_works guessed because of cross compilation" >&2;}
 fi
 
 if test "x$ac_cv_func_vfork_works" = xyes; then
 
-$as_echo "#define HAVE_WORKING_VFORK 1" >>confdefs.h
+printf "%s\n" "#define HAVE_WORKING_VFORK 1" >>confdefs.h
 
 else
 
-$as_echo "#define vfork fork" >>confdefs.h
+printf "%s\n" "#define vfork fork" >>confdefs.h
 
 fi
 if test "x$ac_cv_func_fork_works" = xyes; then
 
-$as_echo "#define HAVE_WORKING_FORK 1" >>confdefs.h
+printf "%s\n" "#define HAVE_WORKING_FORK 1" >>confdefs.h
 
 fi
 
 if test $ac_cv_c_compiler_gnu = yes; then
-    { $as_echo "$as_me:${as_lineno-$LINENO}: checking whether $CC needs -traditional" >&5
-$as_echo_n "checking whether $CC needs -traditional... " >&6; }
-if ${ac_cv_prog_gcc_traditional+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether $CC needs -traditional" >&5
+printf %s "checking whether $CC needs -traditional... " >&6; }
+if test ${ac_cv_prog_gcc_traditional+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
     ac_pattern="Autoconf.*'x'"
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
@@ -4317,12 +4981,13 @@
 Autoconf TIOCGETP
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "$ac_pattern" >/dev/null 2>&1; then :
+  $EGREP "$ac_pattern" >/dev/null 2>&1
+then :
   ac_cv_prog_gcc_traditional=yes
-else
+else $as_nop
   ac_cv_prog_gcc_traditional=no
 fi
-rm -f conftest*
+rm -rf conftest*
 
 
   if test $ac_cv_prog_gcc_traditional = no; then
@@ -4332,36 +4997,44 @@
 Autoconf TCGETA
 _ACEOF
 if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "$ac_pattern" >/dev/null 2>&1; then :
+  $EGREP "$ac_pattern" >/dev/null 2>&1
+then :
   ac_cv_prog_gcc_traditional=yes
 fi
-rm -f conftest*
+rm -rf conftest*
 
   fi
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_gcc_traditional" >&5
-$as_echo "$ac_cv_prog_gcc_traditional" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_prog_gcc_traditional" >&5
+printf "%s\n" "$ac_cv_prog_gcc_traditional" >&6; }
   if test $ac_cv_prog_gcc_traditional = yes; then
     CC="$CC -traditional"
   fi
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether lstat correctly handles trailing slash" >&5
-$as_echo_n "checking whether lstat correctly handles trailing slash... " >&6; }
-if ${ac_cv_func_lstat_dereferences_slashed_symlink+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether lstat correctly handles trailing slash" >&5
+printf %s "checking whether lstat correctly handles trailing slash... " >&6; }
+if test ${ac_cv_func_lstat_dereferences_slashed_symlink+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   rm -f conftest.sym conftest.file
 echo >conftest.file
 if test "$as_ln_s" = "ln -s" && ln -s conftest.file conftest.sym; then
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_lstat_dereferences_slashed_symlink=no
-else
+  if test "$cross_compiling" = yes
+then :
+  case "$host_os" in # ((
+			   # Guess yes on glibc systems.
+		   *-gnu*) ac_cv_func_lstat_dereferences_slashed_symlink=yes ;;
+			   # If we don't know, assume the worst.
+		   *)      ac_cv_func_lstat_dereferences_slashed_symlink=no ;;
+		 esac
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
 int
-main ()
+main (void)
 {
 struct stat sbuf;
      /* Linux will dereference the symlink and fail, as required by POSIX.
@@ -4372,9 +5045,10 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_lstat_dereferences_slashed_symlink=yes
-else
+else $as_nop
   ac_cv_func_lstat_dereferences_slashed_symlink=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4389,14 +5063,12 @@
 rm -f conftest.sym conftest.file
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_dereferences_slashed_symlink" >&5
-$as_echo "$ac_cv_func_lstat_dereferences_slashed_symlink" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_dereferences_slashed_symlink" >&5
+printf "%s\n" "$ac_cv_func_lstat_dereferences_slashed_symlink" >&6; }
 
 test $ac_cv_func_lstat_dereferences_slashed_symlink = yes &&
 
-cat >>confdefs.h <<_ACEOF
-#define LSTAT_FOLLOWS_SLASHED_SYMLINK 1
-_ACEOF
+printf "%s\n" "#define LSTAT_FOLLOWS_SLASHED_SYMLINK 1" >>confdefs.h
 
 
 if test "x$ac_cv_func_lstat_dereferences_slashed_symlink" = xno; then
@@ -4408,19 +5080,21 @@
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether lstat accepts an empty string" >&5
-$as_echo_n "checking whether lstat accepts an empty string... " >&6; }
-if ${ac_cv_func_lstat_empty_string_bug+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether lstat accepts an empty string" >&5
+printf %s "checking whether lstat accepts an empty string... " >&6; }
+if test ${ac_cv_func_lstat_empty_string_bug+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
   ac_cv_func_lstat_empty_string_bug=yes
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
 int
-main ()
+main (void)
 {
 struct stat sbuf;
   return lstat ("", &sbuf) == 0;
@@ -4428,9 +5102,10 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_lstat_empty_string_bug=no
-else
+else $as_nop
   ac_cv_func_lstat_empty_string_bug=yes
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4438,8 +5113,8 @@
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_empty_string_bug" >&5
-$as_echo "$ac_cv_func_lstat_empty_string_bug" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_empty_string_bug" >&5
+printf "%s\n" "$ac_cv_func_lstat_empty_string_bug" >&6; }
 if test $ac_cv_func_lstat_empty_string_bug = yes; then
   case " $LIBOBJS " in
   *" lstat.$ac_objext "* ) ;;
@@ -4448,28 +5123,33 @@
 esac
 
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_LSTAT_EMPTY_STRING_BUG 1
-_ACEOF
+printf "%s\n" "#define HAVE_LSTAT_EMPTY_STRING_BUG 1" >>confdefs.h
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether lstat correctly handles trailing slash" >&5
-$as_echo_n "checking whether lstat correctly handles trailing slash... " >&6; }
-if ${ac_cv_func_lstat_dereferences_slashed_symlink+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether lstat correctly handles trailing slash" >&5
+printf %s "checking whether lstat correctly handles trailing slash... " >&6; }
+if test ${ac_cv_func_lstat_dereferences_slashed_symlink+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   rm -f conftest.sym conftest.file
 echo >conftest.file
 if test "$as_ln_s" = "ln -s" && ln -s conftest.file conftest.sym; then
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_lstat_dereferences_slashed_symlink=no
-else
+  if test "$cross_compiling" = yes
+then :
+  case "$host_os" in # ((
+			   # Guess yes on glibc systems.
+		   *-gnu*) ac_cv_func_lstat_dereferences_slashed_symlink=yes ;;
+			   # If we don't know, assume the worst.
+		   *)      ac_cv_func_lstat_dereferences_slashed_symlink=no ;;
+		 esac
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
 int
-main ()
+main (void)
 {
 struct stat sbuf;
      /* Linux will dereference the symlink and fail, as required by POSIX.
@@ -4480,9 +5160,10 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_lstat_dereferences_slashed_symlink=yes
-else
+else $as_nop
   ac_cv_func_lstat_dereferences_slashed_symlink=no
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4497,14 +5178,12 @@
 rm -f conftest.sym conftest.file
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_dereferences_slashed_symlink" >&5
-$as_echo "$ac_cv_func_lstat_dereferences_slashed_symlink" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_lstat_dereferences_slashed_symlink" >&5
+printf "%s\n" "$ac_cv_func_lstat_dereferences_slashed_symlink" >&6; }
 
 test $ac_cv_func_lstat_dereferences_slashed_symlink = yes &&
 
-cat >>confdefs.h <<_ACEOF
-#define LSTAT_FOLLOWS_SLASHED_SYMLINK 1
-_ACEOF
+printf "%s\n" "#define LSTAT_FOLLOWS_SLASHED_SYMLINK 1" >>confdefs.h
 
 
 if test "x$ac_cv_func_lstat_dereferences_slashed_symlink" = xno; then
@@ -4516,52 +5195,54 @@
 
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
-$as_echo_n "checking return type of signal handlers... " >&6; }
-if ${ac_cv_type_signal+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking return type of signal handlers" >&5
+printf %s "checking return type of signal handlers... " >&6; }
+if test ${ac_cv_type_signal+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 #include <sys/types.h>
 #include <signal.h>
 
 int
-main ()
+main (void)
 {
 return *(signal (0, 0)) (0) == 1;
   ;
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_compile "$LINENO"; then :
+if ac_fn_c_try_compile "$LINENO"
+then :
   ac_cv_type_signal=int
-else
+else $as_nop
   ac_cv_type_signal=void
 fi
-rm -f core conftest.err conftest.$ac_objext conftest.$ac_ext
+rm -f core conftest.err conftest.$ac_objext conftest.beam conftest.$ac_ext
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_signal" >&5
-$as_echo "$ac_cv_type_signal" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_type_signal" >&5
+printf "%s\n" "$ac_cv_type_signal" >&6; }
 
-cat >>confdefs.h <<_ACEOF
-#define RETSIGTYPE $ac_cv_type_signal
-_ACEOF
+printf "%s\n" "#define RETSIGTYPE $ac_cv_type_signal" >>confdefs.h
 
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether stat accepts an empty string" >&5
-$as_echo_n "checking whether stat accepts an empty string... " >&6; }
-if ${ac_cv_func_stat_empty_string_bug+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether stat accepts an empty string" >&5
+printf %s "checking whether stat accepts an empty string... " >&6; }
+if test ${ac_cv_func_stat_empty_string_bug+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
+  if test "$cross_compiling" = yes
+then :
   ac_cv_func_stat_empty_string_bug=yes
-else
+else $as_nop
   cat confdefs.h - <<_ACEOF >conftest.$ac_ext
 /* end confdefs.h.  */
 $ac_includes_default
 int
-main ()
+main (void)
 {
 struct stat sbuf;
   return stat ("", &sbuf) == 0;
@@ -4569,9 +5250,10 @@
   return 0;
 }
 _ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
+if ac_fn_c_try_run "$LINENO"
+then :
   ac_cv_func_stat_empty_string_bug=no
-else
+else $as_nop
   ac_cv_func_stat_empty_string_bug=yes
 fi
 rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
@@ -4579,8 +5261,8 @@
 fi
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_stat_empty_string_bug" >&5
-$as_echo "$ac_cv_func_stat_empty_string_bug" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_stat_empty_string_bug" >&5
+printf "%s\n" "$ac_cv_func_stat_empty_string_bug" >&6; }
 if test $ac_cv_func_stat_empty_string_bug = yes; then
   case " $LIBOBJS " in
   *" stat.$ac_objext "* ) ;;
@@ -4589,51 +5271,165 @@
 esac
 
 
-cat >>confdefs.h <<_ACEOF
-#define HAVE_STAT_EMPTY_STRING_BUG 1
-_ACEOF
+printf "%s\n" "#define HAVE_STAT_EMPTY_STRING_BUG 1" >>confdefs.h
 
 fi
 
-for ac_func in vprintf
-do :
-  ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
-if test "x$ac_cv_func_vprintf" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_VPRINTF 1
-_ACEOF
 
-ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
-if test "x$ac_cv_func__doprnt" = xyes; then :
 
-$as_echo "#define HAVE_DOPRNT 1" >>confdefs.h
+if test "x$ac_cv_func_vprintf" = xno
+then :
+  ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
+if test "x$ac_cv_func__doprnt" = xyes
+then :
+
+printf "%s\n" "#define HAVE_DOPRNT 1" >>confdefs.h
 
 fi
 
 fi
-done
+ac_fn_c_check_func "$LINENO" "erasechar" "ac_cv_func_erasechar"
+if test "x$ac_cv_func_erasechar" = xyes
+then :
+  printf "%s\n" "#define HAVE_ERASECHAR 1" >>confdefs.h
 
+fi
+ac_fn_c_check_func "$LINENO" "killchar" "ac_cv_func_killchar"
+if test "x$ac_cv_func_killchar" = xyes
+then :
+  printf "%s\n" "#define HAVE_KILLCHAR 1" >>confdefs.h
 
-for ac_func in erasechar killchar alarm getpass memset setenv strchr nlist _spawnl spawnl getpwuid loadav getloadavg strerror setresgid setregid setgid setresuid setreuid setuid getuid getgid
-do :
-  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
-ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
-if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
-  cat >>confdefs.h <<_ACEOF
-#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
-_ACEOF
+fi
+ac_fn_c_check_func "$LINENO" "alarm" "ac_cv_func_alarm"
+if test "x$ac_cv_func_alarm" = xyes
+then :
+  printf "%s\n" "#define HAVE_ALARM 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getpass" "ac_cv_func_getpass"
+if test "x$ac_cv_func_getpass" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETPASS 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "memset" "ac_cv_func_memset"
+if test "x$ac_cv_func_memset" = xyes
+then :
+  printf "%s\n" "#define HAVE_MEMSET 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setenv" "ac_cv_func_setenv"
+if test "x$ac_cv_func_setenv" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETENV 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "strchr" "ac_cv_func_strchr"
+if test "x$ac_cv_func_strchr" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRCHR 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "nlist" "ac_cv_func_nlist"
+if test "x$ac_cv_func_nlist" = xyes
+then :
+  printf "%s\n" "#define HAVE_NLIST 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "_spawnl" "ac_cv_func__spawnl"
+if test "x$ac_cv_func__spawnl" = xyes
+then :
+  printf "%s\n" "#define HAVE__SPAWNL 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "spawnl" "ac_cv_func_spawnl"
+if test "x$ac_cv_func_spawnl" = xyes
+then :
+  printf "%s\n" "#define HAVE_SPAWNL 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getpwuid" "ac_cv_func_getpwuid"
+if test "x$ac_cv_func_getpwuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETPWUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "loadav" "ac_cv_func_loadav"
+if test "x$ac_cv_func_loadav" = xyes
+then :
+  printf "%s\n" "#define HAVE_LOADAV 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getloadavg" "ac_cv_func_getloadavg"
+if test "x$ac_cv_func_getloadavg" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETLOADAVG 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "strerror" "ac_cv_func_strerror"
+if test "x$ac_cv_func_strerror" = xyes
+then :
+  printf "%s\n" "#define HAVE_STRERROR 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setresgid" "ac_cv_func_setresgid"
+if test "x$ac_cv_func_setresgid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETRESGID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setregid" "ac_cv_func_setregid"
+if test "x$ac_cv_func_setregid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETREGID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setgid" "ac_cv_func_setgid"
+if test "x$ac_cv_func_setgid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETGID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setresuid" "ac_cv_func_setresuid"
+if test "x$ac_cv_func_setresuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETRESUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setreuid" "ac_cv_func_setreuid"
+if test "x$ac_cv_func_setreuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETREUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "setuid" "ac_cv_func_setuid"
+if test "x$ac_cv_func_setuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_SETUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getuid" "ac_cv_func_getuid"
+if test "x$ac_cv_func_getuid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETUID 1" >>confdefs.h
+
+fi
+ac_fn_c_check_func "$LINENO" "getgid" "ac_cv_func_getgid"
+if test "x$ac_cv_func_getgid" = xyes
+then :
+  printf "%s\n" "#define HAVE_GETGID 1" >>confdefs.h
 
 fi
-done
 
 
 # Extract the first word of "nroff", so it can be a program name with args.
 set dummy nroff; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_NROFF+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_NROFF+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$NROFF"; then
   ac_cv_prog_NROFF="$NROFF" # Let the user override the test.
 else
@@ -4641,11 +5437,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_NROFF="nroff"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -4656,21 +5456,22 @@
 fi
 NROFF=$ac_cv_prog_NROFF
 if test -n "$NROFF"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $NROFF" >&5
-$as_echo "$NROFF" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $NROFF" >&5
+printf "%s\n" "$NROFF" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 # Extract the first word of "groff", so it can be a program name with args.
 set dummy groff; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_GROFF+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_GROFF+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$GROFF"; then
   ac_cv_prog_GROFF="$GROFF" # Let the user override the test.
 else
@@ -4678,11 +5479,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_GROFF="groff"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -4693,21 +5498,22 @@
 fi
 GROFF=$ac_cv_prog_GROFF
 if test -n "$GROFF"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $GROFF" >&5
-$as_echo "$GROFF" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $GROFF" >&5
+printf "%s\n" "$GROFF" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 # Extract the first word of "colcrt", so it can be a program name with args.
 set dummy colcrt; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_COLCRT+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_COLCRT+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$COLCRT"; then
   ac_cv_prog_COLCRT="$COLCRT" # Let the user override the test.
 else
@@ -4715,11 +5521,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_COLCRT="colcrt"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -4730,21 +5540,22 @@
 fi
 COLCRT=$ac_cv_prog_COLCRT
 if test -n "$COLCRT"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $COLCRT" >&5
-$as_echo "$COLCRT" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $COLCRT" >&5
+printf "%s\n" "$COLCRT" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 # Extract the first word of "tbl", so it can be a program name with args.
 set dummy tbl; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_TBL+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_TBL+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$TBL"; then
   ac_cv_prog_TBL="$TBL" # Let the user override the test.
 else
@@ -4752,11 +5563,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_TBL="tbl"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -4767,21 +5582,22 @@
 fi
 TBL=$ac_cv_prog_TBL
 if test -n "$TBL"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $TBL" >&5
-$as_echo "$TBL" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $TBL" >&5
+printf "%s\n" "$TBL" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 # Extract the first word of "sed", so it can be a program name with args.
 set dummy sed; ac_word=$2
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
-$as_echo_n "checking for $ac_word... " >&6; }
-if ${ac_cv_prog_SED+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for $ac_word" >&5
+printf %s "checking for $ac_word... " >&6; }
+if test ${ac_cv_prog_SED+y}
+then :
+  printf %s "(cached) " >&6
+else $as_nop
   if test -n "$SED"; then
   ac_cv_prog_SED="$SED" # Let the user override the test.
 else
@@ -4789,11 +5605,15 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
     for ac_exec_ext in '' $ac_executable_extensions; do
-  if as_fn_executable_p "$as_dir/$ac_word$ac_exec_ext"; then
+  if as_fn_executable_p "$as_dir$ac_word$ac_exec_ext"; then
     ac_cv_prog_SED="sed"
-    $as_echo "$as_me:${as_lineno-$LINENO}: found $as_dir/$ac_word$ac_exec_ext" >&5
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: found $as_dir$ac_word$ac_exec_ext" >&5
     break 2
   fi
 done
@@ -4804,11 +5624,11 @@
 fi
 SED=$ac_cv_prog_SED
 if test -n "$SED"; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: $SED" >&5
-$as_echo "$SED" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SED" >&5
+printf "%s\n" "$SED" >&6; }
 else
-  { $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
@@ -4833,9 +5653,10 @@
 
 
 # Check whether --with-program-name was given.
-if test "${with_program_name+set}" = set; then :
+if test ${with_program_name+y}
+then :
   withval=$with_program_name; progname="$withval"
-else
+else $as_nop
   progname="rogue5"
 fi
 
@@ -4843,12 +5664,13 @@
 
 
 # Check whether --enable-setgid was given.
-if test "${enable_setgid+set}" = set; then :
+if test ${enable_setgid+y}
+then :
   enableval=$enable_setgid;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if using setgid execute bit" >&5
-$as_echo_n "checking if using setgid execute bit... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if using setgid execute bit" >&5
+printf %s "checking if using setgid execute bit... " >&6; }
 if test "x$enable_setgid" = "xno" ; then
 GROUPOWNER=
 elif test "x$enable_setgid" = "xyes" ; then
@@ -4861,26 +5683,25 @@
 
 if test "x$GROUPOWNER" != "x" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define GROUPOWNER $GROUPOWNER
-_ACEOF
+printf "%s\n" "#define GROUPOWNER $GROUPOWNER" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $GROUPOWNER" >&5
-$as_echo "$GROUPOWNER" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $GROUPOWNER" >&5
+printf "%s\n" "$GROUPOWNER" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 
 
 # Check whether --enable-scorefile was given.
-if test "${enable_scorefile+set}" = set; then :
+if test ${enable_scorefile+y}
+then :
   enableval=$enable_scorefile;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for scoreboard file" >&5
-$as_echo_n "checking for scoreboard file... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for scoreboard file" >&5
+printf %s "checking for scoreboard file... " >&6; }
 if test "x$enable_scorefile" = "xno" ; then
 SCOREFILE=
 elif test "x$enable_scorefile" = "xyes" ;  then
@@ -4893,26 +5714,25 @@
 
 if test "x$SCOREFILE" != "x" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define SCOREFILE "$SCOREFILE"
-_ACEOF
+printf "%s\n" "#define SCOREFILE \"$SCOREFILE\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $SCOREFILE" >&5
-$as_echo "$SCOREFILE" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SCOREFILE" >&5
+printf "%s\n" "$SCOREFILE" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
-$as_echo "disabled" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
+printf "%s\n" "disabled" >&6; }
 fi
 
 
 
 # Check whether --enable-logfile was given.
-if test "${enable_logfile+set}" = set; then :
+if test ${enable_logfile+y}
+then :
   enableval=$enable_logfile;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for log file" >&5
-$as_echo_n "checking for log file... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for log file" >&5
+printf %s "checking for log file... " >&6; }
 if test "x$enable_logfile" = "xno" ; then
 LOGFILE=
 elif test "x$enable_logfile" = "xyes" ;  then
@@ -4925,26 +5745,25 @@
 
 if test "x$LOGFILE" != "x" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define LOGFILE "$LOGFILE"
-_ACEOF
+printf "%s\n" "#define LOGFILE \"$LOGFILE\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $LOGFILE" >&5
-$as_echo "$LOGFILE" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LOGFILE" >&5
+printf "%s\n" "$LOGFILE" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
-$as_echo "disabled" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
+printf "%s\n" "disabled" >&6; }
 fi
 
 
 
 # Check whether --enable-lockfile was given.
-if test "${enable_lockfile+set}" = set; then :
+if test ${enable_lockfile+y}
+then :
   enableval=$enable_lockfile;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for scoreboard lockfile file" >&5
-$as_echo_n "checking for scoreboard lockfile file... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for scoreboard lockfile file" >&5
+printf %s "checking for scoreboard lockfile file... " >&6; }
 if test "x$enable_lockfile" = "xno" ; then
 LOCKFILE=
 elif test "x$enable_lockfile" = "xyes" ; then
@@ -4957,28 +5776,27 @@
 
 if test "x$LOCKFILE" != "x" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define LOCKFILE "$LOCKFILE"
-_ACEOF
+printf "%s\n" "#define LOCKFILE \"$LOCKFILE\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $LOCKFILE" >&5
-$as_echo "$LOCKFILE" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $LOCKFILE" >&5
+printf "%s\n" "$LOCKFILE" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
-$as_echo "disabled" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
+printf "%s\n" "disabled" >&6; }
 fi
 
 
 
 # Check whether --enable-savedir was given.
-if test "${enable_savedir+set}" = set; then :
+if test ${enable_savedir+y}
+then :
   enableval=$enable_savedir;
-else
+else $as_nop
   enable_savedir="no"
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for save directory" >&5
-$as_echo_n "checking for save directory... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking for save directory" >&5
+printf %s "checking for save directory... " >&6; }
 if test "x$enable_savedir" = "xno" ; then
 SAVEDIR=
 elif test "x$enable_savedir" = "xyes" -o "x$enable_savedir" = "x"; then
@@ -4993,281 +5811,274 @@
 
 if test "x$SAVEDIR" != "x" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define SAVEDIR "$SAVEDIR"
-_ACEOF
+printf "%s\n" "#define SAVEDIR \"$SAVEDIR\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $SAVEDIR" >&5
-$as_echo "$SAVEDIR" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $SAVEDIR" >&5
+printf "%s\n" "$SAVEDIR" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
-$as_echo "disabled" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: disabled" >&5
+printf "%s\n" "disabled" >&6; }
 fi
 
 
 
 # Check whether --enable-wizardmode was given.
-if test "${enable_wizardmode+set}" = set; then :
+if test ${enable_wizardmode+y}
+then :
   enableval=$enable_wizardmode;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if wizard mode is enabled" >&5
-$as_echo_n "checking if wizard mode is enabled... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if wizard mode is enabled" >&5
+printf %s "checking if wizard mode is enabled... " >&6; }
 if test "x$enable_wizardmode" = "xno" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 elif test "x$enable_wizardmode" = "x" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 else
 
-$as_echo "#define MASTER /**/" >>confdefs.h
+printf "%s\n" "#define MASTER /**/" >>confdefs.h
 
 if test "x$enable_wizardmode" != "xyes" ; then
 
-cat >>confdefs.h <<_ACEOF
-#define PASSWD "$enable_wizardmode"
-_ACEOF
+printf "%s\n" "#define PASSWD \"$enable_wizardmode\"" >>confdefs.h
 
 fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 fi
 
 # Check whether --enable-allscores was given.
-if test "${enable_allscores+set}" = set; then :
+if test ${enable_allscores+y}
+then :
   enableval=$enable_allscores;
-else
+else $as_nop
   enable_allscores=yes
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if allscores is enabled" >&5
-$as_echo_n "checking if allscores is enabled... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if allscores is enabled" >&5
+printf %s "checking if allscores is enabled... " >&6; }
 if test "x$enable_allscores" = "xyes" ; then
 
-$as_echo "#define ALLSCORES 1" >>confdefs.h
+printf "%s\n" "#define ALLSCORES 1" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 # Check whether --enable-checktime was given.
-if test "${enable_checktime+set}" = set; then :
+if test ${enable_checktime+y}
+then :
   enableval=$enable_checktime;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking if checktime is enabled" >&5
-$as_echo_n "checking if checktime is enabled... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking if checktime is enabled" >&5
+printf %s "checking if checktime is enabled... " >&6; }
 if test "x$enable_checktime" = "xyes" ; then
 
-$as_echo "#define CHECKTIME 1" >>confdefs.h
+printf "%s\n" "#define CHECKTIME 1" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: yes" >&5
-$as_echo "yes" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: yes" >&5
+printf "%s\n" "yes" >&6; }
 else
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 fi
 
 # Check whether --enable-maxload was given.
-if test "${enable_maxload+set}" = set; then :
+if test ${enable_maxload+y}
+then :
   enableval=$enable_maxload;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking runtime execution limit (maximum system load average)" >&5
-$as_echo_n "checking runtime execution limit (maximum system load average)... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking runtime execution limit (maximum system load average)" >&5
+printf %s "checking runtime execution limit (maximum system load average)... " >&6; }
 if test "x$enable_maxload" = "xyes" ; then
 
-$as_echo "#define MAXLOAD 100" >>confdefs.h
+printf "%s\n" "#define MAXLOAD 100" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 100" >&5
-$as_echo "100" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: 100" >&5
+printf "%s\n" "100" >&6; }
 elif test "x$enable_maxload" = "x" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
-$as_echo "unlimited" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
+printf "%s\n" "unlimited" >&6; }
 elif test "x$enable_maxload" = "xno" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
-$as_echo "unlimited" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
+printf "%s\n" "unlimited" >&6; }
 else
 
-cat >>confdefs.h <<_ACEOF
-#define MAXLOAD $enable_maxload
-_ACEOF
+printf "%s\n" "#define MAXLOAD $enable_maxload" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_maxload" >&5
-$as_echo "$enable_maxload" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_maxload" >&5
+printf "%s\n" "$enable_maxload" >&6; }
 fi
 
 # Check whether --enable-maxusers was given.
-if test "${enable_maxusers+set}" = set; then :
+if test ${enable_maxusers+y}
+then :
   enableval=$enable_maxusers;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking runtime execution limit (maximum online system users)" >&5
-$as_echo_n "checking runtime execution limit (maximum online system users)... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking runtime execution limit (maximum online system users)" >&5
+printf %s "checking runtime execution limit (maximum online system users)... " >&6; }
 if test "x$enable_maxusers" = "xyes" ; then
 
-$as_echo "#define MAXUSERS 100" >>confdefs.h
+printf "%s\n" "#define MAXUSERS 100" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 100" >&5
-$as_echo "100" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: 100" >&5
+printf "%s\n" "100" >&6; }
 elif test "x$enable_maxusers" = "x" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
-$as_echo "unlimited" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
+printf "%s\n" "unlimited" >&6; }
 elif test "x$enable_maxload" = "xno" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
-$as_echo "unlimited" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: unlimited" >&5
+printf "%s\n" "unlimited" >&6; }
 else
 
-cat >>confdefs.h <<_ACEOF
-#define MAXLOAD $enable_maxusers
-_ACEOF
+printf "%s\n" "#define MAXLOAD $enable_maxusers" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_maxusers" >&5
-$as_echo "$enable_maxusers" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_maxusers" >&5
+printf "%s\n" "$enable_maxusers" >&6; }
 fi
 
 # Check whether --enable-numscores was given.
-if test "${enable_numscores+set}" = set; then :
+if test ${enable_numscores+y}
+then :
   enableval=$enable_numscores;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking what the number of scores to store in scoreboard is" >&5
-$as_echo_n "checking what the number of scores to store in scoreboard is... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking what the number of scores to store in scoreboard is" >&5
+printf %s "checking what the number of scores to store in scoreboard is... " >&6; }
 if test "x$numscores" = "xyes" ; then
 
-$as_echo "#define NUMSCORES 10" >>confdefs.h
+printf "%s\n" "#define NUMSCORES 10" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 10" >&5
-$as_echo "10" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: 10" >&5
+printf "%s\n" "10" >&6; }
 elif test "x$enable_numscores" = "x" ; then
 
-$as_echo "#define NUMSCORES 10" >>confdefs.h
+printf "%s\n" "#define NUMSCORES 10" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 10" >&5
-$as_echo "10" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: 10" >&5
+printf "%s\n" "10" >&6; }
 elif test "x$enable_numscores" = "xno" ; then
 
-$as_echo "#define NUMSCORES 10" >>confdefs.h
+printf "%s\n" "#define NUMSCORES 10" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: 10" >&5
-$as_echo "10" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: 10" >&5
+printf "%s\n" "10" >&6; }
 else
 
-cat >>confdefs.h <<_ACEOF
-#define NUMSCORES $enable_numscores
-_ACEOF
+printf "%s\n" "#define NUMSCORES $enable_numscores" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_numscores" >&5
-$as_echo "$enable_numscores" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_numscores" >&5
+printf "%s\n" "$enable_numscores" >&6; }
 fi
 
 # Check whether --enable-numname was given.
-if test "${enable_numname+set}" = set; then :
+if test ${enable_numname+y}
+then :
   enableval=$enable_numname;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking word for the number of scores to store in scoreboard is" >&5
-$as_echo_n "checking word for the number of scores to store in scoreboard is... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking word for the number of scores to store in scoreboard is" >&5
+printf %s "checking word for the number of scores to store in scoreboard is... " >&6; }
 if test "x$enable_numname" = "xyes" ; then
 
-$as_echo "#define NUMNAME \"Ten\"" >>confdefs.h
+printf "%s\n" "#define NUMNAME \"Ten\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
-$as_echo "Ten" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
+printf "%s\n" "Ten" >&6; }
 elif test "x$enable_numname" = "x" ; then
 
-$as_echo "#define NUMNAME \"Ten\"" >>confdefs.h
+printf "%s\n" "#define NUMNAME \"Ten\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
-$as_echo "Ten" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
+printf "%s\n" "Ten" >&6; }
 elif test "x$enable_numname" = "xno" ; then
 
-$as_echo "#define NUMNAME \"Ten\"" >>confdefs.h
+printf "%s\n" "#define NUMNAME \"Ten\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
-$as_echo "Ten" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: Ten" >&5
+printf "%s\n" "Ten" >&6; }
 else
 
-cat >>confdefs.h <<_ACEOF
-#define NUMNAME "$enable_numname"
-_ACEOF
+printf "%s\n" "#define NUMNAME \"$enable_numname\"" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_numname" >&5
-$as_echo "$enable_numname" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_numname" >&5
+printf "%s\n" "$enable_numname" >&6; }
 fi
 
 # Check whether --enable-loadav was given.
-if test "${enable_loadav+set}" = set; then :
+if test ${enable_loadav+y}
+then :
   enableval=$enable_loadav;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to use program's built in load average function" >&5
-$as_echo_n "checking whether to use program's built in load average function... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether to use program's built in load average function" >&5
+printf %s "checking whether to use program's built in load average function... " >&6; }
 if test "x$enable_loadav" = "xyes" ; then
 
-$as_echo "#define LOADAV /**/" >>confdefs.h
+printf "%s\n" "#define LOADAV /**/" >>confdefs.h
 
 
-$as_echo "#define NAMELIST /vmunix" >>confdefs.h
+printf "%s\n" "#define NAMELIST /vmunix" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: /vmunix" >&5
-$as_echo "/vmunix" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: /vmunix" >&5
+printf "%s\n" "/vmunix" >&6; }
 elif test "x$enable_loadav" = "x" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 elif test "x$enable_loadav" = "xno" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 else
 
-$as_echo "#define LOADAV /**/" >>confdefs.h
+printf "%s\n" "#define LOADAV /**/" >>confdefs.h
 
 
-cat >>confdefs.h <<_ACEOF
-#define NAMELIST $enable_loadav
-_ACEOF
+printf "%s\n" "#define NAMELIST $enable_loadav" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_loadav" >&5
-$as_echo "$enable_loadav" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_loadav" >&5
+printf "%s\n" "$enable_loadav" >&6; }
 fi
 
 # Check whether --enable-ucount was given.
-if test "${enable_ucount+set}" = set; then :
+if test ${enable_ucount+y}
+then :
   enableval=$enable_ucount;
 fi
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking whether to use program's built in user counting function" >&5
-$as_echo_n "checking whether to use program's built in user counting function... " >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: checking whether to use program's built in user counting function" >&5
+printf %s "checking whether to use program's built in user counting function... " >&6; }
 if test "x$enable_ucount" = "xyes" ; then
 
-$as_echo "#define UCOUNT /**/" >>confdefs.h
+printf "%s\n" "#define UCOUNT /**/" >>confdefs.h
 
 
-$as_echo "#define UTMP /etc/utmp" >>confdefs.h
+printf "%s\n" "#define UTMP /etc/utmp" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: /etc/utmp" >&5
-$as_echo "/etc/utmp" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: /etc/utmp" >&5
+printf "%s\n" "/etc/utmp" >&6; }
 elif test "x$enable_ucount" = "x" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 elif test "x$enable_count" = "xno" ; then
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: no" >&5
-$as_echo "no" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: no" >&5
+printf "%s\n" "no" >&6; }
 else
 
-$as_echo "#define UCOUNT /**/" >>confdefs.h
+printf "%s\n" "#define UCOUNT /**/" >>confdefs.h
 
 
-cat >>confdefs.h <<_ACEOF
-#define UTMP $enable_ucount
-_ACEOF
+printf "%s\n" "#define UTMP $enable_ucount" >>confdefs.h
 
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $enable_ucount" >&5
-$as_echo "$enable_ucount" >&6; }
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: result: $enable_ucount" >&5
+printf "%s\n" "$enable_ucount" >&6; }
 fi
 
 TARGET=$target
@@ -5300,8 +6111,8 @@
     case $ac_val in #(
     *${as_nl}*)
       case $ac_var in #(
-      *_cv_*) { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
-$as_echo "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
+      *_cv_*) { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: cache variable $ac_var contains a newline" >&5
+printf "%s\n" "$as_me: WARNING: cache variable $ac_var contains a newline" >&2;} ;;
       esac
       case $ac_var in #(
       _ | IFS | as_nl) ;; #(
@@ -5331,15 +6142,15 @@
      /^ac_cv_env_/b end
      t clear
      :clear
-     s/^\([^=]*\)=\(.*[{}].*\)$/test "${\1+set}" = set || &/
+     s/^\([^=]*\)=\(.*[{}].*\)$/test ${\1+y} || &/
      t end
      s/^\([^=]*\)=\(.*\)$/\1=${\1=\2}/
      :end' >>confcache
 if diff "$cache_file" confcache >/dev/null 2>&1; then :; else
   if test -w "$cache_file"; then
     if test "x$cache_file" != "x/dev/null"; then
-      { $as_echo "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
-$as_echo "$as_me: updating cache $cache_file" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: updating cache $cache_file" >&5
+printf "%s\n" "$as_me: updating cache $cache_file" >&6;}
       if test ! -f "$cache_file" || test -h "$cache_file"; then
 	cat confcache >"$cache_file"
       else
@@ -5353,8 +6164,8 @@
       fi
     fi
   else
-    { $as_echo "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
-$as_echo "$as_me: not updating unwritable cache $cache_file" >&6;}
+    { printf "%s\n" "$as_me:${as_lineno-$LINENO}: not updating unwritable cache $cache_file" >&5
+printf "%s\n" "$as_me: not updating unwritable cache $cache_file" >&6;}
   fi
 fi
 rm -f confcache
@@ -5371,7 +6182,7 @@
 for ac_i in : $LIBOBJS; do test "x$ac_i" = x: && continue
   # 1. Remove the extension, and $U if already installed.
   ac_script='s/\$U\././;s/\.o$//;s/\.obj$//'
-  ac_i=`$as_echo "$ac_i" | sed "$ac_script"`
+  ac_i=`printf "%s\n" "$ac_i" | sed "$ac_script"`
   # 2. Prepend LIBOBJDIR.  When used with automake>=1.10 LIBOBJDIR
   #    will be set to the directory where LIBOBJS objects are built.
   as_fn_append ac_libobjs " \${LIBOBJDIR}$ac_i\$U.$ac_objext"
@@ -5387,8 +6198,8 @@
 ac_write_fail=0
 ac_clean_files_save=$ac_clean_files
 ac_clean_files="$ac_clean_files $CONFIG_STATUS"
-{ $as_echo "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
-$as_echo "$as_me: creating $CONFIG_STATUS" >&6;}
+{ printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $CONFIG_STATUS" >&5
+printf "%s\n" "$as_me: creating $CONFIG_STATUS" >&6;}
 as_write_fail=0
 cat >$CONFIG_STATUS <<_ASEOF || as_write_fail=1
 #! $SHELL
@@ -5411,14 +6222,16 @@
 
 # Be more Bourne compatible
 DUALCASE=1; export DUALCASE # for MKS sh
-if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
+as_nop=:
+if test ${ZSH_VERSION+y} && (emulate sh) >/dev/null 2>&1
+then :
   emulate sh
   NULLCMD=:
   # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which
   # is contrary to our usage.  Disable this feature.
   alias -g '${1+"$@"}'='"$@"'
   setopt NO_GLOB_SUBST
-else
+else $as_nop
   case `(set -o) 2>/dev/null` in #(
   *posix*) :
     set -o posix ;; #(
@@ -5428,46 +6241,46 @@
 fi
 
 
+
+# Reset variables that may have inherited troublesome values from
+# the environment.
+
+# IFS needs to be set, to space, tab, and newline, in precisely that order.
+# (If _AS_PATH_WALK were called with IFS unset, it would have the
+# side effect of setting IFS to empty, thus disabling word splitting.)
+# Quoting is to prevent editors from complaining about space-tab.
 as_nl='
 '
 export as_nl
-# Printing a long string crashes Solaris 7 /usr/bin/printf.
-as_echo='\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo
-as_echo=$as_echo$as_echo$as_echo$as_echo$as_echo$as_echo
-# Prefer a ksh shell builtin over an external printf program on Solaris,
-# but without wasting forks for bash or zsh.
-if test -z "$BASH_VERSION$ZSH_VERSION" \
-    && (test "X`print -r -- $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='print -r --'
-  as_echo_n='print -rn --'
-elif (test "X`printf %s $as_echo`" = "X$as_echo") 2>/dev/null; then
-  as_echo='printf %s\n'
-  as_echo_n='printf %s'
-else
-  if test "X`(/usr/ucb/echo -n -n $as_echo) 2>/dev/null`" = "X-n $as_echo"; then
-    as_echo_body='eval /usr/ucb/echo -n "$1$as_nl"'
-    as_echo_n='/usr/ucb/echo -n'
-  else
-    as_echo_body='eval expr "X$1" : "X\\(.*\\)"'
-    as_echo_n_body='eval
-      arg=$1;
-      case $arg in #(
-      *"$as_nl"*)
-	expr "X$arg" : "X\\(.*\\)$as_nl";
-	arg=`expr "X$arg" : ".*$as_nl\\(.*\\)"`;;
-      esac;
-      expr "X$arg" : "X\\(.*\\)" | tr -d "$as_nl"
-    '
-    export as_echo_n_body
-    as_echo_n='sh -c $as_echo_n_body as_echo'
-  fi
-  export as_echo_body
-  as_echo='sh -c $as_echo_body as_echo'
-fi
+IFS=" ""	$as_nl"
+
+PS1='$ '
+PS2='> '
+PS4='+ '
+
+# Ensure predictable behavior from utilities with locale-dependent output.
+LC_ALL=C
+export LC_ALL
+LANGUAGE=C
+export LANGUAGE
+
+# We cannot yet rely on "unset" to work, but we need these variables
+# to be unset--not just set to an empty or harmless value--now, to
+# avoid bugs in old shells (e.g. pre-3.0 UWIN ksh).  This construct
+# also avoids known problems related to "unset" and subshell syntax
+# in other old shells (e.g. bash 2.01 and pdksh 5.2.14).
+for as_var in BASH_ENV ENV MAIL MAILPATH CDPATH
+do eval test \${$as_var+y} \
+  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
+done
+
+# Ensure that fds 0, 1, and 2 are open.
+if (exec 3>&0) 2>/dev/null; then :; else exec 0</dev/null; fi
+if (exec 3>&1) 2>/dev/null; then :; else exec 1>/dev/null; fi
+if (exec 3>&2)            ; then :; else exec 2>/dev/null; fi
 
 # The user is always right.
-if test "${PATH_SEPARATOR+set}" != set; then
+if ${PATH_SEPARATOR+false} :; then
   PATH_SEPARATOR=:
   (PATH='/bin;/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 && {
     (PATH='/bin:/bin'; FPATH=$PATH; sh -c :) >/dev/null 2>&1 ||
@@ -5476,13 +6289,6 @@
 fi
 
 
-# IFS
-# We need space, tab and new line, in precisely that order.  Quoting is
-# there to prevent editors from complaining about space-tab.
-# (If _AS_PATH_WALK were called with IFS unset, it would disable word
-# splitting by setting IFS to empty value.)
-IFS=" ""	$as_nl"
-
 # Find who we are.  Look in the path if we contain no directory separator.
 as_myself=
 case $0 in #((
@@ -5491,8 +6297,12 @@
 for as_dir in $PATH
 do
   IFS=$as_save_IFS
-  test -z "$as_dir" && as_dir=.
-    test -r "$as_dir/$0" && as_myself=$as_dir/$0 && break
+  case $as_dir in #(((
+    '') as_dir=./ ;;
+    */) ;;
+    *) as_dir=$as_dir/ ;;
+  esac
+    test -r "$as_dir$0" && as_myself=$as_dir$0 && break
   done
 IFS=$as_save_IFS
 
@@ -5504,30 +6314,10 @@
   as_myself=$0
 fi
 if test ! -f "$as_myself"; then
-  $as_echo "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
+  printf "%s\n" "$as_myself: error: cannot find myself; rerun with an absolute file name" >&2
   exit 1
 fi
 
-# Unset variables that we do not need and which cause bugs (e.g. in
-# pre-3.0 UWIN ksh).  But do not cause bugs in bash 2.01; the "|| exit 1"
-# suppresses any "Segmentation fault" message there.  '((' could
-# trigger a bug in pdksh 5.2.14.
-for as_var in BASH_ENV ENV MAIL MAILPATH
-do eval test x\${$as_var+set} = xset \
-  && ( (unset $as_var) || exit 1) >/dev/null 2>&1 && unset $as_var || :
-done
-PS1='$ '
-PS2='> '
-PS4='+ '
-
-# NLS nuisances.
-LC_ALL=C
-export LC_ALL
-LANGUAGE=C
-export LANGUAGE
-
-# CDPATH.
-(unset CDPATH) >/dev/null 2>&1 && unset CDPATH
 
 
 # as_fn_error STATUS ERROR [LINENO LOG_FD]
@@ -5540,13 +6330,14 @@
   as_status=$1; test $as_status -eq 0 && as_status=1
   if test "$4"; then
     as_lineno=${as_lineno-"$3"} as_lineno_stack=as_lineno_stack=$as_lineno_stack
-    $as_echo "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
+    printf "%s\n" "$as_me:${as_lineno-$LINENO}: error: $2" >&$4
   fi
-  $as_echo "$as_me: error: $2" >&2
+  printf "%s\n" "$as_me: error: $2" >&2
   as_fn_exit $as_status
 } # as_fn_error
 
 
+
 # as_fn_set_status STATUS
 # -----------------------
 # Set $? to STATUS, without forking.
@@ -5573,18 +6364,20 @@
   { eval $1=; unset $1;}
 }
 as_unset=as_fn_unset
+
 # as_fn_append VAR VALUE
 # ----------------------
 # Append the text in VALUE to the end of the definition contained in VAR. Take
 # advantage of any shell optimizations that allow amortized linear growth over
 # repeated appends, instead of the typical quadratic growth present in naive
 # implementations.
-if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null; then :
+if (eval "as_var=1; as_var+=2; test x\$as_var = x12") 2>/dev/null
+then :
   eval 'as_fn_append ()
   {
     eval $1+=\$2
   }'
-else
+else $as_nop
   as_fn_append ()
   {
     eval $1=\$$1\$2
@@ -5596,12 +6389,13 @@
 # Perform arithmetic evaluation on the ARGs, and store the result in the
 # global $as_val. Take advantage of shells that can avoid forks. The arguments
 # must be portable across $(()) and expr.
-if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null; then :
+if (eval "test \$(( 1 + 1 )) = 2") 2>/dev/null
+then :
   eval 'as_fn_arith ()
   {
     as_val=$(( $* ))
   }'
-else
+else $as_nop
   as_fn_arith ()
   {
     as_val=`expr "$@" || test $? -eq 1`
@@ -5632,7 +6426,7 @@
 $as_expr X/"$0" : '.*/\([^/][^/]*\)/*$' \| \
 	 X"$0" : 'X\(//\)$' \| \
 	 X"$0" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X/"$0" |
+printf "%s\n" X/"$0" |
     sed '/^.*\/\([^/][^/]*\)\/*$/{
 	    s//\1/
 	    q
@@ -5654,6 +6448,10 @@
 as_cr_digits='0123456789'
 as_cr_alnum=$as_cr_Letters$as_cr_digits
 
+
+# Determine whether it's possible to make 'echo' print without a newline.
+# These variables are no longer used directly by Autoconf, but are AC_SUBSTed
+# for compatibility with existing Makefiles.
 ECHO_C= ECHO_N= ECHO_T=
 case `echo -n x` in #(((((
 -n*)
@@ -5667,6 +6465,12 @@
   ECHO_N='-n';;
 esac
 
+# For backward compatibility with old third-party macros, we provide
+# the shell variables $as_echo and $as_echo_n.  New code should use
+# AS_ECHO(["message"]) and AS_ECHO_N(["message"]), respectively.
+as_echo='printf %s\n'
+as_echo_n='printf %s'
+
 rm -f conf$$ conf$$.exe conf$$.file
 if test -d conf$$.dir; then
   rm -f conf$$.dir/conf$$.file
@@ -5708,7 +6512,7 @@
     as_dirs=
     while :; do
       case $as_dir in #(
-      *\'*) as_qdir=`$as_echo "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
+      *\'*) as_qdir=`printf "%s\n" "$as_dir" | sed "s/'/'\\\\\\\\''/g"`;; #'(
       *) as_qdir=$as_dir;;
       esac
       as_dirs="'$as_qdir' $as_dirs"
@@ -5717,7 +6521,7 @@
 	 X"$as_dir" : 'X\(//\)[^/]' \| \
 	 X"$as_dir" : 'X\(//\)$' \| \
 	 X"$as_dir" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$as_dir" |
+printf "%s\n" X"$as_dir" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -5780,7 +6584,7 @@
 # values after options handling.
 ac_log="
 This file was extended by Rogue $as_me 5.4.5, which was
-generated by GNU Autoconf 2.69.  Invocation command line was
+generated by GNU Autoconf 2.71.  Invocation command line was
 
   CONFIG_FILES    = $CONFIG_FILES
   CONFIG_HEADERS  = $CONFIG_HEADERS
@@ -5838,14 +6642,16 @@
 Report bugs to <yendor@rogueforge.net>."
 
 _ACEOF
+ac_cs_config=`printf "%s\n" "$ac_configure_args" | sed "$ac_safe_unquote"`
+ac_cs_config_escaped=`printf "%s\n" "$ac_cs_config" | sed "s/^ //; s/'/'\\\\\\\\''/g"`
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
-ac_cs_config="`$as_echo "$ac_configure_args" | sed 's/^ //; s/[\\""\`\$]/\\\\&/g'`"
+ac_cs_config='$ac_cs_config_escaped'
 ac_cs_version="\\
 Rogue config.status 5.4.5
-configured by $0, generated by GNU Autoconf 2.69,
+configured by $0, generated by GNU Autoconf 2.71,
   with options \\"\$ac_cs_config\\"
 
-Copyright (C) 2012 Free Software Foundation, Inc.
+Copyright (C) 2021 Free Software Foundation, Inc.
 This config.status script is free software; the Free Software Foundation
 gives unlimited permission to copy, distribute and modify it."
 
@@ -5882,15 +6688,15 @@
   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
     ac_cs_recheck=: ;;
   --version | --versio | --versi | --vers | --ver | --ve | --v | -V )
-    $as_echo "$ac_cs_version"; exit ;;
+    printf "%s\n" "$ac_cs_version"; exit ;;
   --config | --confi | --conf | --con | --co | --c )
-    $as_echo "$ac_cs_config"; exit ;;
+    printf "%s\n" "$ac_cs_config"; exit ;;
   --debug | --debu | --deb | --de | --d | -d )
     debug=: ;;
   --file | --fil | --fi | --f )
     $ac_shift
     case $ac_optarg in
-    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     '') as_fn_error $? "missing file argument" ;;
     esac
     as_fn_append CONFIG_FILES " '$ac_optarg'"
@@ -5898,7 +6704,7 @@
   --header | --heade | --head | --hea )
     $ac_shift
     case $ac_optarg in
-    *\'*) ac_optarg=`$as_echo "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
+    *\'*) ac_optarg=`printf "%s\n" "$ac_optarg" | sed "s/'/'\\\\\\\\''/g"` ;;
     esac
     as_fn_append CONFIG_HEADERS " '$ac_optarg'"
     ac_need_defaults=false;;
@@ -5907,7 +6713,7 @@
     as_fn_error $? "ambiguous option: \`$1'
 Try \`$0 --help' for more information.";;
   --help | --hel | -h )
-    $as_echo "$ac_cs_usage"; exit ;;
+    printf "%s\n" "$ac_cs_usage"; exit ;;
   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
   | -silent | --silent | --silen | --sile | --sil | --si | --s)
     ac_cs_silent=: ;;
@@ -5935,7 +6741,7 @@
 if \$ac_cs_recheck; then
   set X $SHELL '$0' $ac_configure_args \$ac_configure_extra_args --no-create --no-recursion
   shift
-  \$as_echo "running CONFIG_SHELL=$SHELL \$*" >&6
+  \printf "%s\n" "running CONFIG_SHELL=$SHELL \$*" >&6
   CONFIG_SHELL='$SHELL'
   export CONFIG_SHELL
   exec "\$@"
@@ -5949,7 +6755,7 @@
   sed 'h;s/./-/g;s/^.../## /;s/...$/ ##/;p;x;p;x' <<_ASBOX
 ## Running $as_me. ##
 _ASBOX
-  $as_echo "$ac_log"
+  printf "%s\n" "$ac_log"
 } >&5
 
 _ACEOF
@@ -5980,8 +6786,8 @@
 # We use the long form for the default assignment because of an extremely
 # bizarre bug on SunOS 4.1.3.
 if $ac_need_defaults; then
-  test "${CONFIG_FILES+set}" = set || CONFIG_FILES=$config_files
-  test "${CONFIG_HEADERS+set}" = set || CONFIG_HEADERS=$config_headers
+  test ${CONFIG_FILES+y} || CONFIG_FILES=$config_files
+  test ${CONFIG_HEADERS+y} || CONFIG_HEADERS=$config_headers
 fi
 
 # Have a temporary directory for convenience.  Make it in the build tree
@@ -6317,7 +7123,7 @@
 	   esac ||
 	   as_fn_error 1 "cannot find input file: \`$ac_f'" "$LINENO" 5;;
       esac
-      case $ac_f in *\'*) ac_f=`$as_echo "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
+      case $ac_f in *\'*) ac_f=`printf "%s\n" "$ac_f" | sed "s/'/'\\\\\\\\''/g"`;; esac
       as_fn_append ac_file_inputs " '$ac_f'"
     done
 
@@ -6325,17 +7131,17 @@
     # use $as_me), people would be surprised to read:
     #    /* config.h.  Generated by config.status.  */
     configure_input='Generated from '`
-	  $as_echo "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
+	  printf "%s\n" "$*" | sed 's|^[^:]*/||;s|:[^:]*/|, |g'
 	`' by configure.'
     if test x"$ac_file" != x-; then
       configure_input="$ac_file.  $configure_input"
-      { $as_echo "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
-$as_echo "$as_me: creating $ac_file" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: creating $ac_file" >&5
+printf "%s\n" "$as_me: creating $ac_file" >&6;}
     fi
     # Neutralize special characters interpreted by sed in replacement strings.
     case $configure_input in #(
     *\&* | *\|* | *\\* )
-       ac_sed_conf_input=`$as_echo "$configure_input" |
+       ac_sed_conf_input=`printf "%s\n" "$configure_input" |
        sed 's/[\\\\&|]/\\\\&/g'`;; #(
     *) ac_sed_conf_input=$configure_input;;
     esac
@@ -6352,7 +7158,7 @@
 	 X"$ac_file" : 'X\(//\)[^/]' \| \
 	 X"$ac_file" : 'X\(//\)$' \| \
 	 X"$ac_file" : 'X\(/\)' \| . 2>/dev/null ||
-$as_echo X"$ac_file" |
+printf "%s\n" X"$ac_file" |
     sed '/^X\(.*[^/]\)\/\/*[^/][^/]*\/*$/{
 	    s//\1/
 	    q
@@ -6376,9 +7182,9 @@
 case "$ac_dir" in
 .) ac_dir_suffix= ac_top_builddir_sub=. ac_top_build_prefix= ;;
 *)
-  ac_dir_suffix=/`$as_echo "$ac_dir" | sed 's|^\.[\\/]||'`
+  ac_dir_suffix=/`printf "%s\n" "$ac_dir" | sed 's|^\.[\\/]||'`
   # A ".." for each directory in $ac_dir_suffix.
-  ac_top_builddir_sub=`$as_echo "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
+  ac_top_builddir_sub=`printf "%s\n" "$ac_dir_suffix" | sed 's|/[^\\/]*|/..|g;s|/||'`
   case $ac_top_builddir_sub in
   "") ac_top_builddir_sub=. ac_top_build_prefix= ;;
   *)  ac_top_build_prefix=$ac_top_builddir_sub/ ;;
@@ -6431,8 +7237,8 @@
 case `eval "sed -n \"\$ac_sed_dataroot\" $ac_file_inputs"` in
 *datarootdir*) ac_datarootdir_seen=yes;;
 *@datadir@*|*@docdir@*|*@infodir@*|*@localedir@*|*@mandir@*)
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
-$as_echo "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&5
+printf "%s\n" "$as_me: WARNING: $ac_file_inputs seems to ignore the --datarootdir setting" >&2;}
 _ACEOF
 cat >>$CONFIG_STATUS <<_ACEOF || ac_write_fail=1
   ac_datarootdir_hack='
@@ -6474,9 +7280,9 @@
   { ac_out=`sed -n '/\${datarootdir}/p' "$ac_tmp/out"`; test -n "$ac_out"; } &&
   { ac_out=`sed -n '/^[	 ]*datarootdir[	 ]*:*=/p' \
       "$ac_tmp/out"`; test -z "$ac_out"; } &&
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: $ac_file contains a reference to the variable \`datarootdir'
 which seems to be undefined.  Please make sure it is defined" >&5
-$as_echo "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
+printf "%s\n" "$as_me: WARNING: $ac_file contains a reference to the variable \`datarootdir'
 which seems to be undefined.  Please make sure it is defined" >&2;}
 
   rm -f "$ac_tmp/stdin"
@@ -6492,20 +7298,20 @@
   #
   if test x"$ac_file" != x-; then
     {
-      $as_echo "/* $configure_input  */" \
+      printf "%s\n" "/* $configure_input  */" >&1 \
       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs"
     } >"$ac_tmp/config.h" \
       || as_fn_error $? "could not create $ac_file" "$LINENO" 5
     if diff "$ac_file" "$ac_tmp/config.h" >/dev/null 2>&1; then
-      { $as_echo "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
-$as_echo "$as_me: $ac_file is unchanged" >&6;}
+      { printf "%s\n" "$as_me:${as_lineno-$LINENO}: $ac_file is unchanged" >&5
+printf "%s\n" "$as_me: $ac_file is unchanged" >&6;}
     else
       rm -f "$ac_file"
       mv "$ac_tmp/config.h" "$ac_file" \
 	|| as_fn_error $? "could not create $ac_file" "$LINENO" 5
     fi
   else
-    $as_echo "/* $configure_input  */" \
+    printf "%s\n" "/* $configure_input  */" >&1 \
       && eval '$AWK -f "$ac_tmp/defines.awk"' "$ac_file_inputs" \
       || as_fn_error $? "could not create -" "$LINENO" 5
   fi
@@ -6546,7 +7352,8 @@
   $ac_cs_success || as_fn_exit 1
 fi
 if test -n "$ac_unrecognized_opts" && test "$enable_option_checking" != no; then
-  { $as_echo "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
-$as_echo "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
+  { printf "%s\n" "$as_me:${as_lineno-$LINENO}: WARNING: unrecognized options: $ac_unrecognized_opts" >&5
+printf "%s\n" "$as_me: WARNING: unrecognized options: $ac_unrecognized_opts" >&2;}
 fi
 
+
diff -Naur rogue5.4.5x-src.orig/daemons.c rogue5.4.5x-src/daemons.c
--- rogue5.4.5x-src.orig/daemons.c	2017-08-24 08:43:00.000000000 +0900
+++ rogue5.4.5x-src/daemons.c	2025-08-02 14:24:23.782375812 +0900
@@ -84,7 +84,7 @@
 unconfuse(void)
 {
     player.t_flags &= ~ISHUH;
-    msg("you feel less %s now", choose_str("trippy", "confused"));
+    msg(GET_MSG("daemons.feel_less"), choose_str(GET_MSG("daemons.trippy"), GET_MSG("daemons.confused")));
 }
 
 /*
@@ -115,8 +115,8 @@
 	player.t_flags &= ~ISBLIND;
 	if (!(proom->r_flags & ISGONE))
 	    enter_room(&hero);
-	msg(choose_str("far out!  Everything is all cosmic again",
-		       "the veil of darkness lifts"));
+	msg(choose_str(GET_MSG("daemons.far_out"),
+		       GET_MSG("daemons.darkness_lifts")));
     }
 }
 
@@ -128,7 +128,7 @@
 nohaste(void)
 {
     player.t_flags &= ~ISHASTE;
-    msg("you feel yourself slowing down");
+    msg(GET_MSG("daemons.feel_slowing_down"));
 }
 
 /*
@@ -153,9 +153,9 @@
 	no_command += rnd(8) + 4;
 	hungry_state = 3;
 	if (!terse)
-	    addmsg(choose_str("the munchies overpower your motor capabilities.  ",
-			      "you feel too weak from lack of food.  "));
-	msg(choose_str("You freak out", "You faint"));
+	    addmsg(choose_str(GET_MSG("daemons.munchies_overpower"),
+			      GET_MSG("daemons.feel_too_weak")));
+	msg(choose_str(GET_MSG("daemons.freak_out"), GET_MSG("daemons.faint")));
     }
     else
     {
@@ -165,17 +165,17 @@
 	if (food_left < MORETIME && oldfood >= MORETIME)
 	{
 	    hungry_state = 2;
-	    msg(choose_str("the munchies are interfering with your motor capabilites",
-			   "you are starting to feel weak"));
+	    msg(choose_str(GET_MSG("daemons.munchies_interfering"),
+			   GET_MSG("daemons.feel_weak")));
 	}
 	else if (food_left < 2 * MORETIME && oldfood >= 2 * MORETIME)
 	{
 	    hungry_state = 1;
 	    if (terse)
-		msg(choose_str("getting the munchies", "getting hungry"));
+		msg(choose_str(GET_MSG("daemons.get_munchies"), GET_MSG("daemons.get_hungry")));
 	    else
-		msg(choose_str("you are getting the munchies",
-			       "you are starting to get hungry"));
+		msg(choose_str(GET_MSG("daemons.get_munchies2"),
+			       GET_MSG("daemons.get_hungry2")));
 	}
     }
     if (hungry_state != orig_hungry) {
@@ -233,7 +233,7 @@
 	    standend2();
 	}
     }
-    msg("Everything looks SO boring now.");
+    msg(GET_MSG("daemons.looks_boring"));
 }
 
 /*
@@ -294,6 +294,6 @@
 land(void)
 {
     player.t_flags &= ~ISLEVIT;
-    msg(choose_str("bummer!  You've hit the ground",
-		   "you float gently to the ground"));
+    msg(choose_str(GET_MSG("daemons.hit_ground"),
+		   GET_MSG("daemons.float_gently_ground")));
 }
diff -Naur rogue5.4.5x-src.orig/extern.c rogue5.4.5x-src/extern.c
--- rogue5.4.5x-src.orig/extern.c	2020-12-18 08:27:00.000000000 +0900
+++ rogue5.4.5x-src/extern.c	2025-08-02 14:24:23.782375812 +0900
@@ -13,6 +13,7 @@
 /* All global variables are defined here, or in vers.c or init.c */
 
 #include <curses.h>
+#include <string.h>
 #include "rogue.h"
 
 int  after;				/* True if we want after daemons */
@@ -71,24 +72,25 @@
 		{ 's', 'l', 'i', 'm', 'e', '-', 'm', 'o', 'l', 'd', '\0' };
 char home[MAXSTR] = { '\0' };		/* User's home directory */
 const char *inv_t_name[] = {
-	"Overwrite",
-	"Slow",
-	"Clear"
+	"extern.inv_style_overwrite",
+	"extern.inv_style_slow",
+	"extern.inv_style_clear"
 };
 int  l_last_comm = '\0';		/* Last last_comm */
 int  l_last_dir = '\0';			/* Last last_dir */
 int  last_comm = '\0';			/* Last command typed */
 int  last_dir = '\0';			/* Last direction given */
 const char *tr_name[] = {			/* Names of the traps */
-	"a trapdoor",
-	"an arrow trap",
-	"a sleeping gas trap",
-	"a beartrap",
-	"a teleport trap",
-	"a poison dart trap",
-	"a rust trap",
-	"a mysterious trap"
+	"extern.trap_trapdoor",
+	"extern.trap_arrow",
+	"extern.trap_sleeping_gas",
+	"extern.trap_beartrap",
+	"extern.trap_teleport",
+	"extern.trap_poison_dart",
+	"extern.trap_rust",
+	"extern.trap_mysterious"
 };
+const char *dragon_flame = "extern.flame";
 
 
 int n_objs;				/* # items listed in inventory() call */
@@ -168,11 +170,11 @@
 int pc_md = FALSE;            /* Pc Mode */
 int s_time;
 coord slimepos;
-char *snake_name   = "snake";
-char *bunicorn_name  = "black unicorn";
-char *slime_name   = "slime";
-char *urvile_name  = "ur-vile";
-char *ws_info_strike = "striking";
+char *snake_name   = "extern.monster_snake";
+char *bunicorn_name  = "extern.monster_black_unicorn";
+char *slime_name   = "extern.monster_slime";
+char *urvile_name  = "extern.monster_ur-vile";
+char *ws_info_strike = "extern.ws_striking";
 int color_mode = FALSE;   /* Color Char Mode */
 int color_mode2 = FALSE;
 int bright_mode = FALSE;  /* Bright Color Char Mode */
@@ -213,6 +215,14 @@
 int fcolor[] = { 0, 1, 2, 3, 4, 5, 6, 7, 2, 3 };
 int hcolor[] = { 0, 1, 1, 0, 1, 1, 1, 0, 2, 1 };
 
+char *lang = NULL;
+
+void
+extern_init(void)
+{
+    strncpy(fruit, GET_MSG("extern.fruit"), MAXSTR-1); 
+}
+
 void
 refresh2(void)
 {
@@ -225,8 +235,10 @@
     bright_attr = bright_mode ? A_BOLD : 0;
 
     attrset(COLOR_PAIR(0) | bright_attr);
+/*
     for (i = 0; i < NUMCOLS; i++)
 	mvaddch(0, i, mvinch(0, i) & 0x7f);
+*/
     for (i = 0; i < NUMCOLS; i++)
 	for (j = 1; j < STATLINE; j++)
 	    mvaddch2(j, i, mvinch(j, i) & 0x7f);
@@ -234,9 +246,13 @@
 	attrset(COLOR_PAIR(9) | A_BOLD);
 /*  else
 	attrset(COLOR_PAIR(0) | bright_attr); */
+/*
     for (i = 0; i < NUMCOLS; i++)
 	for (j = STATLINE; j <= NUMLINES; j++)
 	    mvaddch(j, i, mvinch(j, i) & 0x7f);
+*/
+    status();
+    refresh();
 }
 
 void
@@ -327,6 +343,32 @@
     return rc;
 }
 
+int mbstrlen(const char *mysrc)
+{
+    int i, len;
+    int charlen;
+
+    /* setlocale(LC_ALL,"ja_JP.UTF-8"); */
+
+    charlen = 0;
+    i = 0;
+    while (mysrc[i] != '\0') {
+	len = mblen(&mysrc[i], MB_CUR_MAX);
+	if (len != -1) {
+	    if (len > 1) {
+	    charlen = charlen + 2;
+	    }
+	    else
+		charlen++;
+	    i += len;
+	}
+	else {
+	    break;
+	}
+    }
+    return charlen;
+}
+
 void
 resetcolor(void)
 {
@@ -381,32 +423,32 @@
 struct monster monsters[26] =
     {
 /* Name		 CARRY	FLAG    str, exp, lvl, amr, hpt, dmg */
-{ "aquator",	   0,	ISMEAN,	{ XX, 20,   5,   2, ___, "0x0/0x0" } },
-{ "bat",	   0,	ISFLY,	{ XX,  1,   1,   3, ___, "1x2" } },
-{ "centaur",	  15,	0,	{ XX, 17,   4,   4, ___, "1x2/1x5/1x5" } },
-{ "dragon",	 100,	ISMEAN,	{ XX,5000, 10,  -1, ___, "1x8/1x8/3x10" } },
-{ "emu",	   0,	ISMEAN,	{ XX,  2,   1,   7, ___, "1x2" } },
-{ "venus flytrap", 0,	ISMEAN,	{ XX, 80,   8,   3, ___, "0x0" } },
-{ "griffin",	  20,	ISMEAN|ISFLY|ISREGEN, { XX,2000, 13,   2, ___, "4x3/3x5" } },
-{ "hobgoblin",	   0,	ISMEAN,	{ XX,  3,   1,   5, ___, "1x8" } },
-{ "ice monster",   0,	0,	{ XX,  5,   1,   9, ___, "0x0" } },
-{ "jabberwock",   70,	0,	{ XX,3000, 15,   6, ___, "2x12/2x4" } },
-{ "kestrel",	   0,	ISMEAN|ISFLY,	{ XX,  1,   1,   7, ___, "1x4" } },
-{ "leprechaun",	   0,	0,	{ XX, 10,   3,   8, ___, "1x1" } },
-{ "medusa",	  40,	ISMEAN,	{ XX,200,   8,   2, ___, "3x4/3x4/2x5" } },
-{ "nymph",	 100,	0,	{ XX, 37,   3,   9, ___, "0x0" } },
-{ "orc",	  15,	ISGREED,{ XX,  5,   1,   6, ___, "1x8" } },
-{ "phantom",	   0,	ISINVIS,{ XX,120,   8,   3, ___, "4x4" } },
-{ "quagga",	   0,	ISMEAN,	{ XX, 15,   3,   3, ___, "1x5/1x5" } },
-{ "rattlesnake",   0,	ISMEAN,	{ XX,  9,   2,   3, ___, "1x6" } },
-{ "snake",	   0,	ISMEAN,	{ XX,  2,   1,   5, ___, "1x3" } },
-{ "troll",	  50,	ISREGEN|ISMEAN,{ XX, 120, 6, 4, ___, "1x8/1x8/2x6" } },
-{ "black unicorn", 0,	ISMEAN,	{ XX,190,   7,  -2, ___, "1x9/1x9/2x9" } },
-{ "vampire",	  20,	ISREGEN|ISMEAN,{ XX,350,   8,   1, ___, "1x10" } },
-{ "wraith",	   0,	0,	{ XX, 55,   5,   4, ___, "1x6" } },
-{ "xeroc",	  30,	0,	{ XX,100,   7,   7, ___, "4x4" } },
-{ "yeti",	  30,	0,	{ XX, 50,   4,   6, ___, "1x6/1x6" } },
-{ "zombie",	   0,	ISMEAN,	{ XX,  6,   2,   8, ___, "1x8" } }
+{ "extern.monster_aquator",	   0,	ISMEAN,	{ XX, 20,   5,   2, ___, "0x0/0x0" } },
+{ "extern.monster_bat",		   0,	ISFLY,	{ XX,  1,   1,   3, ___, "1x2" } },
+{ "extern.monster_centaur",	  15,	0,	{ XX, 17,   4,   4, ___, "1x2/1x5/1x5" } },
+{ "extern.monster_dragon",	 100,	ISMEAN,	{ XX,5000, 10,  -1, ___, "1x8/1x8/3x10" } },
+{ "extern.monster_emu",		   0,	ISMEAN,	{ XX,  2,   1,   7, ___, "1x2" } },
+{ "extern.monster_venus_flytrap",  0,	ISMEAN,	{ XX, 80,   8,   3, ___, "0x0" } },
+{ "extern.monster_griffin",	  20,	ISMEAN|ISFLY|ISREGEN, { XX,2000, 13,   2, ___, "4x3/3x5" } },
+{ "extern.monster_hobgoblin",	   0,	ISMEAN,	{ XX,  3,   1,   5, ___, "1x8" } },
+{ "extern.monster_ice_monster",    0,	0,	{ XX,  5,   1,   9, ___, "0x0" } },
+{ "extern.monster_jabberwock",	  70,	0,	{ XX,3000, 15,   6, ___, "2x12/2x4" } },
+{ "extern.monster_kestrel",	   0,	ISMEAN|ISFLY,	{ XX,  1,   1,   7, ___, "1x4" } },
+{ "extern.monster_leprechaun",	   0,	0,	{ XX, 10,   3,   8, ___, "1x1" } },
+{ "extern.monster_medusa",	  40,	ISMEAN,	{ XX,200,   8,   2, ___, "3x4/3x4/2x5" } },
+{ "extern.monster_nymph",	 100,	0,	{ XX, 37,   3,   9, ___, "0x0" } },
+{ "extern.monster_orc",		  15,	ISGREED,{ XX,  5,   1,   6, ___, "1x8" } },
+{ "extern.monster_phantom",	   0,	ISINVIS,{ XX,120,   8,   3, ___, "4x4" } },
+{ "extern.monster_quagga",	   0,	ISMEAN,	{ XX, 15,   3,   3, ___, "1x5/1x5" } },
+{ "extern.monster_rattlesnake",	   0,	ISMEAN,	{ XX,  9,   2,   3, ___, "1x6" } },
+{ "extern.monster_snake",	   0,	ISMEAN,	{ XX,  2,   1,   5, ___, "1x3" } },
+{ "extern.monster_troll",	  50,	ISREGEN|ISMEAN,{ XX, 120, 6, 4, ___, "1x8/1x8/2x6" } },
+{ "extern.monster_black_unicorn",  0,	ISMEAN,	{ XX,190,   7,  -2, ___, "1x9/1x9/2x9" } },
+{ "extern.monster_vampire",	  20,	ISREGEN|ISMEAN,{ XX,350,   8,   1, ___, "1x10" } },
+{ "extern.monster_wraith",	   0,	0,	{ XX, 55,   5,   4, ___, "1x6" } },
+{ "extern.monster_xeroc",	  30,	0,	{ XX,100,   7,   7, ___, "4x4" } },
+{ "extern.monster_yeti",	  30,	0,	{ XX, 50,   4,   6, ___, "1x6/1x6" } },
+{ "extern.monster_zombie",	   0,	ISMEAN,	{ XX,  6,   2,   8, ___, "1x8" } }
     };
 #undef ___
 #undef XX
@@ -461,34 +503,34 @@
 };
 
 struct obj_info arm_info[MAXARMORS] = {
-    { "leather armor",		 20,	 20, NULL, FALSE },
-    { "ring mail",		 15,	 25, NULL, FALSE },
-    { "studded leather armor",	 15,	 20, NULL, FALSE },
-    { "scale mail",		 13,	 30, NULL, FALSE },
-    { "chain mail",		 12,	 75, NULL, FALSE },
-    { "splint mail",		 10,	 80, NULL, FALSE },
-    { "banded mail",		 10,	 90, NULL, FALSE },
-    { "plate mail",		  5,	150, NULL, FALSE },
+    { "extern.arm_leather_armor",		 20,	 20, NULL, FALSE },
+    { "extern.arm_ring_mail",		 	 15,	 25, NULL, FALSE },
+    { "extern.arm_studded_leather_armor",	 15,	 20, NULL, FALSE },
+    { "extern.arm_scale_mail",			 13,	 30, NULL, FALSE },
+    { "extern.arm_chain_mail",			 12,	 75, NULL, FALSE },
+    { "extern.arm_splint_mail",			 10,	 80, NULL, FALSE },
+    { "extern.arm_banded_mail",			 10,	 90, NULL, FALSE },
+    { "extern.arm_plate_mail",			  5,	150, NULL, FALSE },
 };
 struct obj_info pot_info[MAXPOTIONS] = {
-    { "confusion",		 7,   5, NULL, FALSE },
-    { "hallucination",		 8,   5, NULL, FALSE },
-    { "poison",			 8,   5, NULL, FALSE },
-    { "gain strength",		13, 150, NULL, FALSE },
-    { "see invisible",		 3, 100, NULL, FALSE },
-    { "healing",		13, 130, NULL, FALSE },
-    { "monster detection",	 6, 130, NULL, FALSE },
-    { "magic detection",	 6, 105, NULL, FALSE },
-    { "raise level",		 2, 250, NULL, FALSE },
-    { "extra healing",		 5, 200, NULL, FALSE },
-    { "haste self",		 5, 190, NULL, FALSE },
-    { "restore strength",	13, 130, NULL, FALSE },
-    { "blindness",		 5,   5, NULL, FALSE },
-    { "levitation",		 6,  75, NULL, FALSE },
+    { "extern.pot_confusion",		 7,   5, NULL, FALSE },
+    { "extern.pot_hallucination",	 8,   5, NULL, FALSE },
+    { "extern.pot_poison",		 8,   5, NULL, FALSE },
+    { "extern.pot_gain_strength",	13, 150, NULL, FALSE },
+    { "extern.pot_see_invisible",	 3, 100, NULL, FALSE },
+    { "extern.pot_healing",		13, 130, NULL, FALSE },
+    { "extern.pot_monster_detection",	 6, 130, NULL, FALSE },
+    { "extern.pot_magic_detection",	 6, 105, NULL, FALSE },
+    { "extern.pot_raise_level",		 2, 250, NULL, FALSE },
+    { "extern.pot_extra_healing",	 5, 200, NULL, FALSE },
+    { "extern.pot_haste_self",		 5, 190, NULL, FALSE },
+    { "extern.pot_restore_strength",	13, 130, NULL, FALSE },
+    { "extern.pot_blindness",		 5,   5, NULL, FALSE },
+    { "extern.pot_levitation",		 6,  75, NULL, FALSE },
 };
 struct obj_info pot2_info[MAXPOTIONS] = {
     { "",				 8,   5, NULL, FALSE },
-    { "paralysis",		10,   5, NULL, FALSE },
+    { "extern.pot2_paralysis",		10,   5, NULL, FALSE },
     { "",				 8,   5, NULL, FALSE },
     { "",				15, 150, NULL, FALSE },
     { "",				 2, 100, NULL, FALSE },
@@ -500,43 +542,43 @@
     { "",				 4, 190, NULL, FALSE },
     { "",				14, 130, NULL, FALSE },
     { "",				 4,   5, NULL, FALSE },
-    { "thirst quenching",		 1,   5, NULL, FALSE },
+    { "extern.pot2_thirst_quenching",	 1,   5, NULL, FALSE },
 };
 struct obj_info ring_info[MAXRINGS] = {
-    { "protection",		 9, 400, NULL, FALSE },
-    { "add strength",		 9, 400, NULL, FALSE },
-    { "sustain strength",	 5, 280, NULL, FALSE },
-    { "searching",		10, 420, NULL, FALSE },
-    { "see invisible",		10, 310, NULL, FALSE },
-    { "adornment",		 1,  10, NULL, FALSE },
-    { "aggravate monster",	10,  10, NULL, FALSE },
-    { "dexterity",		 8, 440, NULL, FALSE },
-    { "increase damage",	 8, 400, NULL, FALSE },
-    { "regeneration",		 4, 460, NULL, FALSE },
-    { "slow digestion",		 9, 240, NULL, FALSE },
-    { "teleportation",		 5,  30, NULL, FALSE },
-    { "stealth",		 7, 470, NULL, FALSE },
-    { "maintain armor",		 5, 380, NULL, FALSE },
+    { "extern.ring_protection",		 9, 400, NULL, FALSE },
+    { "extern.ring_add_strength",	 9, 400, NULL, FALSE },
+    { "extern.ring_sustain_strength",	 5, 280, NULL, FALSE },
+    { "extern.ring_searching",		10, 420, NULL, FALSE },
+    { "extern.ring_see_invisible",	10, 310, NULL, FALSE },
+    { "extern.ring_adornment",		 1,  10, NULL, FALSE },
+    { "extern.ring_aggravate_monster",	10,  10, NULL, FALSE },
+    { "extern.ring_dexterity",		 8, 440, NULL, FALSE },
+    { "extern.ring_increase_damage",	 8, 400, NULL, FALSE },
+    { "extern.ring_regeneration",	 4, 460, NULL, FALSE },
+    { "extern.ring_slow_digestion",	 9, 240, NULL, FALSE },
+    { "extern.ring_teleportation",	 5,  30, NULL, FALSE },
+    { "extern.ring_stealth",		 7, 470, NULL, FALSE },
+    { "extern.ring_maintain_armor",	 5, 380, NULL, FALSE },
 };
 struct obj_info scr_info[MAXSCROLLS] = {
-    { "monster confusion",		 7, 140, NULL, FALSE },
-    { "magic mapping",			 4, 150, NULL, FALSE },
-    { "hold monster",			 2, 180, NULL, FALSE },
-    { "sleep",				 3,   5, NULL, FALSE },
-    { "enchant armor",			 7, 160, NULL, FALSE },
-    { "identify potion",		10,  80, NULL, FALSE },
-    { "identify scroll",		10,  80, NULL, FALSE },
-    { "identify weapon",		 6,  80, NULL, FALSE },
-    { "identify armor",		 	 7, 100, NULL, FALSE },
-    { "identify ring, wand or staff",	10, 115, NULL, FALSE },
-    { "scare monster",			 3, 200, NULL, FALSE },
-    { "food detection",			 2,  60, NULL, FALSE },
-    { "teleportation",			 5, 165, NULL, FALSE },
-    { "enchant weapon",			 8, 150, NULL, FALSE },
-    { "create monster",			 4,  75, NULL, FALSE },
-    { "remove curse",			 7, 105, NULL, FALSE },
-    { "aggravate monsters",		 3,  20, NULL, FALSE },
-    { "protect armor",			 2, 250, NULL, FALSE },
+    { "extern.scr_monster_confusion",		 7, 140, NULL, FALSE },
+    { "extern.scr_magic_mapping",		 4, 150, NULL, FALSE },
+    { "extern.scr_hold_monster",		 2, 180, NULL, FALSE },
+    { "extern.scr_sleep",			 3,   5, NULL, FALSE },
+    { "extern.scr_enchant_armor",		 7, 160, NULL, FALSE },
+    { "extern.scr_identify_potion",		10,  80, NULL, FALSE },
+    { "extern.scr_identify_scroll",		10,  80, NULL, FALSE },
+    { "extern.scr_identify_weapon",		 6,  80, NULL, FALSE },
+    { "extern.scr_identify_armor",	 	 7, 100, NULL, FALSE },
+    { "extern.scr_identify_ring_wand_or_staff",	10, 115, NULL, FALSE },
+    { "extern.scr_scare_monster",		 3, 200, NULL, FALSE },
+    { "extern.scr_food_detection",		 2,  60, NULL, FALSE },
+    { "extern.scr_teleportation",		 5, 165, NULL, FALSE },
+    { "extern.scr_enchant_weapon",		 8, 150, NULL, FALSE },
+    { "extern.scr_create_monster",		 4,  75, NULL, FALSE },
+    { "extern.scr_remove_curse",		 7, 105, NULL, FALSE },
+    { "extern.scr_aggravate_monsters",		 3,  20, NULL, FALSE },
+    { "extern.scr_protect_armor",		 2, 250, NULL, FALSE },
 };
 /* only 1 scroll */
 struct obj_info scr_info2[MAXSCROLLS] = {
@@ -545,7 +587,7 @@
     { 0,				 3, 180, NULL, FALSE },
     { 0,				 5,   5, NULL, FALSE },
     { 0,				 8, 160, NULL, FALSE },
-    { "identify",			27, 100, NULL, FALSE },
+    { "extern.scr2_identify",		27, 100, NULL, FALSE },
     { 0,				 0,   0, NULL, FALSE },
     { 0,				 0,   0, NULL, FALSE },
     { 0,				 0,   0, NULL, FALSE },
@@ -557,8 +599,8 @@
     { 0,				 5,  75, NULL, FALSE },
     { 0,				 8, 105, NULL, FALSE },
     { 0,				 4,  20, NULL, FALSE },
-    { "blank paper",			 2, 250, NULL, FALSE },
-/*  { "vorpalize weapon",		 1, 300, NULL, FALSE } */
+    { "extern.scr2_blank_paper",	 2, 250, NULL, FALSE },
+/*  { "extern.scr2_vorpalize_weapon",	 1, 300, NULL, FALSE } */
 };
 
 void
@@ -607,15 +649,15 @@
 }
 
 struct obj_info weap_info[MAXWEAPONS + 1] = {
-    { "mace",				11,   8, NULL, FALSE },
-    { "long sword",			11,  15, NULL, FALSE },
-    { "short bow",			12,  15, NULL, FALSE },
-    { "arrow",				12,   1, NULL, FALSE },
-    { "dagger",				 8,   3, NULL, FALSE },
-    { "two handed sword",		10,  75, NULL, FALSE },
-    { "dart",				12,   2, NULL, FALSE },
-    { "shuriken",			12,   5, NULL, FALSE },
-    { "spear",				12,   5, NULL, FALSE },
+    { "extern.weap_mace",		11,   8, NULL, FALSE },
+    { "extern.weap_long_sword",		11,  15, NULL, FALSE },
+    { "extern.weap_short_bow",		12,  15, NULL, FALSE },
+    { "extern.weap_arrow",		12,   1, NULL, FALSE },
+    { "extern.weap_dagger",		 8,   3, NULL, FALSE },
+    { "extern.weap_two_handed_sword",	10,  75, NULL, FALSE },
+    { "extern.weap_dart",		12,   2, NULL, FALSE },
+    { "extern.weap_shuriken",		12,   5, NULL, FALSE },
+    { "extern.weap_spear",		12,   5, NULL, FALSE },
     { "",				 0,  75, NULL, FALSE },
     { NULL, 0 },	/* DO NOT REMOVE: fake entry for dragon's breath */
 };
@@ -627,96 +669,28 @@
     { "",				10,   2, NULL, FALSE },
     { "",				10,  -1, NULL, FALSE },
     { "",				10,   1, NULL, FALSE },
-    { "crossbow bolt",			10,   1, NULL, FALSE },
+    { "extern.weap2_crossbow_bolt",	10,   1, NULL, FALSE },
     { "",				10,  -1, NULL, FALSE },
-    { "crossbow",			10,  -1, NULL, FALSE },
+    { "extern.weap2_crossbow",		10,  -1, NULL, FALSE },
     { NULL, 0 },	/* DO NOT REMOVE: fake entry for dragon's breath */
 };
 struct obj_info ws_info[MAXSTICKS] = {
-    { "light",			12, 250, NULL, FALSE },
-    { "invisibility",		 6,   5, NULL, FALSE },
-    { "lightning",		 3, 330, NULL, FALSE },
-    { "fire",			 3, 330, NULL, FALSE },
-    { "cold",			 3, 330, NULL, FALSE },
-    { "polymorph",		15, 310, NULL, FALSE },
-    { "magic missile",		10, 170, NULL, FALSE },
-    { "haste monster",		10,   5, NULL, FALSE },
-    { "slow monster",		11, 350, NULL, FALSE },
-    { "drain life",		 9, 300, NULL, FALSE },
-    { "nothing",		 1,   5, NULL, FALSE },
-    { "teleport away",		 6, 340, NULL, FALSE },
-    { "teleport to",		 6,  50, NULL, FALSE },
-    { "cancellation",		 5, 280, NULL, FALSE },
-};
-
-const struct h_list helpstr[] = {
-    {'?',	"	prints help",				TRUE},
-    {'/',	"	identify object",			TRUE},
-    {'h',	"	left",					TRUE},
-    {'j',	"	down",					TRUE},
-    {'k',	"	up",					TRUE},
-    {'l',	"	right",					TRUE},
-    {'y',	"	up & left",				TRUE},
-    {'u',	"	up & right",				TRUE},
-    {'b',	"	down & left",				TRUE},
-    {'n',	"	down & right",				TRUE},
-    {'H',	"	run left",				FALSE},
-    {'J',	"	run down",				FALSE},
-    {'K',	"	run up",				FALSE},
-    {'L',	"	run right",				FALSE},
-    {'Y',	"	run up & left",				FALSE},
-    {'U',	"	run up & right",			FALSE},
-    {'B',	"	run down & left",			FALSE},
-    {'N',	"	run down & right",			FALSE},
-    {CTRL('H'),	"	run left until adjacent",		FALSE},
-    {CTRL('J'),	"	run down until adjacent",		FALSE},
-    {CTRL('K'),	"	run up until adjacent",			FALSE},
-    {CTRL('L'),	"	run right until adjacent",		FALSE},
-    {CTRL('Y'),	"	run up & left until adjacent",		FALSE},
-    {CTRL('U'),	"	run up & right until adjacent",		FALSE},
-    {CTRL('B'),	"	run down & left until adjacent",	FALSE},
-    {CTRL('N'),	"	run down & right until adjacent",	FALSE},
-    {'\0',	"	<SHIFT><dir>: run that way",		TRUE},
-    {'\0',	"	<CTRL><dir>: run till adjacent",	TRUE},
-    {'f',	"<dir>	fight till death or near death",	TRUE},
-    {'t',	"<dir>	throw something",			TRUE},
-    {'m',	"<dir>	move onto without picking up",		TRUE},
-    {'z',	"<dir>	zap a wand in a direction",		TRUE},
-    {'^',	"<dir>	identify trap type",			TRUE},
-    {'s',	"	search for trap/secret door",		TRUE},
-    {'>',	"	go down a staircase",			TRUE},
-    {'<',	"	go up a staircase",			TRUE},
-    {'.',	"	rest for a turn",			TRUE},
-    {',',	"	pick something up",			TRUE},
-    {'i',	"	inventory",				TRUE},
-    {'I',	"	inventory single item",			TRUE},
-    {'q',	"	quaff potion",				TRUE},
-    {'r',	"	read scroll",				TRUE},
-    {'e',	"	eat food",				TRUE},
-    {'w',	"	wield a weapon",			TRUE},
-    {'W',	"	wear armor",				TRUE},
-    {'T',	"	take armor off",			TRUE},
-    {'P',	"	put on ring",				TRUE},
-    {'R',	"	remove ring",				TRUE},
-    {'d',	"	drop object",				TRUE},
-    {'c',	"	call object",				TRUE},
-    {'a',	"	repeat last command",			TRUE},
-    {')',	"	print current weapon",			TRUE},
-    {']',	"	print current armor",			TRUE},
-    {'=',	"	print current rings",			TRUE},
-    {'@',	"	print current stats",			TRUE},
-    {'D',	"	recall what's been discovered",		TRUE},
-    {'o',	"	examine/set options",			TRUE},
-    {CTRL('R'),	"	redraw screen",				TRUE},
-    {CTRL('P'),	"	repeat last message",			TRUE},
-    {ESCAPE,	"	cancel command",			TRUE},
-    {'S',	"	save game",				TRUE},
-    {'Q',	"	quit",					TRUE},
-    {'!',	"	shell escape",				TRUE},
-    {'F',	"<dir>	fight till either of you dies",		TRUE},
-    {'v',	"	print version number",			TRUE},
-    {0,		NULL }
+    { "extern.ws_light",			12, 250, NULL, FALSE },
+    { "extern.ws_invisibility",		 6,   5, NULL, FALSE },
+    { "extern.ws_lightning",		 3, 330, NULL, FALSE },
+    { "extern.ws_fire",			 3, 330, NULL, FALSE },
+    { "extern.ws_cold",			 3, 330, NULL, FALSE },
+    { "extern.ws_polymorph",		15, 310, NULL, FALSE },
+    { "extern.ws_magic_missile",		10, 170, NULL, FALSE },
+    { "extern.ws_haste_monster",		10,   5, NULL, FALSE },
+    { "extern.ws_slow_monster",		11, 350, NULL, FALSE },
+    { "extern.ws_drain_life",		 9, 300, NULL, FALSE },
+    { "extern.ws_nothing",		 1,   5, NULL, FALSE },
+    { "extern.ws_teleport_away",		 6, 340, NULL, FALSE },
+    { "extern.ws_teleport_to",		 6,  50, NULL, FALSE },
+    { "extern.ws_cancellation",		 5, 280, NULL, FALSE },
 };
+
 int numscores;
 char *Numname;
 int allscore;
diff -Naur rogue5.4.5x-src.orig/extern.h rogue5.4.5x-src/extern.h
--- rogue5.4.5x-src.orig/extern.h	2021-03-25 09:16:36.000000000 +0900
+++ rogue5.4.5x-src/extern.h	2025-08-02 14:24:23.782375812 +0900
@@ -114,6 +114,7 @@
 #undef CTRL
 #endif
 #define CTRL(c)		(c & 037)
+#define GET_MSG(x) get_msg(x)
 
 /*
  * Now all the global variables
@@ -130,6 +131,7 @@
 extern int allscore;
 extern int use_savedir;
 extern char *Numname;
+extern const char *dragon_flame;
 
 extern int	max_pot_prob;
 extern int	max_scr_prob;
@@ -158,7 +160,11 @@
 extern int	bcolor[];
 extern int	hcolor[];
 extern int	_COLS, _LINES;
+extern const int sylls_num;
 
+extern char	*lang;
+
+void	extern_init(void);
 void	refresh2(void);
 void	start_custom_color(void);
 #define	addch2(c)	waddch2(stdscr,c)
@@ -166,6 +172,7 @@
 #define	mvaddch2(y,x,c)	mvwaddch2(stdscr,y,x,c)
 int	mvwaddch2(WINDOW *, int, int, const chtype);
 int	standend2(void);
+int	mbstrlen(const char *mysrc);
 
 /*
  * Function types
@@ -176,9 +183,9 @@
 int	md_dsuspchar(void);
 int	md_erasechar(void);
 char	*md_gethomedir(void);
-char	*md_getusername(void);
+const char *md_getusername(void);
 uid_t	md_getuid(void);
-char	*md_getpass(char *prompt);
+char	*md_getpass(const char *prompt);
 char	*md_getrealname(uid_t uid);
 void	md_init(void);
 int	md_killchar(void);
@@ -204,4 +211,11 @@
 int md_issymlink(char *sp);
 extern char *xcrypt(const char *key, const char *setting);
 void	resetcolor(void);
-
+void	message_init(void);
+void	message_free(void);
+const char *get_msg(const char *msgid);
+const struct h_list *get_help(void);
+const char **get_sylls(void);
+int	utf8len(unsigned char ch);
+size_t	utf8width(const char *str);
+size_t	utf8truncate(char *str, size_t width);
diff -Naur rogue5.4.5x-src.orig/fight.c rogue5.4.5x-src/fight.c
--- rogue5.4.5x-src.orig/fight.c	2017-07-09 17:25:24.000000000 +0900
+++ rogue5.4.5x-src/fight.c	2025-08-02 14:24:23.782375812 +0900
@@ -19,25 +19,25 @@
 #define	EQSTR(a, b)	(strcmp(a, b) == 0)
 
 static const char *h_names[] = {		/* strings for hitting */
-	" scored an excellent hit on ",
-	" hit ",
-	" have injured ",
-	" swing and hit ",
-	" scored an excellent hit on ",
-	" hit ",
-	" has injured ",
-	" swings and hits "
+	"fight.hit_excellent",
+	"fight.hit_hit",
+	"fight.hit_injured",
+	"fight.hit_swing",
+	"fight.hit_scored",
+	"fight.hit_hit2",
+	"fight.hit_injured2",
+	"fight.hit_swing2"
 };
 
 static const char *m_names[] = {		/* strings for missing */
-	" miss",
-	" swing and miss",
-	" barely miss",
-	" don't hit",
-	" misses",
-	" swings and misses",
-	" barely misses",
-	" doesn't hit",
+	"fight.miss_miss",
+	"fight.miss_swing",
+	"fight.miss_barely",
+	"fight.miss_dont_hit",
+	"fight.miss_miss2",
+	"fight.miss_swing2",
+	"fight.miss_barely2",
+	"fight.miss_dont_hit2",
 };
 
 /*
@@ -107,7 +107,7 @@
     if (s_time++>0) return;
 /*  if (abs(tp->t_pos.y-hero.y)+abs(tp->t_pos.x-hero.x)!=1) return; */
     if (new_slime(tp)==0 || (nslime = new_item())==0) return;
-    msg("The slime divides.  Ick!");
+    msg(GET_MSG("fight.slime_devided"));
     new_monster(nslime, 'S', &slimepos);
     if (cansee(slimepos.y, slimepos.x)) {
 	nslime->t_oldch = chat(slimepos.y, slimepos.x);
@@ -162,8 +162,8 @@
 	    ch = rnd(26) + 'A';
 	    mvaddch2(tp->t_pos.y, tp->t_pos.x, ch);
 	}
-	msg(choose_str("heavy!  That's a nasty critter!",
-		       "wait!  That's a xeroc!"));
+	msg(choose_str(GET_MSG("fight.nasty_critter"),
+		       GET_MSG("fight.wait_xeroc")));
 	if (!thrown)
 	    return FALSE;
     }
@@ -184,12 +184,12 @@
 	    player.t_flags &= ~CANHUH;
 	    endmsg();
 	    has_hit = FALSE;
-	    msg("your hands stop glowing %s", pick_color("red"));
+	    msg(GET_MSG("fight.hands_stop_glowing"), GET_MSG(pick_color("red")));
 	}
 	if (tp->t_stats.s_hpt <= 0)
 	    killed(tp, TRUE);
 	else if (did_hit && !on(player, ISBLIND))
-	    msg("%s appears confused", mname);
+	    msg(GET_MSG("fight.confused"), mname);
 	did_hit = TRUE;
     }
     else
@@ -242,7 +242,7 @@
 	if (mp->t_type != 'I')
 	{
 	    if (has_hit)
-		addmsg(".  ");
+		addmsg(GET_MSG("fight.has_hit"));
 	    hit(mname, NULL, FALSE);
 	}
 	else
@@ -274,9 +274,10 @@
 		    player.t_flags &= ~ISRUN;
 		    if (!no_command)
 		    {
-			addmsg("you are frozen");
+			addmsg(GET_MSG("fight.frozen1"));
 			if (!terse)
-			    addmsg(" by the %s", mname);
+			    addmsg(GET_MSG("fight.frozen2"), mname);
+			addmsg(GET_MSG("fight.frozen3"));
 			endmsg();
 		    }
 		    no_command += rnd(2) + 2;
@@ -292,16 +293,16 @@
 			{
 			    chg_str(-1);
 			    if (!terse)
-				msg("you feel a bite in your leg and now feel weaker");
+				msg(GET_MSG("fight.bite_weaker"));
 			    else
-				msg("a bite has weakened you");
+				msg(GET_MSG("fight.bite_weakened"));
 			}
 			else if (!to_death)
 			{
 			    if (!terse)
-				msg("a bite momentarily weakens you");
+				msg(GET_MSG("fight.bite_momentarily_weaked"));
 			    else
-				msg("bite has no effect");
+				msg(GET_MSG("fight.bite_no_effect"));
 			}
 		    }
 		when 'W':
@@ -335,7 +336,7 @@
 			    pstats.s_hpt = 1;
 			if (max_hp <= 0)
 			    death(mp->t_type);
-			msg("you suddenly feel weaker");
+			msg(GET_MSG("fight.suddenly_weaker"));
 		    }
 		when 'F':
 		    /*
@@ -361,7 +362,7 @@
 		    remove_mon(&mp->t_pos, mp, FALSE);
 		    mp=NULL;
 		    if (purse != lastpurse)
-			msg("your purse feels lighter");
+			msg(GET_MSG("fight.purse_lighter"));
 		}
 		when 'N':
 		{
@@ -383,7 +384,7 @@
 			remove_mon(&mp->t_pos, moat(mp->t_pos.y, mp->t_pos.x), FALSE);
 			mp=NULL;
 			steal = leave_pack(steal, TRUE, FALSE);
-			msg("she stole %s!", inv_name(steal, TRUE));
+			msg(GET_MSG("fight.she_stole"), inv_name(steal, TRUE));
 			discard(steal);
 		    }
 		}
@@ -395,7 +396,7 @@
     {
 	if (has_hit)
 	{
-	    addmsg(".  ");
+	    addmsg(GET_MSG("fight.has_hit"));
 	    has_hit = FALSE;
 	}
 	if (mp->t_type == 'F')
@@ -428,7 +429,7 @@
     static char tbuf[MAXSTR] = { 't', 'h', 'e', ' ' };
 
     if (!see_monst(tp) && !on(player, SEEMONST))
-	return (terse ? "it" : "something");
+	return (terse ? GET_MSG("fight.it") : GET_MSG("fight.something"));
     else if (on(player, ISHALU))
     {
 	move(tp->t_pos.y, tp->t_pos.x);
@@ -437,11 +438,14 @@
 	    ch = rnd(26);
 	else
 	    ch -= 'A';
-	mname = monsters[ch].m_name;
+	mname = GET_MSG(monsters[ch].m_name);
     }
     else
-	mname = monsters[tp->t_type - 'A'].m_name;
-    strcpy(&tbuf[4], mname);
+	mname = GET_MSG(monsters[tp->t_type - 'A'].m_name);
+    if (isalpha(mname[0]))
+	strcpy(&tbuf[4], mname);
+    else
+	strcpy(tbuf, mname);
     return tbuf;
 }
 
@@ -564,7 +568,7 @@
 
     *tbuf = '\0';
     if (mname == 0)
-	strcpy(tbuf, "you");
+	strcpy(tbuf, GET_MSG("fight.you"));
     else
 	strcpy(tbuf, mname);
     if (upper)
@@ -582,10 +586,11 @@
     if (to_death)
 	return;
     if (weap->o_type == WEAPON)
-	addmsg("the %s hits ", weap_info[weap->o_which].oi_name);
+	addmsg(GET_MSG("fight.hit1"), GET_MSG(weap_info[weap->o_which].oi_name));
     else
-	addmsg("you hit ");
+	addmsg(GET_MSG("fight.hit2"), GET_MSG(weap_info[weap->o_which].oi_name));
     addmsg("%s", mname);
+    addmsg(GET_MSG("fight.hit3"));
     if (!noend)
 	endmsg();
 }
@@ -605,17 +610,18 @@
 	return;
     addmsg(prname(er, TRUE));
     if (terse)
-	s = " hit";
+	s = GET_MSG("fight.hit_success1");
     else
     {
+        addmsg(GET_MSG("fight.hit_success2"), prname(ee, FALSE));
 	i = rnd(4);
 	if (er != NULL)
 	    i += 4;
-	s = h_names[i];
+	s = GET_MSG(h_names[i]);
     }
     addmsg(s);
     if (!terse)
-	addmsg(prname(ee, FALSE));
+	addmsg(GET_MSG("fight.hit_success3"), prname(ee, FALSE));
     if (!noend)
 	endmsg();
 }
@@ -631,16 +637,17 @@
 
     if (to_death)
 	return;
-    addmsg(prname(er, TRUE));
+    addmsg(GET_MSG("fight.miss1"), prname(er, TRUE));
     if (terse)
 	i = 0;
     else
+        addmsg(GET_MSG("fight.miss2"), prname(ee, FALSE));
 	i = rnd(4);
     if (er != NULL)
 	i += 4;
-    addmsg(m_names[i]);
+    addmsg(GET_MSG(m_names[i]));
     if (!terse)
-	addmsg(" %s", prname(ee, FALSE));
+	addmsg(GET_MSG("fight.miss3"), prname(ee, FALSE));
     if (!noend)
 	endmsg();
 }
@@ -655,10 +662,11 @@
     if (to_death)
 	return;
     if (weap->o_type == WEAPON)
-	addmsg("the %s misses ", weap_info[weap->o_which].oi_name);
+	addmsg(GET_MSG("fight.bounce1"), GET_MSG(weap_info[weap->o_which].oi_name));
     else
-	addmsg("you missed ");
+	addmsg(GET_MSG("fight.bounce2"), GET_MSG(weap_info[weap->o_which].oi_name));
     addmsg(mname);
+    addmsg(GET_MSG("fight.bounce3"));
     if (!noend)
 	endmsg();
 }
@@ -739,16 +747,16 @@
     {
 	if (has_hit)
 	{
-	    addmsg(".  Defeated ");
+	    addmsg(GET_MSG("fight.defeated1"));
 	    has_hit = FALSE;
 	}
 	else
 	{
 	    if (!terse)
-		addmsg("you have ");
-	    addmsg("defeated ");
+		addmsg(GET_MSG("fight.defeated2"));
+	    addmsg(GET_MSG("fight.defeated3"));
 	}
-	msg(mname);
+	msg(GET_MSG("fight.defeated4"), mname);
     }
     /*
      * Do adjustments if he went up a level
diff -Naur rogue5.4.5x-src.orig/init.c rogue5.4.5x-src/init.c
--- rogue5.4.5x-src.orig/init.c	2017-07-07 12:01:06.000000000 +0900
+++ rogue5.4.5x-src/init.c	2025-08-02 14:24:23.782375812 +0900
@@ -79,148 +79,129 @@
  */
 
 const char *rainbow[] = {
-    "amber",
-    "aquamarine",
-    "black",
-    "blue",
-    "brown",
-    "clear",
-    "crimson",
-    "cyan",
-    "ecru",
-    "gold",
-    "green",
-    "grey",
-    "magenta",
-    "orange",
-    "pink",
-    "plaid",
-    "purple",
-    "red",
-    "silver",
-    "tan",
-    "tangerine",
-    "topaz",
-    "turquoise",
-    "vermilion",
-    "violet",
-    "white",
-    "yellow",
+    "init.color_amber",
+    "init.color_aquamarine",
+    "init.color_black",
+    "init.color_blue",
+    "init.color_brown",
+    "init.color_clear",
+    "init.color_crimson",
+    "init.color_cyan",
+    "init.color_ecru",
+    "init.color_gold",
+    "init.color_green",
+    "init.color_grey",
+    "init.color_magenta",
+    "init.color_orange",
+    "init.color_pink",
+    "init.color_plaid",
+    "init.color_purple",
+    "init.color_red",
+    "init.color_silver",
+    "init.color_tan",
+    "init.color_tangerine",
+    "init.color_topaz",
+    "init.color_turquoise",
+    "init.color_vermilion",
+    "init.color_violet",
+    "init.color_white",
+    "init.color_yellow",
 };
 
 #define NCOLORS (sizeof rainbow / sizeof (char *))
 
-static const char *sylls[] = {
-    "a", "ab", "ag", "aks", "ala", "an", "app", "arg", "arze", "ash",
-    "bek", "bie", "bit", "bjor", "blu", "bot", "bu", "byt", "comp",
-    "con", "cos", "cre", "dalf", "dan", "den", "do", "e", "eep", "el",
-    "eng", "er", "ere", "erk", "esh", "evs", "fa", "fid", "fri", "fu",
-    "gan", "gar", "glen", "gop", "gre", "ha", "hyd", "i", "ing", "ip",
-    "ish", "it", "ite", "iv", "jo", "kho", "kli", "klis", "la", "lech",
-    "mar", "me", "mi", "mic", "mik", "mon", "mung", "mur", "nej",
-    "nelg", "nep", "ner", "nes", "nes", "nih", "nin", "o", "od", "ood",
-    "org", "orn", "ox", "oxy", "pay", "ple", "plu", "po", "pot",
-    "prok", "re", "rea", "rhov", "ri", "ro", "rog", "rok", "rol", "sa",
-    "san", "sat", "sef", "seh", "shu", "ski", "sna", "sne", "snik",
-    "sno", "so", "sol", "sri", "sta", "sun", "ta", "tab", "tem",
-    "ther", "ti", "tox", "trol", "tue", "turs", "u", "ulk", "um", "un",
-    "uni", "ur", "val", "viv", "vly", "vom", "wah", "wed", "werg",
-    "wex", "whon", "wun", "xo", "y", "yot", "yu", "zant", "zeb", "zim",
-    "zok", "zon", "zum",
-};
-
 const STONE stones[] = {
-    { "agate",		 25},
-    { "alexandrite",	 40},
-    { "amethyst",	 50},
-    { "carnelian",	 40},
-    { "diamond",	300},
-    { "emerald",	300},
-    { "germanium",	225},
-    { "granite",	  5},
-    { "garnet",		 50},
-    { "jade",		150},
-    { "kryptonite",	300},
-    { "lapis lazuli",	 50},
-    { "moonstone",	 50},
-    { "obsidian",	 15},
-    { "onyx",		 60},
-    { "opal",		200},
-    { "pearl",		220},
-    { "peridot",	 63},
-    { "ruby",		350},
-    { "sapphire",	285},
-    { "stibotantalite",	200},
-    { "tiger eye",	 50},
-    { "topaz",		 60},
-    { "turquoise",	 70},
-    { "taaffeite",	300},
-    { "zircon",	 	 80},
+    { "init.stone_agate",		 25},
+    { "init.stone_alexandrite",		 40},
+    { "init.stone_amethyst",		 50},
+    { "init.stone_carnelian",		 40},
+    { "init.stone_diamond",		300},
+    { "init.stone_emerald",		300},
+    { "init.stone_germanium",		225},
+    { "init.stone_granite",		  5},
+    { "init.stone_garnet",		 50},
+    { "init.stone_jade",		150},
+    { "init.stone_kryptonite",		300},
+    { "init.stone_lapis_lazuli",	 50},
+    { "init.stone_moonstone",		 50},
+    { "init.stone_obsidian",		 15},
+    { "init.stone_onyx",		 60},
+    { "init.stone_opal",		200},
+    { "init.stone_pearl",		220},
+    { "init.stone_peridot",		 63},
+    { "init.stone_ruby",		350},
+    { "init.stone_sapphire",		285},
+    { "init.stone_stibotantalite",	200},
+    { "init.stone_tiger_eye",		 50},
+    { "init.stone_topaz",		 60},
+    { "init.stone_turquoise",		 70},
+    { "init.stone_taaffeite",		300},
+    { "init.stone_zircon",	 	 80},
 };
 
 #define NSTONES (sizeof stones / sizeof (STONE))
 
 const char *wood[] = {
-    "avocado wood",
-    "balsa",
-    "bamboo",
-    "banyan",
-    "birch",
-    "cedar",
-    "cherry",
-    "cinnibar",
-    "cypress",
-    "dogwood",
-    "driftwood",
-    "ebony",
-    "elm",
-    "eucalyptus",
-    "fall",
-    "hemlock",
-    "holly",
-    "ironwood",
-    "kukui wood",
-    "mahogany",
-    "manzanita",
-    "maple",
-    "oaken",
-    "persimmon wood",
-    "pecan",
-    "pine",
-    "poplar",
-    "redwood",
-    "rosewood",
-    "spruce",
-    "teak",
-    "walnut",
-    "zebrawood",
+    "init.wood_avocado_wood",
+    "init.wood_balsa",
+    "init.wood_bamboo",
+    "init.wood_banyan",
+    "init.wood_birch",
+    "init.wood_cedar",
+    "init.wood_cherry",
+    "init.wood_cinnibar",
+    "init.wood_cypress",
+    "init.wood_dogwood",
+    "init.wood_driftwood",
+    "init.wood_ebony",
+    "init.wood_elm",
+    "init.wood_eucalyptus",
+    "init.wood_fall",
+    "init.wood_hemlock",
+    "init.wood_holly",
+    "init.wood_ironwood",
+    "init.wood_kukui_wood",
+    "init.wood_mahogany",
+    "init.wood_manzanita",
+    "init.wood_maple",
+    "init.wood_oaken",
+    "init.wood_persimmon_wood",
+    "init.wood_pecan",
+    "init.wood_pine",
+    "init.wood_poplar",
+    "init.wood_redwood",
+    "init.wood_rosewood",
+    "init.wood_spruce",
+    "init.wood_teak",
+    "init.wood_walnut",
+    "init.wood_zebrawood",
 };
 
 #define NWOOD (sizeof wood / sizeof (char *))
 
 const char *metal[] = {
-    "aluminum",
-    "beryllium",
-    "bone",
-    "brass",
-    "bronze",
-    "copper",
-    "electrum",
-    "gold",
-    "iron",
-    "lead",
-    "magnesium",
-    "mercury",
-    "nickel",
-    "pewter",
-    "platinum",
-    "steel",
-    "silver",
-    "silicon",
-    "tin",
-    "titanium",
-    "tungsten",
-    "zinc",
+    "init.metal_aluminum",
+    "init.metal_beryllium",
+    "init.metal_bone",
+    "init.metal_brass",
+    "init.metal_bronze",
+    "init.metal_copper",
+    "init.metal_electrum",
+    "init.metal_gold",
+    "init.metal_iron",
+    "init.metal_lead",
+    "init.metal_magnesium",
+    "init.metal_mercury",
+    "init.metal_nickel",
+    "init.metal_pewter",
+    "init.metal_platinum",
+    "init.metal_steel",
+    "init.metal_silver",
+    "init.metal_silicon",
+    "init.metal_tin",
+    "init.metal_titanium",
+    "init.metal_tungsten",
+    "init.metal_zinc",
 };
 
 #define NMETAL (sizeof metal / sizeof (char *))
@@ -265,6 +246,7 @@
     const char *sp;
     char *cp;
     int i, nwords;
+    const char **sylls = get_sylls();
 
     for (i = 0; i < MAXSCROLLS; i++)
     {
@@ -275,7 +257,7 @@
 	    nsyl = rnd(3) + 1;
 	    while (nsyl--)
 	    {
-		sp = sylls[rnd((sizeof sylls) / (sizeof (char *)))];
+		sp = sylls[rnd(sylls_num)];
 		if (&cp[strlen(sp)] > &prbuf[MAXNAME])
 			break;
 		while (*sp)
@@ -443,7 +425,7 @@
     }
     printf("\nBad percentages for %s (bound = %d):\n", name, bound);
     for (end = &info[bound]; info < end; info++)
-	printf("%3d%% %s\n", info->oi_prob, info->oi_name);
+	printf("%3d%% %s\n", info->oi_prob, GET_MSG(info->oi_name));
     printf("[hit RETURN to continue]");
     fflush(stdout);
     while (getchar() != '\n')
@@ -459,5 +441,5 @@
 const char *
 pick_color(const char *col)
 {
-    return (on(player, ISHALU) ? rainbow[rnd(NCOLORS)] : col);
+    return (on(player, ISHALU) ? GET_MSG(rainbow[rnd(NCOLORS)]) : col);
 }
diff -Naur rogue5.4.5x-src.orig/io.c rogue5.4.5x-src/io.c
--- rogue5.4.5x-src.orig/io.c	2018-05-03 21:36:34.000000000 +0900
+++ rogue5.4.5x-src/io.c	2025-08-02 14:24:23.782375812 +0900
@@ -77,15 +77,17 @@
 endmsg(void)
 {
     int ch;
+    const char *msgMore;
 
     if (save_msg)
 	strcpy(huh, msgbuf);
     if (mpos)
     {
 	look(FALSE);
-	mvaddstr(0, mpos, "--More--");
-	mpos += 8;
-	refresh2();
+	msgMore = GET_MSG("io.more");
+	mvaddstr(0, mpos, msgMore);
+	mpos += mbstrlen(msgMore);
+	refresh();
 	if (!msg_esc)
 	    wait_for(stdscr, ' ');
 	else
@@ -112,7 +114,7 @@
     mpos = newpos;
     newpos = 0;
     msgbuf[0] = '\0';
-    refresh2();
+    refresh();
     return ~ESCAPE;
 }
 
@@ -122,7 +124,7 @@
     move(0, 0);
     clrtoeol();
     mpos = 0;
-    refresh2();
+    refresh();
     return;
 }
 
@@ -139,10 +141,10 @@
      * Do the printf into buf
      */
     vsprintf(buf, fmt, args);
-    if (strlen(buf) + newpos >= MAXMSG)
+    if (mbstrlen(buf) + newpos >= MAXMSG)
 	endmsg();
     strcat(msgbuf, buf);
-    newpos = (int) strlen(msgbuf);
+    newpos = (int) mbstrlen(msgbuf);
 }
 
 /*
@@ -224,10 +226,11 @@
     static int s_exp = 0;
     static char *state_name[] =
     {
-	"", "Hungry", "Weak", "Faint"
+	"io.normal", "io.hungry", "io.weak", "io.faint"
     };
 
     static int s_rname = FALSE;
+    const char *_state_name = NULL;
     /*
      * If nothing has changed since the last status, don't
      * bother.
@@ -262,20 +265,21 @@
     s_exp = pstats.s_exp;
     s_hungry = hungry_state;
     s_rname = rname;
+    _state_name = GET_MSG(state_name[hungry_state]);
 
     if (stat_msg)
     {
 	move(0, 0);
 	if (rname == TRUE)
-	    msg("Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  %s  %s",
+	    msg(GET_MSG("io.state_rank"),
 		level, purse, hpwidth, pstats.s_hpt, hpwidth, max_hp, pstats.s_str,
 		max_stats.s_str, 10 - s_arm, class_name[pstats.s_lvl - 1],
-		state_name[hungry_state]);
+		_state_name);
 	else
-	    msg("Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  Exp: %d/%ld  %s",
+	    msg(GET_MSG("io.state_level"),
 		level, purse, hpwidth, pstats.s_hpt, hpwidth, max_hp, pstats.s_str,
 		max_stats.s_str, 10 - s_arm, pstats.s_lvl, pstats.s_exp,
-		state_name[hungry_state]);
+		_state_name);
     }
     else
     {
@@ -285,15 +289,15 @@
 	    attrset(COLOR_PAIR(9) | A_BOLD);
 
     if (rname == TRUE)
-	printw("Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  %s  %s",
+	printw(GET_MSG("io.state_rank"),
 	    level, purse, hpwidth, pstats.s_hpt, hpwidth, max_hp, pstats.s_str,
 	    max_stats.s_str, 10 - s_arm, class_name[pstats.s_lvl - 1],
-	    state_name[hungry_state]);
+	    _state_name);
     else
-	printw("Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  Exp: %d/%d  %s",
+	printw(GET_MSG("io.state_level"),
 	    level, purse, hpwidth, pstats.s_hpt, hpwidth, max_hp, pstats.s_str,
 	    max_stats.s_str, 10 - s_arm, pstats.s_lvl, pstats.s_exp,
-	    state_name[hungry_state]);
+	    _state_name);
 
 	attrset(COLOR_PAIR(0));
     }
diff -Naur rogue5.4.5x-src.orig/main.c rogue5.4.5x-src/main.c
--- rogue5.4.5x-src.orig/main.c	2021-03-25 09:22:06.000000000 +0900
+++ rogue5.4.5x-src/main.c	2025-08-02 14:24:23.782375812 +0900
@@ -43,14 +43,18 @@
 #endif
     setlocale(LC_ALL,"");
 
+    lang = setlocale(LC_ALL, NULL); /* get current locale name */
+
+    message_init();
     md_init();
+    extern_init();
 
 #ifdef MASTER
     /*
      * Check to see if he is a wizard
      */
     if (argc >= 2 && argv[1][0] == '\0')
-	if (strcmp(PASSWD, md_crypt(md_getpass("wizard's password: "), "mT")) == 0)
+	if (strcmp(PASSWD, md_crypt(md_getpass(GET_MSG("main.wizard_password")), "mT")) == 0)
 	{
 	    wizard = TRUE;
 	    player.t_flags |= SEEMONST;
@@ -192,7 +196,7 @@
 	fclose(fp_title);
     }
     if (whoami[0] == '?') {
-	printf("Who are you? ");
+	printf(GET_MSG("main.who_are_you"));
 	fflush(stdout);
 	(void) fgets(whoami, MAXSTR, stdin);
 	whoami[strlen(whoami) - 1] = '\0';
@@ -214,10 +218,10 @@
 	    my_exit(1);
 #ifdef MASTER
     if (wizard)
-	printf("Hello %s, welcome to dungeon #%d\n", whoami, dnum);
+	printf(GET_MSG("main.hello_wiz"), whoami, dnum);
     else
 #endif
-	printf("Hello %s, just a moment while I dig the dungeon...\n", whoami);
+	printf(GET_MSG("main.hello"), whoami);
     if (idscr_md == TRUE || pc_md == TRUE) {
 	idscr_md = TRUE;
 	set_scroll_2();
@@ -244,7 +248,7 @@
     if (LINES < NUMLINES || COLS < NUMCOLS)
     {
 	endwin();
-	printf("\nSorry, the screen must be at least %dx%d\n", NUMLINES, NUMCOLS);
+	printf(GET_MSG("main.screen_must_be"), NUMLINES, NUMCOLS);
 /*	endwin(); */
 	my_exit(1);
     }
@@ -279,7 +283,7 @@
 endit(int sig)
 {
     NOOP(sig);
-    fatal("Okay, bye bye!\n");
+    fatal(GET_MSG("main.ok_bye_bye"));
 }
 
 /*
@@ -425,17 +429,17 @@
     if (!q_comm)
 	mpos = 0;
     getyx(curscr, oy, ox);
-    msg("really quit?");
+    msg(GET_MSG("main.really_quit"));
     if (readchar() == 'y')
     {
 	signal(SIGINT, leave);
 	clear();
-	mvprintw(LINES - 2, 0, "You quit with %d gold pieces", purse);
+	mvprintw(LINES - 2, 0, GET_MSG("main.with_gold"), purse);
 	move(LINES - 1, 0);
 	refresh();
 	writelog(purse, 1, 0);
 	score(purse, 1, 0);
-	printf("[Press return to exit]\n");
+	printf(GET_MSG("main.press_return"));
 	fflush(NULL);
 	getchar();
 	my_exit(0);
@@ -519,6 +523,7 @@
 my_exit(int st)
 {
     resetltchars();
+    message_free();
     exit(st);
 }
 
diff -Naur rogue5.4.5x-src.orig/mdport.c rogue5.4.5x-src/mdport.c
--- rogue5.4.5x-src.orig/mdport.c	2021-03-25 09:32:52.000000000 +0900
+++ rogue5.4.5x-src/mdport.c	2025-08-02 14:24:23.786375890 +0900
@@ -414,7 +414,7 @@
 #endif
 }
 
-char *
+const char *
 md_getusername(void)
 {
     static char login[80];
@@ -644,7 +644,7 @@
 }
 
 char *
-md_getpass(char *prompt)
+md_getpass(const char *prompt)
 {
 #ifndef HAVE_GETPASS
     static char password_buffer[9];
@@ -1390,7 +1390,7 @@
 
     uindex = -1;
 
-    return(ch & 0x7F);
+    return(ch/* & 0x7F*/);
 }
 
 #if defined(LOADAV) && defined(HAVE_NLIST_H) && defined(HAVE_NLIST)
diff -Naur rogue5.4.5x-src.orig/messages.c rogue5.4.5x-src/messages.c
--- rogue5.4.5x-src.orig/messages.c	1970-01-01 09:00:00.000000000 +0900
+++ rogue5.4.5x-src/messages.c	2025-08-02 14:24:23.786375890 +0900
@@ -0,0 +1,1889 @@
+#include <stdio.h>
+#include <string.h>
+#include <curses.h>
+#include "rogue.h"
+
+#define make_hashtable(ht, data) \
+    do { \
+	(ht) = create_hash_table(sizeof(data) / sizeof((data)[0])); \
+	build_hash_table((ht), (data), sizeof(data) / sizeof((data)[0])); \
+    } while (0)
+
+typedef struct {
+    const char *key;
+    const char *value;
+} message_entry;
+
+struct hashtable {
+    message_entry **table;
+    size_t size;
+};
+
+unsigned int
+hash(const char *str, size_t size)
+{
+    unsigned long hash = 5381;
+    int c;
+    while ((c = *str++)) {
+        hash = ((hash << 5) + hash) + c;  // hash * 33 + c
+    }
+    return hash % size;
+}
+
+struct hashtable *
+create_hash_table(size_t size)
+{
+    struct hashtable *ht = malloc(sizeof(struct hashtable));
+    if (!ht) return NULL;
+
+    ht->table = calloc(size, sizeof(message_entry *));
+    if (!ht->table) {
+        free(ht);
+        return NULL;
+    }
+
+    ht->size = size;
+    return ht;
+}
+
+void
+insert_hash_entry(struct hashtable *ht, const message_entry *source)
+{
+    unsigned int idx;
+
+    if (source->key == NULL) return;
+
+    idx = hash(source->key, ht->size);
+
+    while (ht->table[idx] != NULL) {
+        idx = (idx + 1) % ht->size;
+    }
+
+    ht->table[idx] = (message_entry *)source;
+}
+
+void
+build_hash_table(struct hashtable *ht, const message_entry entries[], size_t count)
+{
+    for (size_t i = 0; i < count; ++i) {
+        insert_hash_entry(ht, &entries[i]);
+    }
+}
+
+const message_entry *
+get_hash_item(const struct hashtable *ht, const char *key)
+{
+    unsigned int idx = hash(key, ht->size);
+
+    while (ht->table[idx] != NULL) {
+        if (strcmp(ht->table[idx]->key, key) == 0) {
+            return ht->table[idx];
+        }
+        idx = (idx + 1) % ht->size;
+    }
+
+    return NULL;
+}
+
+void
+free_hash_table(struct hashtable *ht)
+{
+    if (ht) {
+        free(ht->table);
+        free(ht);
+    }
+}
+
+static struct hashtable *message_hash_table;
+static const message_entry message_table[] = {
+    /* common */
+    { "lang", "en" },
+
+    /* colors */
+    { "red", "red" },
+    { "blue", "blue" },
+    { "silver", "silver" },
+    { "gold", "gold" },
+
+    /* armor.c */
+    { "armor.wear", "wear" },
+    { "armor.already_wearing", "you are already wearing some" },
+    { "armor.need_take_off", ".  You'll have to take it off first" },
+    { "armor.cant_wear", "you can't wear that" },
+    { "armor.you_are_now", "you are now " },
+    { "armor.wearing", "wearing %s" },
+    { "armor.not_wearing", "not wearing armor" },
+    { "armor.you_arent_wearing", "you aren't wearing any armor" },
+    { "armor.was", "was" },
+    { "armor.used_to_be", "you used to be" },
+    { "armor.wearing_with_label", " wearing %c) %s" },
+
+    /* command.c */
+    { "command.hello1", "Hello %s.  Welcome to the Dungeons of Doom #%d." },
+    { "command.hello2", "Hello %s.  Welcome to the Dungeons of Doom." },
+    { "command.move_again", "you can move again" },
+    { "command.nothing_to_pick_up1", "" },
+    { "command.nothing_to_pick_up2", "there is " },
+    { "command.nothing_to_pick_up3", "nothing here" },
+    { "command.nothing_to_pick_up4", " to pick up" },
+    { "command.i_see", "I see " },
+    { "command.no_monster", "no monster there" },
+    { "command.command_yet", "you haven't typed a command yet" },
+    { "command.no_trap1", "You have found " },
+    { "command.no_trap2", "no trap there" },
+    { "command.not_wizard_any_more", "not wizard any more" },
+    { "command.suddenly_arnold", "you are suddenly as smart as Ken Arnold in dungeon #%d" },
+    { "command.sorry", "sorry" },
+    { "command.weapon_wielding", "wielding" },
+    { "command.armor_wearing", "wearing" },
+    { "command.ring_wearing", "wearing" },
+    { "command.ring_left", "(L)" },
+    { "command.ring_left_hand", "on left hand" },
+    { "command.ring_right", "(R)" },
+    { "command.ring_right_hand", "on right hand" },
+    { "command.inpack", "inpack = %d" },
+    { "command.food_left", "food left: %d" },
+    { "command.stick_charge", "charge" },
+    { "command.illegal_command", "illegal command '%s'" },
+    { "command.secret_door", "a secret door" },
+    { "command.you_found1", "you found " },
+    { "command.you_found2", "" },
+    { "command.help", "character you want help for (* for all): " },
+    { "command.unknown_char_s", "unknown character '%s'" },
+    { "command.press_space", "--Press space to continue--" },
+    { "command.ident_wall1", "wall of a room" },
+    { "command.ident_wall2", "wall of a room" },
+    { "command.ident_gold", "gold" },
+    { "command.ident_staircase", "a staircase" },
+    { "command.ident_door", "door" },
+    { "command.ident_floor", "room floor" },
+    { "command.ident_you", "you" },
+    { "command.ident_passage", "passage" },
+    { "command.ident_trap", "trap" },
+    { "command.ident_potion", "potion" },
+    { "command.ident_scroll", "scroll" },
+    { "command.ident_food", "food" },
+    { "command.ident_weapon", "weapon" },
+    { "command.ident_solid_rock", "solid rock" },
+    { "command.ident_armor", "armor" },
+    { "command.ident_yendor_amulet", "the Amulet of Yendor" },
+    { "command.ident_ring", "ring" },
+    { "command.ident_wand_or_staff", "wand or staff" },
+    { "command.what_want_ident", "what do you want identified? " },
+    { "command.unknown_char", "unknown character" },
+    { "command.no_way_down", "I see no way down" },
+    { "command.feel_wrench_gut", "you feel a wrenching sensation in your gut" },
+    { "command.magically_blocked", "your way is magically blocked" },
+    { "command.no_way_up", "I see no way up" },
+    { "command.floating_off", "You can't.  You're floating off the ground!" },
+    { "command.call", "call" },
+    { "command.cant_call_anything", "you can't call that anything" },
+    { "command.already_identified", "that has already been identified" },
+    { "command.called1", "Was " },
+    { "command.called2", "called \"%s\"" },
+    { "command.call_it", "call it: " },
+    { "command.what_call_it", "what do you want to call it? " },
+    { "command.you_are_how1", "you are %s (" },
+    { "command.you_are_how2", "" },
+    { "command.you_are_nothing_how1", "you are " },
+    { "command.you_are_nothing_how2", "%s nothing" },
+
+    /* daemons.c */
+    { "daemons.feel_less", "you feel less %s now" },
+    { "daemons.trippy", "trippy" },
+    { "daemons.confused", "confused" },
+    { "daemons.far_out", "far out!  Everything is all cosmic again" },
+    { "daemons.darkness_lifts", "the veil of darkness lifts" },
+    { "daemons.feel_slowing_down", "you feel yourself slowing down" },
+    { "daemons.munchies_overpower", "the munchies overpower your motor capabilities.  " },
+    { "daemons.feel_too_weak", "you feel too weak from lack of food.  " },
+    { "daemons.freak_out", "You freak out" },
+    { "daemons.faint", "You faint" },
+    { "daemons.munchies_interfering", "the munchies are interfering with your motor capabilites" },
+    { "daemons.feel_weak", "you are starting to feel weak" },
+    { "daemons.get_munchies", "getting the munchies" },
+    { "daemons.get_hungry", "getting hungry" },
+    { "daemons.get_munchies2", "you are getting the munchies" },
+    { "daemons.get_hungry2", "you are starting to get hungry" },
+    { "daemons.looks_boring", "Everything looks SO boring now." },
+    { "daemons.hit_ground", "bummer!  You've hit the ground" },
+    { "daemons.float_gently_ground", "you float gently to the ground" },
+
+    /* extern.c */
+    { "extern.flame", "flame" },
+    { "extern.fruit", "slime-mold" },
+    { "extern.inv_style_overwrite", "Overwrite" },
+    { "extern.inv_style_slow", "Slow" },
+    { "extern.inv_style_clear", "Clear" },
+    { "extern.trap_trapdoor", "a trapdoor" },
+    { "extern.trap_arrow", "an arrow trap" },
+    { "extern.trap_sleeping_gas", "a sleeping gas trap" },
+    { "extern.trap_beartrap", "a beartrap" },
+    { "extern.trap_teleport", "a teleport trap" },
+    { "extern.trap_poison_dart", "a poison dart trap" },
+    { "extern.trap_rust", "a rust trap" },
+    { "extern.trap_mysterious", "a mysterious trap" },
+    { "extern.monster_aquator", "aquator" },
+    { "extern.monster_bat", "bat" },
+    { "extern.monster_centaur", "centaur" },
+    { "extern.monster_dragon", "dragon" },
+    { "extern.monster_emu", "emu" },
+    { "extern.monster_venus_flytrap", "venus flytrap" },
+    { "extern.monster_griffin", "griffin" },
+    { "extern.monster_hobgoblin", "hobgoblin" },
+    { "extern.monster_ice_monster", "ice monster" },
+    { "extern.monster_jabberwock", "jabberwock" },
+    { "extern.monster_kestrel", "kestrel" },
+    { "extern.monster_leprechaun", "leprechaun" },
+    { "extern.monster_medusa", "medusa" },
+    { "extern.monster_nymph", "nymph" },
+    { "extern.monster_orc", "orc" },
+    { "extern.monster_phantom", "phantom" },
+    { "extern.monster_quagga", "quagga" },
+    { "extern.monster_rattlesnake", "rattlesnake" },
+    { "extern.monster_snake", "snake" },
+    { "extern.monster_slime", "slime" },
+    { "extern.monster_troll", "troll" },
+    { "extern.monster_black_unicorn", "black unicorn" },
+    { "extern.monster_ur-vile", "ur-vile" },
+    { "extern.monster_vampire", "vampire" },
+    { "extern.monster_wraith", "wraith" },
+    { "extern.monster_xeroc", "xeroc" },
+    { "extern.monster_yeti", "yeti" },
+    { "extern.monster_zombie", "zombie" },
+    { "extern.arm_leather_armor", "leather armor" },
+    { "extern.arm_ring_mail", "ring mail" },
+    { "extern.arm_studded_leather_armor", "studded leather armor" },
+    { "extern.arm_scale_mail", "scale mail" },
+    { "extern.arm_chain_mail", "chain mail" },
+    { "extern.arm_splint_mail", "splint mail" },
+    { "extern.arm_banded_mail", "banded mail" },
+    { "extern.arm_plate_mail", "plate mail" },
+    { "extern.pot_confusion", "confusion" },
+    { "extern.pot_hallucination", "hallucination" },
+    { "extern.pot_poison", "poison" },
+    { "extern.pot_gain_strength", "gain strength" },
+    { "extern.pot_see_invisible", "see invisible" },
+    { "extern.pot_healing", "healing" },
+    { "extern.pot_monster_detection", "monster detection" },
+    { "extern.pot_magic_detection", "magic detection" },
+    { "extern.pot_raise_level", "raise level" },
+    { "extern.pot_extra_healing", "extra healing" },
+    { "extern.pot_haste_self", "haste self" },
+    { "extern.pot_restore_strength", "restore strength" },
+    { "extern.pot_blindness", "blindness" },
+    { "extern.pot_levitation", "levitation" },
+    { "extern.pot2_paralysis", "paralysis" },
+    { "extern.pot2_thirst_quenching", "thirst quenching" },
+    { "extern.ring_protection", "protection" },
+    { "extern.ring_add_strength", "add strength" },
+    { "extern.ring_sustain_strength", "sustain strength" },
+    { "extern.ring_searching", "searching" },
+    { "extern.ring_see_invisible", "see invisible" },
+    { "extern.ring_adornment", "adornment" },
+    { "extern.ring_aggravate_monster", "aggravate monster" },
+    { "extern.ring_dexterity", "dexterity" },
+    { "extern.ring_increase_damage", "increase damage" },
+    { "extern.ring_regeneration", "regeneration" },
+    { "extern.ring_slow_digestion", "slow digestion" },
+    { "extern.ring_teleportation", "teleportation" },
+    { "extern.ring_stealth", "stealth" },
+    { "extern.ring_maintain_armor", "maintain armor" },
+    { "extern.scr_monster_confusion", "monster confusion" },
+    { "extern.scr_magic_mapping", "magic mapping" },
+    { "extern.scr_hold_monster", "hold monster" },
+    { "extern.scr_sleep", "sleep" },
+    { "extern.scr_enchant_armor", "enchant armor" },
+    { "extern.scr_identify_potion", "identify potion" },
+    { "extern.scr_identify_scroll", "identify scroll" },
+    { "extern.scr_identify_weapon", "identify weapon" },
+    { "extern.scr_identify_armor", "identify armor" },
+    { "extern.scr_identify_ring_wand_or_staff", "identify ring, wand or staff" },
+    { "extern.scr_scare_monster", "scare monster" },
+    { "extern.scr_food_detection", "food detection" },
+    { "extern.scr_teleportation", "teleportation" },
+    { "extern.scr_enchant_weapon", "enchant weapon" },
+    { "extern.scr_create_monster", "create monster" },
+    { "extern.scr_remove_curse", "remove curse" },
+    { "extern.scr_aggravate_monsters", "aggravate monsters" },
+    { "extern.scr_protect_armor", "protect armor" },
+    { "extern.scr2_identify", "identify" },
+    { "extern.scr2_blank_paper", "blank paper" },
+    { "extern.scr2_vorpalize_weapon", "vorpalize weapon" },
+    { "extern.weap_mace", "mace" },
+    { "extern.weap_long_sword", "long sword" },
+    { "extern.weap_short_bow", "short bow" },
+    { "extern.weap_arrow", "arrow" },
+    { "extern.weap_dagger", "dagger" },
+    { "extern.weap_two_handed_sword", "two handed sword" },
+    { "extern.weap_dart", "dart" },
+    { "extern.weap_shuriken", "shuriken" },
+    { "extern.weap_spear", "spear" },
+    { "extern.weap2_crossbow_bolt", "crossbow bolt" },
+    { "extern.weap2_crossbow", "crossbow" },
+    { "extern.ws_light", "light" },
+    { "extern.ws_invisibility", "invisibility" },
+    { "extern.ws_lightning", "lightning" },
+    { "extern.ws_fire", "fire" },
+    { "extern.ws_cold", "cold" },
+    { "extern.ws_polymorph", "polymorph" },
+    { "extern.ws_magic_missile", "magic missile" },
+    { "extern.ws_haste_monster", "haste monster" },
+    { "extern.ws_slow_monster", "slow monster" },
+    { "extern.ws_drain_life", "drain life" },
+    { "extern.ws_nothing", "nothing" },
+    { "extern.ws_teleport_away", "teleport away" },
+    { "extern.ws_teleport_to", "teleport to" },
+    { "extern.ws_cancellation", "cancellation" },
+    { "extern.ws_striking", "striking" },
+
+    /* fight.c */
+    { "fight.hit_excellent", " scored an excellent hit on " },
+    { "fight.hit_hit", " hit " },
+    { "fight.hit_injured", " have injured " },
+    { "fight.hit_swing", " swing and hit " },
+    { "fight.hit_scored", " scored an excellent hit on " },
+    { "fight.hit_hit2", " hit " },
+    { "fight.hit_injured2", " has injured " },
+    { "fight.hit_swing2", " swings and hits " },
+    { "fight.miss_miss", " miss" },
+    { "fight.miss_swing", " swing and miss" },
+    { "fight.miss_barely", " barely miss" },
+    { "fight.miss_dont_hit", " don't hit" },
+    { "fight.miss_miss2", " misses" },
+    { "fight.miss_swing2", " swings and misses" },
+    { "fight.miss_barely2", " barely misses" },
+    { "fight.miss_dont_hit2", " doesn't hit" },
+    { "fight.slime_devided", "The slime divides.  Ick!" },
+    { "fight.nasty_critter", "heavy!  That's a nasty critter!" },
+    { "fight.wait_xeroc", "wait!  That's a xeroc!" },
+    { "fight.hands_stop_glowing", "your hands stop glowing %s" },
+    { "fight.confused", "%s appears confused" },
+    { "fight.has_hit", ".  " },
+    { "fight.frozen1", "you are frozen" },
+    { "fight.frozen2", " by the %s" },
+    { "fight.frozen3", "" },
+    { "fight.bite_weaker", "you feel a bite in your leg and now feel weaker" },
+    { "fight.bite_weakened", "a bite has weakened you" },
+    { "fight.bite_momentarily_weaked", "a bite momentarily weakens you" },
+    { "fight.bite_no_effect", "bite has no effect" },
+    { "fight.suddenly_weaker", "you suddenly feel weaker" },
+    { "fight.purse_lighter", "your purse feels lighter" },
+    { "fight.she_stole", "she stole %s!" },
+    { "fight.it", "it" },
+    { "fight.something", "something" },
+    { "fight.you", "you" },
+    { "fight.hit1", "the %s hits " },
+    { "fight.hit2", "you hit " },
+    { "fight.hit3", "" },
+    { "fight.hit_success1", " hit" },
+    { "fight.hit_success2", "" },
+    { "fight.hit_success3", "%s" },
+    { "fight.miss1", "%s" },
+    { "fight.miss2", "" },
+    { "fight.miss3", " %s" },
+    { "fight.bounce1", "the %s misses " },
+    { "fight.bounce2", "you missed " },
+    { "fight.bounce3", "" },
+    { "fight.defeated1", ".  Defeated " },
+    { "fight.defeated2", "you have " },
+    { "fight.defeated3", "defeated " },
+    { "fight.defeated4", "%s" },
+
+    /* init.c */
+    { "init.color_amber", "amber" },
+    { "init.color_aquamarine", "aquamarine" },
+    { "init.color_black", "black" },
+    { "init.color_blue", "blue" },
+    { "init.color_brown", "brown" },
+    { "init.color_clear", "clear" },
+    { "init.color_crimson", "crimson" },
+    { "init.color_cyan", "cyan" },
+    { "init.color_ecru", "ecru" },
+    { "init.color_gold", "gold" },
+    { "init.color_green", "green" },
+    { "init.color_grey", "grey" },
+    { "init.color_magenta", "magenta" },
+    { "init.color_orange", "orange" },
+    { "init.color_pink", "pink" },
+    { "init.color_plaid", "plaid" },
+    { "init.color_purple", "purple" },
+    { "init.color_red", "red" },
+    { "init.color_silver", "silver" },
+    { "init.color_tan", "tan" },
+    { "init.color_tangerine", "tangerine" },
+    { "init.color_topaz", "topaz" },
+    { "init.color_turquoise", "turquoise" },
+    { "init.color_vermilion", "vermilion" },
+    { "init.color_violet", "violet" },
+    { "init.color_white", "white" },
+    { "init.color_yellow", "yellow" },
+    { "init.stone_agate", "agate" },
+    { "init.stone_alexandrite", "alexandrite" },
+    { "init.stone_amethyst", "amethyst" },
+    { "init.stone_carnelian", "carnelian" },
+    { "init.stone_diamond", "diamond" },
+    { "init.stone_emerald", "emerald" },
+    { "init.stone_germanium", "germanium" },
+    { "init.stone_granite", "granite" },
+    { "init.stone_garnet", "garnet" },
+    { "init.stone_jade", "jade" },
+    { "init.stone_kryptonite", "kryptonite" },
+    { "init.stone_lapis_lazuli", "lapis lazuli" },
+    { "init.stone_moonstone", "moonstone" },
+    { "init.stone_obsidian", "obsidian" },
+    { "init.stone_onyx", "onyx" },
+    { "init.stone_opal", "opal" },
+    { "init.stone_pearl", "pearl" },
+    { "init.stone_peridot", "peridot" },
+    { "init.stone_ruby", "ruby" },
+    { "init.stone_sapphire", "sapphire" },
+    { "init.stone_stibotantalite", "stibotantalite" },
+    { "init.stone_tiger_eye", "tiger eye" },
+    { "init.stone_topaz", "topaz" },
+    { "init.stone_turquoise", "turquoise" },
+    { "init.stone_taaffeite", "taaffeite" },
+    { "init.stone_zircon", "zircon" },
+    { "init.wood_avocado_wood", "avocado wood" },
+    { "init.wood_balsa", "balsa" },
+    { "init.wood_bamboo", "bamboo" },
+    { "init.wood_banyan", "banyan" },
+    { "init.wood_birch", "birch" },
+    { "init.wood_cedar", "cedar" },
+    { "init.wood_cherry", "cherry" },
+    { "init.wood_cinnibar", "cinnibar" },
+    { "init.wood_cypress", "cypress" },
+    { "init.wood_dogwood", "dogwood" },
+    { "init.wood_driftwood", "driftwood" },
+    { "init.wood_ebony", "ebony" },
+    { "init.wood_elm", "elm" },
+    { "init.wood_eucalyptus", "eucalyptus" },
+    { "init.wood_fall", "fall" },
+    { "init.wood_hemlock", "hemlock" },
+    { "init.wood_holly", "holly" },
+    { "init.wood_ironwood", "ironwood" },
+    { "init.wood_kukui_wood", "kukui wood" },
+    { "init.wood_mahogany", "mahogany" },
+    { "init.wood_manzanita", "manzanita" },
+    { "init.wood_maple", "maple" },
+    { "init.wood_oaken", "oaken" },
+    { "init.wood_persimmon_wood", "persimmon wood" },
+    { "init.wood_pecan", "pecan" },
+    { "init.wood_pine", "pine" },
+    { "init.wood_poplar", "poplar" },
+    { "init.wood_redwood", "redwood" },
+    { "init.wood_rosewood", "rosewood" },
+    { "init.wood_spruce", "spruce" },
+    { "init.wood_teak", "teak" },
+    { "init.wood_walnut", "walnut" },
+    { "init.wood_zebrawood", "zebrawood" },
+    { "init.metal_aluminum", "aluminum" },
+    { "init.metal_beryllium", "beryllium" },
+    { "init.metal_bone", "bone" },
+    { "init.metal_brass", "brass" },
+    { "init.metal_bronze", "bronze" },
+    { "init.metal_copper", "copper" },
+    { "init.metal_electrum", "electrum" },
+    { "init.metal_gold", "gold" },
+    { "init.metal_iron", "iron" },
+    { "init.metal_lead", "lead" },
+    { "init.metal_magnesium", "magnesium" },
+    { "init.metal_mercury", "mercury" },
+    { "init.metal_nickel", "nickel" },
+    { "init.metal_pewter", "pewter" },
+    { "init.metal_platinum", "platinum" },
+    { "init.metal_steel", "steel" },
+    { "init.metal_silver", "silver" },
+    { "init.metal_silicon", "silicon" },
+    { "init.metal_tin", "tin" },
+    { "init.metal_titanium", "titanium" },
+    { "init.metal_tungsten", "tungsten" },
+    { "init.metal_zinc", "zinc" },
+
+    /* io.c */
+    { "io.more", "--More--" },
+    { "io.normal", "" },
+    { "io.hungry", "Hungry" },
+    { "io.weak", "Weak" },
+    { "io.faint", "Faint" },
+    { "io.state_rank", "Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  %s  %s" },
+    { "io.state_level", "Level: %d  Gold: %-5d  Hp: %*d(%*d)  Str: %2d(%d)  Arm: %-2d  Exp: %d/%d  %s" },
+
+    /* main.c */
+    { "main.wizard_password", "wizard's password: " },
+    { "main.who_are_you", "Who are you? " },
+    { "main.hello_wiz", "Hello %s, welcome to dungeon #%d\n" },
+    { "main.hello", "Hello %s, just a moment while I dig the dungeon...\n" },
+    { "main.screen_must_be", "\nSorry, the screen must be at least %dx%d\n" },
+    { "main.ok_bye_bye", "Okay, bye bye!\n" },
+    { "main.really_quit", "really quit?" },
+    { "main.with_gold", "You quit with %d gold pieces" },
+    { "main.press_return", "[Press return to exit]\n" },
+
+    /* misc.c */
+    { "misc.eat", "eat" },
+    { "misc.get_ill", "ugh, you would get ill if you ate that" },
+    { "misc.inedible", "that's Inedible!" },
+    { "misc.yummy", "my, that was a yummy %s" },
+    { "misc.taste_awful", "%s, this food tastes awful" },
+    { "misc.taste_bummer", "bummer" },
+    { "misc.taste_yuk", "yuk" },
+    { "misc.taste_good", "%s, that tasted good" },
+    { "misc.taste_wow", "oh, wow" },
+    { "misc.taste_yum", "yum" },
+    { "misc.achieve_rank", "and achieve the rank of \"%s\"" },
+    { "misc.welcome_level", "welcome to level %d" },
+    { "misc.exhaustion_faint", "you faint from exhaustion" },
+    { "misc.already", "That's already " },
+    { "misc.in_use", "in use" },
+    { "misc.which_dir", "which direction? " },
+    { "misc.direction", "direction: " },
+    { "misc.call_it1", "call it: " },
+    { "misc.call_it2", "what do you want to call it? " },
+
+    /* monsters.c */
+    { "monsters.start_wandering", "started a wandering %s" },
+    { "monsters.cant_find", "can't find monster in wake_monster" },
+    { "monsters.gaze_confused1", "%s" },
+    { "monsters.gaze_confused2", "'" },
+    { "monsters.gaze_confused3", "s gaze has confused you" },
+
+    /* move.c */
+    { "move.stuck_trap", "you are still stuck in the bear trap" },
+    { "move.being_held", "you are being held" },
+    { "move.fell_trap", "you fell into a trap!" },
+    { "move.caught_trap", "you are caught in a bear trap" },
+    { "move.myst_0", "you are suddenly in a parallel dimension" },
+    { "move.myst_1", "the light in here suddenly seems %s" },
+    { "move.myst_2", "you feel a sting in the side of your neck" },
+    { "move.myst_3", "multi-colored lines swirl around you, then fade" },
+    { "move.myst_4", "a %s light flashes in your eyes" },
+    { "move.myst_5", "a spike shoots past your ear!" },
+    { "move.myst_6", "%s sparks dance across your armor" },
+    { "move.myst_7", "you suddenly feel very thirsty" },
+    { "move.myst_8", "you feel time speed up suddenly" },
+    { "move.myst_9", "time now seems to be going slower" },
+    { "move.myst_10", "you pack turns %s!" },
+    { "move.fall_asleep", "a strange white mist envelops you and you fall asleep" },
+    { "move.arrow_killed", "an arrow killed you" },
+    { "move.arrow_shot", "oh no! An arrow shot you" },
+    { "move.arrow_past", "an arrow shoots past you" },
+    { "move.dart_whizzes", "a small dart whizzes by your ear and vanishes" },
+    { "move.dart_killed", "a poisoned dart killed you" },
+    { "move.dart_hit", "a small dart just hit you in the shoulder" },
+    { "move.water_hit", "a gush of water hits you on the head" },
+    { "move.rust_vanishes", "the rust vanishes instantly" },
+    { "move.armor_weaker", "your armor appears to be weaker now. Oh my!" },
+    { "move.armor_weakens", "your armor weakens" },
+
+    /* options */
+    { "options.param_terse", "Terse output" },
+    { "options.param_flush", "Flush typeahead during battle" },
+    { "options.param_jump", "Show position only at end of run" },
+    { "options.param_seefloor", "Show the lamp-illuminated floor" },
+    { "options.param_passgo", "Follow turnings in passageways" },
+    { "options.param_tombstone", "Print out tombstone when killed" },
+    { "options.param_inven", "Inventory style" },
+    { "options.param_color", "Use color mode" },
+    { "options.param_bright", "Change bright color mode" },
+    { "options.param_rank", "Rank name" },
+    { "options.param_slime", "Slime & Ur-vile" },
+    { "options.param_idscrl", "1 kind of identify scroll [fixed]" },
+    { "options.param_darkroom", "Exist dark rooms" },
+    { "options.param_mazeroom", "Exist maze rooms" },
+    { "options.param_pcmode", "Pc mode [fixed]" },
+    { "options.param_name", "Name" },
+    { "options.param_fruit", "Fruit" },
+    { "options.param_file", "Save file" },
+    { "options.press_space", "--Press space to continue--" },
+    { "options.true", "True" },
+    { "options.false", "False" },
+    { "options.true_false", "(T or F)" },
+    { "options.styles", "(O, S, or C)" },
+
+    /* pack.c */
+    { "pack.scroll_dust", "the scroll turns to dust as you pick it up" },
+    { "pack.have_item1", "you now have " },
+    { "pack.have_item2", "%s (%c)" },
+    { "pack.no_room1", "there's " },
+    { "pack.no_room2", "no room" },
+    { "pack.no_room3", " in your pack" },
+    { "pack.empty_handed1", "empty handed" },
+    { "pack.empty_no_appropriate1", "nothing appropriate" },
+    { "pack.empty_handed2", "you are empty handed" },
+    { "pack.empty_no_appropriate2", "you don't have anything appropriate" },
+    { "pack.where_pick", "Where did you pick a '%s' up???" },
+    { "pack.moved_you1", "you " },
+    { "pack.moved_you2", "moved onto %s" },
+    { "pack.no_carrying", "you aren't carrying anything" },
+    { "pack.item_invent1", "item: " },
+    { "pack.item_invent2", "which item do you wish to inventory: " },
+    { "pack.not_in_pack", "'%s' not in pack" },
+    { "pack.ran_out", "you ran out" },
+    { "pack.which_object1", "which object do you want to " },
+    { "pack.which_object2", " what" },
+    { "pack.which_object3", "? (* for list): " },
+    { "pack.invalid_item", "'%s' is not a valid item" },
+    { "pack.found_gold1", "you found " },
+    { "pack.found_gold2", "%d gold pieces" },
+
+    /* potions.c */
+    { "potions.pot_confuse", "what a tripy feeling!" },
+    { "potions.pot_confuse2", "wait, what's going on here. Huh? What? Who?" },
+    { "potions.pot_cosmic", "Oh, wow!  Everything seems so cosmic!" },
+    { "potions.pot_cosmic2", "Oh, wow!  Everything seems so cosmic!" },
+    { "potions.pot_dark", "oh, bummer!  Everything is dark!  Help!" },
+    { "potions.pot_dark2", "a cloak of darkness falls around you" },
+    { "potions.pot_float", "oh, wow!  You're floating in the air!" },
+    { "potions.pot_float2", "you start to float in the air" },
+    { "potions.quaff", "quaff" },
+    { "potions.why_want_drink1", "yuk! Why would you want to drink that?" },
+    { "potions.why_want_drink2", "that's undrinkable" },
+    { "potions.momentarily_sick", "you feel momentarily sick" },
+    { "potions.very_sick", "you feel very sick now" },
+    { "potions.feel_better", "you begin to feel better" },
+    { "potions.feel_stronger", "you feel stronger, now.  What bulging muscles!" },
+    { "potions.moment_and_passed", "you have a %s feeling for a moment, then it passes" },
+    { "potions.feel_normal", "normal" },
+    { "potions.feel_strange", "strange" },
+    { "potions.sense_magic", "You sense the presence of magic on this level.--More--" },
+    { "potions.cant_move", "you can't move" },
+    { "potions.taste_juice", "this potion tastes like %s juice" },
+    { "potions.feel_skillful", "you suddenly feel much more skillful" },
+    { "potions.feel_much_better", "you begin to feel much better" },
+    { "potions.feel_faster", "you feel yourself moving much faster" },
+    { "potions.taste_great", "hey, this tastes great.  It make you feel warm all over" },
+    { "potions.taste_dull", "this potion tastes extremely dull" },
+    { "potions.taste_odd", "what an odd tasting potion!" },
+    { "potions.", },
+    { "potions.", },
+
+    /* rings.c */
+    { "rings.put_on", "put on" },
+    { "rings.difficult_wrap", "it would be difficult to wrap that around a finger" },
+    { "rings.not_ring", "not a ring" },
+    { "rings.already_have", "you already have a ring on each hand" },
+    { "rings.wearing_two", "wearing two" },
+    { "rings.now_wearing1", "you are now wearing " },
+    { "rings.now_wearing2", "%s (%c)" },
+    { "rings.no_rings1", "no rings" },
+    { "rings.no_rings2", "you aren't wearing any rings" },
+    { "rings.not_wearing", "not wearing such a ring" },
+    { "rings.was_wearing", "was wearing %s(%c)" },
+    { "rings.left_or_right1", "left or right ring? " },
+    { "rings.left_or_right2", "left hand or right hand? " },
+    { "rings.please_l_r1", "L or R" },
+    { "rings.please_l_r2", "please type L or R" },
+    { "rings.", },
+    { "rings.", },
+    { "rings.", },
+
+    /* rip.c */
+    { "rip.killed", "killed" },
+    { "rip.quit", "quit" },
+    { "rip.a_total_winner", "A total winner" },
+    { "rip.killed_with_amulet", "killed with Amulet" },
+    { "rip.press_return", "[Press return to continue]" },
+    { "rip.top", "Top %s %s:\n" },
+    { "rip.scores", "Scores" },
+    { "rip.rogueists", "Rogueists" },
+    { "rip.score_name", "   Score Name\n" },
+    { "rip.on_level1", "%s" },
+    { "rip.on_level2", " on level %d" },
+    { "rip.on_level3", " by %s" },
+    { "rip.on_level4", "" },
+    { "rip.on_level5", "." },
+    { "rip.notomb_killed", "Killed by" },
+    { "rip.notomb_killedby1", "%s %s with %d gold" },
+    { "rip.notomb_killedby2", "%s %s with %d gold" },
+    { "rip.tomb_rip1", "  REST  " },
+    { "rip.tomb_rip2", "   IN   " },
+    { "rip.tomb_rip3", " PEACE  " },
+    { "rip.tomb_killed", "killed by a" },
+    { "rip.return_exit", "[Press return to exit]\n" },
+    { "rip.congratulations", "     Congratulations, you have made it to the light of day!    \n" },
+    { "rip.winner1", "\nYou have joined the elite ranks of those who have escaped the\n" },
+    { "rip.winner2", "Dungeons of Doom alive.  You journey home and sell all your loot at\n" },
+    { "rip.winner3", "a great profit and are admitted to the Fighters' Guild.\n" },
+    { "rip.return_continue", "--Press space to continue--" },
+    { "rip.worth_item", "   Worth  Item\n" },
+    { "rip.gold_pieces", "   %5d  Gold Pieces          " },
+    { "rip.killname_arrow", "arrow" },
+    { "rip.killname_bolt", "bolt" },
+    { "rip.killname_dart", "dart" },
+    { "rip.killname_hypothermia", "hypothermia" },
+    { "rip.killname_starvation", "starvation" },
+    { "rip.killname_wally", "Wally the Wonder Badger" },
+
+    /* save.c */
+    { "save.game", "Save game? " },
+    { "save.file", "Save file (%s)? " },
+    { "save.please_answer", "please answer Y or N" },
+    { "save.filename", "file name: " },
+    { "save.confirm", "File exists.  Do you wish to overwrite it?" },
+    { "save.see_you_soon", "See you soon, %s!\n" },
+    { "save.out_of_date", "Sorry, saved game is out of date.\n" },
+    { "save.played_lines", "Sorry, original game was played on a screen with %d lines.\n" },
+    { "save.unable_restore_l", "Current screen only has %d lines. Unable to restore game\n" },
+    { "save.played_columns", "Sorry, original game was played on a screen with %d columns.\n" },
+    { "save.unable_restore_c", "Current screen only has %d columns. Unable to restore game\n" },
+    { "save.unlink_file", "Cannot unlink file\n" },
+    { "save.cannot_restore", "\nCannot restore from a linked file\n" },
+    { "save.dead_jim", "\n\"He's dead, Jim\"\n" },
+    { "save.filename2", "file name: %s" },
+
+    /* scrolls.c */
+    { "scrolls.read", "read" },
+    { "scrolls.nothing_it_read", "there is nothing on it to read" },
+    { "scrolls.nothing_read", "nothing to read" },
+    { "scrolls.glow_hands", "your hands begin to glow %s" },
+    { "scrolls.glow_armor", "your armor glows %s for a moment" },
+    { "scrolls.monster", "the monster" },
+    { "scrolls.around_you", "s around you" },
+    { "scrolls.freeze", " freeze" },
+    { "scrolls.s", "s" },
+    { "scrolls.feel_sense_loss", "you feel a strange sense of loss" },
+    { "scrolls.fall_asleep", "you fall asleep" },
+    { "scrolls.hear_cry", "you hear a faint cry of anguish in the distance" },
+    { "scrolls.is_scroll", "this scroll is an %s scroll" },
+    { "scrolls.has_map", "oh, now this scroll has a map on it" },
+    { "scrolls.nose_tingles_smell", "Your nose tingles and you smell food.--More--" },
+    { "scrolls.nose_tingles", "your nose tingles" },
+    { "scrolls.glow_weapon", "your %s glows %s for a moment" },
+    { "scrolls.hear_laughter", "you hear maniacal laughter in the distance" },
+    { "scrolls.feel_onenes", "you feel in touch with the Universal Onenes" },
+    { "scrolls.feel_watching", "you feel as if somebody is watching over you" },
+    { "scrolls.hear_noise", "you hear a high pitched humming noise" },
+    { "scrolls.armor_covered", "your armor is covered by a shimmering %s shield" },
+    { "scrolls.seems_blank", "this scroll seems to be blank" },
+    { "scrolls.what_puzzling", "what a puzzling scroll!" },
+
+    /* sticks.c */
+    { "sticks.zap_with", "zap with" },
+    { "sticks.cant_zap", "you can't zap with that!" },
+    { "sticks.nothing_happens", "nothing happens" },
+    { "sticks.glows_corridor", "the corridor glows and then fades" },
+    { "sticks.room_lit1", "the room is lit" },
+    { "sticks.room_lit2", " by a shimmering %s light" },
+    { "sticks.room_lit3", "" },
+    { "sticks.too_weak_use", "you are too weak to use it" },
+    { "sticks.missile_vanishes", "missile vanishes" },
+    { "sticks.vanishes_with_smoke", "the missile vanishes with a puff of smoke" },
+    { "sticks.ws_bolt", "bolt" },
+    { "sticks.ws_flame", "flame" },
+    { "sticks.ws_ice", "ice" },
+    { "sticks.bizarre_schtick", "what a bizarre schtick!" },
+    { "sticks.have_tingling", "you have a tingling feeling" },
+    { "sticks.bounces", "the %s bounces" },
+    { "sticks.flame_bounces1", "the flame bounces" },
+    { "sticks.flame_bounces2", " off the dragon" },
+    { "sticks.flame_bounces3", "" },
+    { "sticks.misses", "%s misses" },
+    { "sticks.whizzes_past", "the %s whizzes past %s" },
+    { "sticks.hits", "the %s hits" },
+    { "sticks.hit_by", "you are hit by the %s" },
+    { "sticks.whizzes_by", "the %s whizzes by you" },
+    { "sticks.charges", " [%d charges]" },
+
+    /* things.c */
+    { "potion", "potion" },
+    { "scroll", "scroll" },
+    { "ring", "ring" },
+    { "staff", "staff" },
+    { "wand", "wand" },
+    { "stick", "stick" },
+    { "food", "food" },
+    { "ring, wand or staff", "ring, wand or staff" },
+    { "wand or staff", "wand or staff" },
+    { "weapon", "weapon" },
+    { "suit of armor", "suit of armor" },
+    { "things.a_scroll", "A scroll " },
+    { "things.scrolls", "%d scrolls " },
+    { "things.of_scroll", "of %s" },
+    { "things.called_scroll", "called %s" },
+    { "things.titled_scroll", "titled '%s'" },
+    { "things.a_food", "A%s %s" },
+    { "things.foods", "%d %ss" },
+    { "things.some_food", "Some food" },
+    { "things.rations_food", "%d rations of food" },
+    { "things.weapons", "%d " },
+    { "things.a_weapon", "A%s " },
+    { "things.known_weapon", "%s %s" },
+    { "things.unknown_weapon", "%s" },
+    { "things.s", "s" },
+    { "things.called", " called %s" },
+    { "things.known_armor", "%s %s [" },
+    { "things.protection1", "protection " },
+    { "things.protection2", "%d]" },
+    { "things.unknown_armor", "%s" },
+    { "things.amulet_of_yendor", "The Amulet of Yendor" },
+    { "things.gold_pieces", "%d Gold pieces" },
+    { "things.pick_funny", "Picked up something funny %s" },
+    { "things.something_bizarre", "Something bizarre %s" },
+    { "things.being_worn", " (being worn)" },
+    { "things.weapon_in_hand", " (weapon in hand)" },
+    { "things.on_left_hand", " (on left hand)" },
+    { "things.on_right_hand", " (on right hand)" },
+    { "things.something_already", "there is something there already" },
+    { "things.drop", "drop" },
+    { "things.dropped", "dropped %s" },
+    { "things.be_cursed", "you can't.  It appears to be cursed" },
+    { "things.show_items1", "" },
+    { "things.show_items2", "for " },
+    { "things.show_items3", "what type" },
+    { "things.show_items4", " of object do you want a list" },
+    { "things.show_items5", "? (* for all)" },
+    { "things.not_type", "Not a type" },
+    { "things.type_one", "Please type one of %c%c%c%c (ESCAPE to quit)" },
+    { "things.press_space", "--Press space to continue--" },
+    { "things.nothing", "Nothing" },
+    { "things.not_discovered", "Haven't discovered anything" },
+    { "things.about_any", " about any %ss" },
+    { "things.a_thing", "A %s " },
+    { "things.things", "%d %ss " },
+    { "things.of_thing", "of %s" },
+    { "things.called_thing", "called %s" },
+    { "things.which", "%s(%s)" },
+    { "things.an_thing", "A%s " },
+    { "things.unknown_thing", "%s %s" },
+    { "things.unknown_things", "%d %s %ss" },
+    { "things.what_type_list1", "for " },
+    { "things.what_type_list2", "what type" },
+    { "things.what_type_list3", " of object do you want a list" },
+    { "things.what_type_list4", "? " },
+
+    /* weapons.c */
+    { "weapons.throw", "throw" },
+    { "weapons.vanishes_ground", "the %s vanishes as it hits the ground" },
+    { "weapons.wield", "wield" },
+    { "weapons.cant_wield_armor", "you can't wield armor" },
+    { "weapons.you_are_now", "you are now " },
+    { "weapons.wielding", "wielding %s (%c)" },
+
+    /* wizard.c */
+    { "wizard.dont_have_anything", "you don't have anything in your pack to identify" },
+    { "wizard.identify", "identify" },
+    { "wizard.must_identify_something", "you must identify something" },
+    { "wizard.must_identify", "you must identify a %s" },
+    { "wizard.type_item", "type of item: " },
+    { "wizard.which_you_want", "which %c do you want? (0-f)" },
+    { "wizard.blessing", "blessing? (+,-,n)" },
+    { "wizard.how_much", "how much?" },
+    { "wizard.password", "wizard's Password:" },
+    { "wizard.map", "---More (level map)---" },
+
+    /* End of table */
+    { NULL, NULL }
+};
+
+static struct hashtable *message_hash_table_ja;
+static const message_entry message_table_ja[] = {
+    /* common */
+    { "lang", "ja" },
+
+    /* colors */
+    { "red", "" },
+    { "blue", "" },
+    { "silver", "" },
+    { "gold", "" },
+
+    /* armor.c */
+    { "armor.wear", "" },
+    { "armor.already_wearing", "" },
+    { "armor.need_take_off", "" },
+    { "armor.cant_wear", "" },
+    { "armor.you_are_now", "" },
+    { "armor.wearing", "%s" },
+    { "armor.not_wearing", "" },
+    { "armor.you_arent_wearing", "" },
+    { "armor.was", "" },
+    { "armor.used_to_be", "" },
+    { "armor.wearing_with_label", "%c) %s" },
+
+    /* command.c */
+    { "command.hello1", "%s ... (#%d)" },
+    { "command.hello2", "%s ..." },
+    { "command.move_again", "" },
+    { "command.nothing_to_pick_up1", "" },
+    { "command.nothing_to_pick_up2", "" },
+    { "command.nothing_to_pick_up3", "" },
+    { "command.nothing_to_pick_up4", "" },
+    { "command.i_see", "" },
+    { "command.no_monster", "" },
+    { "command.command_yet", "" },
+    { "command.no_trap1", "" },
+    { "command.no_trap2", "" },
+    { "command.not_wizard_any_more", "" },
+    { "command.suddenly_arnold", "#%d" },
+    { "command.sorry", "" },
+    { "command.weapon_wielding", "" },
+    { "command.armor_wearing", "" },
+    { "command.ring_wearing", "" },
+    { "command.ring_left", "" },
+    { "command.ring_left_hand", "" },
+    { "command.ring_right", "" },
+    { "command.ring_right_hand", "" },
+    { "command.inpack", "%d" },
+    { "command.food_left", "%d" },
+    { "command.stick_charge", "" },
+    { "command.illegal_command", "'%s' " },
+    { "command.secret_door", "" },
+    { "command.you_found1", "" },
+    { "command.you_found2", "" },
+    { "command.help", " ('*'): " },
+    { "command.unknown_char_s", "'%s' " },
+    { "command.press_space", "----" },
+    { "command.ident_wall1", "" },
+    { "command.ident_wall2", "" },
+    { "command.ident_gold", "" },
+    { "command.ident_staircase", "" },
+    { "command.ident_door", "" },
+    { "command.ident_floor", "" },
+    { "command.ident_you", "" },
+    { "command.ident_passage", "" },
+    { "command.ident_trap", "" },
+    { "command.ident_potion", "" },
+    { "command.ident_scroll", "" },
+    { "command.ident_food", "" },
+    { "command.ident_weapon", "" },
+    { "command.ident_solid_rock", "" },
+    { "command.ident_armor", "" },
+    { "command.ident_yendor_amulet", "" },
+    { "command.ident_ring", "" },
+    { "command.ident_wand_or_staff", "" },
+    { "command.what_want_ident", "" },
+    { "command.unknown_char", "" },
+    { "command.no_way_down", "" },
+    { "command.feel_wrench_gut", "" },
+    { "command.magically_blocked", "" },
+    { "command.no_way_up", "" },
+    { "command.floating_off", "" },
+    { "command.call", "" },
+    { "command.cant_call_anything", "" },
+    { "command.already_identified", "" },
+    { "command.called1", "" },
+    { "command.called2", "\"%s\"" },
+    { "command.call_it", "" },
+    { "command.what_call_it", "" },
+    { "command.you_are_how1", "" },
+    { "command.you_are_how2", "%s" },
+    { "command.you_are_nothing_how1", "" },
+    { "command.you_are_nothing_how2", "" },
+
+    /* daemons.c */
+    { "daemons.feel_less", "%s" },
+    { "daemons.trippy", "" },
+    { "daemons.confused", "" },
+    { "daemons.far_out", "" },
+    { "daemons.darkness_lifts", "" },
+    { "daemons.feel_slowing_down", "" },
+    { "daemons.munchies_overpower", "" },
+    { "daemons.feel_too_weak", "" },
+    { "daemons.freak_out", "" },
+    { "daemons.faint", "" },
+    { "daemons.munchies_interfering", "" },
+    { "daemons.feel_weak", "" },
+    { "daemons.get_munchies", "" },
+    { "daemons.get_hungry", "" },
+    { "daemons.get_munchies2", "" },
+    { "daemons.get_hungry2", "" },
+    { "daemons.looks_boring", "" },
+    { "daemons.hit_ground", "" },
+    { "daemons.float_gently_ground", "" },
+
+    /* extern.c */
+    { "extern.flame", "" },
+    { "extern.fruit", "" },
+    { "extern.inv_style_overwrite", "(O)" },
+    { "extern.inv_style_slow", "(S)" },
+    { "extern.inv_style_clear", "(C)" },
+    { "extern.trap_trapdoor", "" },
+    { "extern.trap_arrow", "" },
+    { "extern.trap_sleeping_gas", "" },
+    { "extern.trap_beartrap", "" },
+    { "extern.trap_teleport", "" },
+    { "extern.trap_poison_dart", "" },
+    { "extern.trap_rust", "" },
+    { "extern.trap_mysterious", "" },
+    { "extern.monster_aquator", "" },
+    { "extern.monster_bat", "" },
+    { "extern.monster_centaur", "" },
+    { "extern.monster_dragon", "" },
+    { "extern.monster_emu", "" },
+    { "extern.monster_venus_flytrap", "" },
+    { "extern.monster_griffin", "" },
+    { "extern.monster_hobgoblin", "" },
+    { "extern.monster_ice_monster", "" },
+    { "extern.monster_jabberwock", "" },
+    { "extern.monster_kestrel", "" },
+    { "extern.monster_leprechaun", "" },
+    { "extern.monster_medusa", "" },
+    { "extern.monster_nymph", "" },
+    { "extern.monster_orc", "" },
+    { "extern.monster_phantom", "" },
+    { "extern.monster_quagga", "" },
+    { "extern.monster_rattlesnake", "" },
+    { "extern.monster_snake", "" },
+    { "extern.monster_slime", "" },
+    { "extern.monster_troll", "" },
+    { "extern.monster_black_unicorn", "" },
+    { "extern.monster_ur-vile", "" },
+    { "extern.monster_vampire", "" },
+    { "extern.monster_wraith", "" },
+    { "extern.monster_xeroc", "" },
+    { "extern.monster_yeti", "" },
+    { "extern.monster_zombie", "" },
+    { "extern.arm_leather_armor", "" },
+    { "extern.arm_ring_mail", "" },
+    { "extern.arm_studded_leather_armor", "" },
+    { "extern.arm_scale_mail", "" },
+    { "extern.arm_chain_mail", "" },
+    { "extern.arm_splint_mail", "" },
+    { "extern.arm_banded_mail", "" },
+    { "extern.arm_plate_mail", "" },
+    { "extern.pot_confusion", "" },
+    { "extern.pot_hallucination", "" },
+    { "extern.pot_poison", "" },
+    { "extern.pot_gain_strength", "" },
+    { "extern.pot_see_invisible", "" },
+    { "extern.pot_healing", "" },
+    { "extern.pot_monster_detection", "" },
+    { "extern.pot_magic_detection", "" },
+    { "extern.pot_raise_level", "" },
+    { "extern.pot_extra_healing", "" },
+    { "extern.pot_haste_self", "" },
+    { "extern.pot_restore_strength", "" },
+    { "extern.pot_blindness", "" },
+    { "extern.pot_levitation", "" },
+    { "extern.pot2_paralysis", "" },
+    { "extern.pot2_thirst_quenching", "" },
+    { "extern.ring_protection", "" },
+    { "extern.ring_add_strength", "" },
+    { "extern.ring_sustain_strength", "" },
+    { "extern.ring_searching", "" },
+    { "extern.ring_see_invisible", "" },
+    { "extern.ring_adornment", "" },
+    { "extern.ring_aggravate_monster", "" },
+    { "extern.ring_dexterity", "" },
+    { "extern.ring_increase_damage", "" },
+    { "extern.ring_regeneration", "" },
+    { "extern.ring_slow_digestion", "" },
+    { "extern.ring_teleportation", "" },
+    { "extern.ring_stealth", "" },
+    { "extern.ring_maintain_armor", "" },
+    { "extern.scr_monster_confusion", "" },
+    { "extern.scr_magic_mapping", "" },
+    { "extern.scr_hold_monster", "" },
+    { "extern.scr_sleep", "" },
+    { "extern.scr_enchant_armor", "" },
+    { "extern.scr_identify_potion", "" },
+    { "extern.scr_identify_scroll", "" },
+    { "extern.scr_identify_weapon", "" },
+    { "extern.scr_identify_armor", "" },
+    { "extern.scr_identify_ring_wand_or_staff", "" },
+    { "extern.scr_scare_monster", "" },
+    { "extern.scr_food_detection", "" },
+    { "extern.scr_teleportation", "" },
+    { "extern.scr_enchant_weapon", "" },
+    { "extern.scr_create_monster", "" },
+    { "extern.scr_remove_curse", "" },
+    { "extern.scr_aggravate_monsters", "" },
+    { "extern.scr_protect_armor", "" },
+    { "extern.scr2_identify", "" },
+    { "extern.scr2_blank_paper", "" },
+    { "extern.scr2_vorpalize_weapon", "" },
+    { "extern.weap_mace", "" },
+    { "extern.weap_long_sword", "" },
+    { "extern.weap_short_bow", "" },
+    { "extern.weap_arrow", "" },
+    { "extern.weap_dagger", "" },
+    { "extern.weap_two_handed_sword", "" },
+    { "extern.weap_dart", "" },
+    { "extern.weap_shuriken", "" },
+    { "extern.weap_spear", "" },
+    { "extern.weap2_crossbow_bolt", "" },
+    { "extern.weap2_crossbow", "" },
+    { "extern.ws_light", "" },
+    { "extern.ws_invisibility", "" },
+    { "extern.ws_lightning", "" },
+    { "extern.ws_fire", "" },
+    { "extern.ws_cold", "" },
+    { "extern.ws_polymorph", "" },
+    { "extern.ws_magic_missile", "" },
+    { "extern.ws_haste_monster", "" },
+    { "extern.ws_slow_monster", "" },
+    { "extern.ws_drain_life", "" },
+    { "extern.ws_nothing", "" },
+    { "extern.ws_teleport_away", "" },
+    { "extern.ws_teleport_to", "" },
+    { "extern.ws_cancellation", "" },
+    { "extern.ws_striking", "" },
+
+    /* fight.c */
+    { "fight.hit_excellent", "" },
+    { "fight.hit_hit", "" },
+    { "fight.hit_injured", "" },
+    { "fight.hit_swing", "" },
+    { "fight.hit_scored", "" },
+    { "fight.hit_hit2", "" },
+    { "fight.hit_injured2", "" },
+    { "fight.hit_swing2", "" },
+    { "fight.miss_miss", "" },
+    { "fight.miss_swing", "" },
+    { "fight.miss_barely", "" },
+    { "fight.miss_dont_hit", "" },
+    { "fight.miss_miss2", "" },
+    { "fight.miss_swing2", "" },
+    { "fight.miss_barely2", "" },
+    { "fight.miss_dont_hit2", "" },
+    { "fight.slime_devided", "" },
+    { "fight.nasty_critter", "" },
+    { "fight.wait_xeroc", "" },
+    { "fight.hands_stop_glowing", "%s" },
+    { "fight.confused", "%s" },
+    { "fight.has_hit", "" },
+    { "fight.frozen1", "" },
+    { "fight.frozen2", "%s" },
+    { "fight.frozen3", "" },
+    { "fight.bite_weaker", "" },
+    { "fight.bite_weakened", "" },
+    { "fight.bite_momentarily_weaked", "" },
+    { "fight.bite_no_effect", "" },
+    { "fight.suddenly_weaker", "" },
+    { "fight.purse_lighter", "" },
+    { "fight.she_stole", "%s" },
+    { "fight.it", "" },
+    { "fight.something", "" },
+    { "fight.you", "" },
+    { "fight.hit1", "%s" },
+    { "fight.hit2", "%s" },
+    { "fight.hit3", "" },
+    { "fight.hit_success1", "" },
+    { "fight.hit_success2", "%s" },
+    { "fight.hit_success3", "" },
+    { "fight.miss1", "%s" },
+    { "fight.miss2", "%s" },
+    { "fight.miss3", "" },
+    { "fight.bounce1", "%s" },
+    { "fight.bounce2", "%s" },
+    { "fight.bounce3", "" },
+    { "fight.defeated1", "" },
+    { "fight.defeated2", "" },
+    { "fight.defeated3", "" },
+    { "fight.defeated4", "%s" },
+
+    /* init.c */
+    { "init.color_amber", "" },
+    { "init.color_aquamarine", "" },
+    { "init.color_black", "" },
+    { "init.color_blue", "" },
+    { "init.color_brown", "" },
+    { "init.color_clear", "" },
+    { "init.color_crimson", "" },
+    { "init.color_cyan", "" },
+    { "init.color_ecru", "" },
+    { "init.color_gold", "" },
+    { "init.color_green", "" },
+    { "init.color_grey", "" },
+    { "init.color_magenta", "" },
+    { "init.color_orange", "" },
+    { "init.color_pink", "" },
+    { "init.color_plaid", "" },
+    { "init.color_purple", "" },
+    { "init.color_red", "" },
+    { "init.color_silver", "" },
+    { "init.color_tan", "" },
+    { "init.color_tangerine", "" },
+    { "init.color_topaz", "" },
+    { "init.color_turquoise", "" },
+    { "init.color_vermilion", "" },
+    { "init.color_violet", "" },
+    { "init.color_white", "" },
+    { "init.color_yellow", "" },
+    { "init.stone_agate", "" },
+    { "init.stone_alexandrite", "" },
+    { "init.stone_amethyst", "" },
+    { "init.stone_carnelian", "" },
+    { "init.stone_diamond", "" },
+    { "init.stone_emerald", "" },
+    { "init.stone_germanium", "" },
+    { "init.stone_granite", "" },
+    { "init.stone_garnet", "" },
+    { "init.stone_jade", "" },
+    { "init.stone_kryptonite", "" },
+    { "init.stone_lapis_lazuli", "" },
+    { "init.stone_moonstone", "" },
+    { "init.stone_obsidian", "" },
+    { "init.stone_onyx", "" },
+    { "init.stone_opal", "" },
+    { "init.stone_pearl", "" },
+    { "init.stone_peridot", "" },
+    { "init.stone_ruby", "" },
+    { "init.stone_sapphire", "" },
+    { "init.stone_stibotantalite", "" },
+    { "init.stone_tiger_eye", "" },
+    { "init.stone_topaz", "" },
+    { "init.stone_turquoise", "" },
+    { "init.stone_taaffeite", "" },
+    { "init.stone_zircon", "" },
+    { "init.wood_avocado_wood", "" },
+    { "init.wood_balsa", "" },
+    { "init.wood_bamboo", "" },
+    { "init.wood_banyan", "" },
+    { "init.wood_birch", "" },
+    { "init.wood_cedar", "" },
+    { "init.wood_cherry", "" },
+    { "init.wood_cinnibar", "" },
+    { "init.wood_cypress", "" },
+    { "init.wood_dogwood", "" },
+    { "init.wood_driftwood", "" },
+    { "init.wood_ebony", "" },
+    { "init.wood_elm", "" },
+    { "init.wood_eucalyptus", "" },
+    { "init.wood_fall", "" },
+    { "init.wood_hemlock", "" },
+    { "init.wood_holly", "" },
+    { "init.wood_ironwood", "" },
+    { "init.wood_kukui_wood", "" },
+    { "init.wood_mahogany", "" },
+    { "init.wood_manzanita", "" },
+    { "init.wood_maple", "" },
+    { "init.wood_oaken", "" },
+    { "init.wood_persimmon_wood", "" },
+    { "init.wood_pecan", "" },
+    { "init.wood_pine", "" },
+    { "init.wood_poplar", "" },
+    { "init.wood_redwood", "" },
+    { "init.wood_rosewood", "" },
+    { "init.wood_spruce", "" },
+    { "init.wood_teak", "" },
+    { "init.wood_walnut", "" },
+    { "init.wood_zebrawood", "" },
+    { "init.metal_aluminum", "" },
+    { "init.metal_beryllium", "" },
+    { "init.metal_bone", "" },
+    { "init.metal_brass", "" },
+    { "init.metal_bronze", "" },
+    { "init.metal_copper", "" },
+    { "init.metal_electrum", "" },
+    { "init.metal_gold", "" },
+    { "init.metal_iron", "" },
+    { "init.metal_lead", "" },
+    { "init.metal_magnesium", "" },
+    { "init.metal_mercury", "" },
+    { "init.metal_nickel", "" },
+    { "init.metal_pewter", "" },
+    { "init.metal_platinum", "" },
+    { "init.metal_steel", "" },
+    { "init.metal_silver", "" },
+    { "init.metal_silicon", "" },
+    { "init.metal_tin", "" },
+    { "init.metal_titanium", "" },
+    { "init.metal_tungsten", "" },
+    { "init.metal_zinc", "" },
+
+    /* io.c */
+    { "io.more", "----" },
+    { "io.normal", "" },
+    { "io.hungry", "" },
+    { "io.weak", "" },
+    { "io.faint", "" },
+    { "io.state_rank", ": %d  : %-5d  : %*d(%*d)  : %2d(%d)  : %-2d  %s  %s" },
+    { "io.state_level", ": %d  : %-5d  : %*d(%*d)  : %2d(%d)  : %-2d  : %d/%d  %s" },
+
+    /* main.c */
+    { "main.wizard_password", "" },
+    { "main.who_are_you", "" },
+    { "main.hello_wiz", "%s#%d...\n" },
+    { "main.hello", "%s ...\n" },
+    { "main.screen_must_be", "\n  %dx%d \n" },
+    { "main.ok_bye_bye", "\n" },
+    { "main.really_quit", " y/n " },
+    { "main.with_gold", "%d" },
+    { "main.press_return", "" },
+
+    /* misc.c */
+    { "misc.eat", "" },
+    { "misc.get_ill", "" },
+    { "misc.inedible", "" },
+    { "misc.yummy", "%s" },
+    { "misc.taste_awful", "%s" },
+    { "misc.taste_bummer", "" },
+    { "misc.taste_yuk", "" },
+    { "misc.taste_good", "%s" },
+    { "misc.taste_wow", "" },
+    { "misc.taste_yum", "" },
+    { "misc.achieve_rank", " \"%s\" " },
+    { "misc.welcome_level", "%d" },
+    { "misc.exhaustion_faint", "" },
+    { "misc.already", "" },
+    { "misc.in_use", "" },
+    { "misc.which_dir", "" },
+    { "misc.direction", "" },
+    { "misc.call_it1", "" },
+    { "misc.call_it2", "" },
+
+    /* monsters.c */
+    { "monsters.start_wandering", "%s" },
+    { "monsters.cant_find", "" },
+    { "monsters.gaze_confused1", "%s" },
+    { "monsters.gaze_confused2", "" },
+    { "monsters.gaze_confused3", "" },
+
+    /* move.c */
+    { "move.stuck_trap", "" },
+    { "move.being_held", "" },
+    { "move.fell_trap", "" },
+    { "move.caught_trap", "" },
+    { "move.myst_0", "" },
+    { "move.myst_1", "%s" },
+    { "move.myst_2", "" },
+    { "move.myst_3", "" },
+    { "move.myst_4", "%s" },
+    { "move.myst_5", "" },
+    { "move.myst_6", "%s" },
+    { "move.myst_7", "" },
+    { "move.myst_8", "" },
+    { "move.myst_9", "" },
+    { "move.myst_10", "%s" },
+    { "move.fall_asleep", "" },
+    { "move.arrow_killed", "" },
+    { "move.arrow_shot", "" },
+    { "move.arrow_past", "" },
+    { "move.dart_whizzes", "" },
+    { "move.dart_killed", "" },
+    { "move.dart_hit", "" },
+    { "move.water_hit", "" },
+    { "move.rust_vanishes", "" },
+    { "move.armor_weaker", "" },
+    { "move.armor_weakens", "" },
+
+    /* options */
+    { "options.param_terse", "" },
+    { "options.param_flush", "" },
+    { "options.param_jump", "" },
+    { "options.param_seefloor", "" },
+    { "options.param_passgo", "" },
+    { "options.param_tombstone", "" },
+    { "options.param_inven", "" },
+    { "options.param_color", "" },
+    { "options.param_bright", "PC-9801/8801" },
+    { "options.param_rank", "" },
+    { "options.param_slime", "S:U:" },
+    { "options.param_idscrl", "" },
+    { "options.param_darkroom", "" },
+    { "options.param_mazeroom", "" },
+    { "options.param_pcmode", "Pc" },
+    { "options.param_name", "" },
+    { "options.param_fruit", "" },
+    { "options.param_file", "" },
+    { "options.press_space", "----" },
+    { "options.true", "(T)" },
+    { "options.false", "(F)" },
+    { "options.true_false", "(T)(F)" },
+    { "options.styles", "(O)(S)(C)" },
+
+    /* pack.c */
+    { "pack.scroll_dust", "" },
+    { "pack.have_item1", "" },
+    { "pack.have_item2", "%s (%c)" },
+    { "pack.no_room1", "" },
+    { "pack.no_room2", "" },
+    { "pack.no_room3", "" },
+    { "pack.empty_handed1", "" },
+    { "pack.empty_no_appropriate1", "" },
+    { "pack.empty_handed2", "" },
+    { "pack.empty_no_appropriate2", "" },
+    { "pack.where_pick", "'%s'" },
+    { "pack.moved_you1", "" },
+    { "pack.moved_you2", "%s" },
+    { "pack.no_carrying", "" },
+    { "pack.item_invent1", "" },
+    { "pack.item_invent2", "" },
+    { "pack.not_in_pack", "'%s'" },
+    { "pack.ran_out", "" },
+    { "pack.which_object1", "" },
+    { "pack.which_object2", "" },
+    { "pack.which_object3", " ('*') " },
+    { "pack.invalid_item", "'%s' " },
+    { "pack.found_gold1", "" },
+    { "pack.found_gold2", "%d" },
+
+    /* potions.c */
+    { "potions.pot_confuse", "" },
+    { "potions.pot_confuse2", "" },
+    { "potions.pot_cosmic", " " },
+    { "potions.pot_cosmic2", " " },
+    { "potions.pot_dark", "" },
+    { "potions.pot_dark2", "" },
+    { "potions.pot_float", " " },
+    { "potions.pot_float2", "" },
+    { "potions.quaff", "" },
+    { "potions.why_want_drink1", "" },
+    { "potions.why_want_drink2", "" },
+    { "potions.momentarily_sick", "" },
+    { "potions.very_sick", "" },
+    { "potions.feel_better", "" },
+    { "potions.feel_stronger", "" },
+    { "potions.moment_and_passed", "%s" },
+    { "potions.feel_normal", "" },
+    { "potions.feel_strange", "" },
+    { "potions.sense_magic", "----" },
+    { "potions.cant_move", "" },
+    { "potions.taste_juice", "%s" },
+    { "potions.feel_skillful", "" },
+    { "potions.feel_much_better", "" },
+    { "potions.feel_faster", "" },
+    { "potions.taste_great", "" },
+    { "potions.taste_dull", "" },
+    { "potions.taste_odd", "" },
+
+    /* rings.c */
+    { "rings.put_on", "" },
+    { "rings.difficult_wrap", "" },
+    { "rings.not_ring", "" },
+    { "rings.already_have", "" },
+    { "rings.wearing_two", "" },
+    { "rings.now_wearing1", "" },
+    { "rings.now_wearing2", "%s (%c)" },
+    { "rings.no_rings1", "" },
+    { "rings.no_rings2", "" },
+    { "rings.not_wearing", "" },
+    { "rings.was_wearing", "%s(%c)" },
+    { "rings.left_or_right1", "(L)(R)" },
+    { "rings.left_or_right2", "(L)(R)" },
+    { "rings.please_l_r1", "'L''R'" },
+    { "rings.please_l_r2", "'L''R'" },
+
+    /* rip.c */
+    { "rip.killed", "" },
+    { "rip.quit", "" },
+    { "rip.a_total_winner", "" },
+    { "rip.killed_with_amulet", "" },
+    { "rip.press_return", "" },
+    { "rip.top", " %s %s:\n" },
+    { "rip.scores", "" },
+    { "rip.rogueists", "" },
+    { "rip.score_name", "   \n" },
+    { "rip.on_level1", "" },
+    { "rip.on_level2", "%d" },
+    { "rip.on_level3", " %s" },
+    { "rip.on_level4", " %s" },
+    { "rip.on_level5", "" },
+    { "rip.notomb_killed", "" },
+    { "rip.notomb_killedby1", "%s %s  %d" },
+    { "rip.notomb_killedby2", "%s %s  %d" },
+    { "rip.tomb_rip1", "        " },
+    { "rip.tomb_rip2", "" },
+    { "rip.tomb_rip3", "    " },
+    { "rip.tomb_killed", "" },
+    { "rip.return_exit", "\n" },
+    { "rip.congratulations", "         \n" },
+    { "rip.winner1", "\n         \n" },
+    { "rip.winner2", "         \n" },
+    { "rip.winner3", "             \n" },
+    { "rip.return_continue", "----" },
+    { "rip.worth_item", "      \n" },
+    { "rip.gold_pieces", "   %5d            " },
+    { "rip.killname_arrow", "" },
+    { "rip.killname_bolt", "" },
+    { "rip.killname_dart", "" },
+    { "rip.killname_hypothermia", "" },
+    { "rip.killname_starvation", "" },
+    { "rip.killname_wally", "" },
+
+    /* save.c */
+    { "save.game", "" },
+    { "save.file", "%s" },
+    { "save.please_answer", "'Y''N'" },
+    { "save.filename", "" },
+    { "save.confirm", "" },
+    { "save.see_you_soon", "%s\n" },
+    { "save.out_of_date", "\n" },
+    { "save.played_lines", "%d\n" },
+    { "save.unable_restore_l", "%d\n" },
+    { "save.played_columns", "%d\n" },
+    { "save.unable_restore_c", "%d\n" },
+    { "save.unlink_file", "\n" },
+    { "save.cannot_restore", "\n\n" },
+    { "save.dead_jim", "\n\"\"\n" },
+    { "save.filename2", " %s" },
+
+    /* scrolls.c */
+    { "scrolls.read", "" },
+    { "scrolls.nothing_it_read", "" },
+    { "scrolls.nothing_read", "" },
+    { "scrolls.glow_hands", "%s" },
+    { "scrolls.glow_armor", "%s" },
+    { "scrolls.monster", "" },
+    { "scrolls.around_you", "" },
+    { "scrolls.freeze", "" },
+    { "scrolls.s", "" },
+    { "scrolls.feel_sense_loss", "" },
+    { "scrolls.fall_asleep", "" },
+    { "scrolls.hear_cry", "" },
+    { "scrolls.is_scroll", "%s" },
+    { "scrolls.has_map", "" },
+    { "scrolls.nose_tingles_smell", "----" },
+    { "scrolls.nose_tingles", "" },
+    { "scrolls.glow_weapon", "%s%s" },
+    { "scrolls.hear_laughter", "" },
+    { "scrolls.feel_onenes", "" },
+    { "scrolls.feel_watching", "" },
+    { "scrolls.hear_noise", "" },
+    { "scrolls.armor_covered", "%s" },
+    { "scrolls.seems_blank", "" },
+    { "scrolls.what_puzzling", "" },
+
+    /* sticks.c */
+    { "sticks.zap_with", "" },
+    { "sticks.cant_zap", "" },
+    { "sticks.nothing_happens", "" },
+    { "sticks.glows_corridor", "" },
+    { "sticks.room_lit1", "" },
+    { "sticks.room_lit2", "%s" },
+    { "sticks.room_lit3", "" },
+    { "sticks.too_weak_use", "" },
+    { "sticks.missile_vanishes", "" },
+    { "sticks.vanishes_with_smoke", "" },
+    { "sticks.ws_bolt", "" },
+    { "sticks.ws_flame", "" },
+    { "sticks.ws_ice", "" },
+    { "sticks.bizarre_schtick", "" },
+    { "sticks.have_tingling", "" },
+    { "sticks.bounces", "%s" },
+    { "sticks.flame_bounces1", "" },
+    { "sticks.flame_bounces2", "" },
+    { "sticks.flame_bounces3", "" },
+    { "sticks.misses", "%s" },
+    { "sticks.whizzes_past", "%s%s" },
+    { "sticks.hits", "%s" },
+    { "sticks.hit_by", "%s" },
+    { "sticks.whizzes_by", "%s" },
+    { "sticks.charges", " %d" },
+
+    /* things.c */
+    { "potion", "" },
+    { "scroll", "" },
+    { "ring", "" },
+    { "staff", "" },
+    { "wand", "" },
+    { "stick", "" },
+    { "food", "" },
+    { "ring, wand or staff", "" },
+    { "wand or staff", "" },
+    { "weapon", "" },
+    { "suit of armor", "" },
+    { "things.a_scroll", "" },
+    { "things.scrolls", "%d" },
+    { "things.of_scroll", "%s" },
+    { "things.called_scroll", "%s" },
+    { "things.titled_scroll", "%s" },
+    { "things.a_food", "%s%s" },
+    { "things.foods", "%d%s" },
+    { "things.some_food", "1" },
+    { "things.rations_food", "%d" },
+    { "things.weapons", "%d" },
+    { "things.a_weapon", "" },
+    { "things.known_weapon", " (%s) %s" },
+    { "things.unknown_weapon", "%s" },
+    { "things.s", "" },
+    { "things.called", "%s" },
+    { "things.known_armor", " (%s) %s [" },
+    { "things.protection1", " " },
+    { "things.protection2", "%d]" },
+    { "things.unknown_armor", "%s" },
+    { "things.amulet_of_yendor", "" },
+    { "things.gold_pieces", "%d" },
+    { "things.pick_funny", "%s" },
+    { "things.something_bizarre", "%s" },
+    { "things.being_worn", "" },
+    { "things.weapon_in_hand", "" },
+    { "things.on_left_hand", "" },
+    { "things.on_right_hand", "" },
+    { "things.something_already", "" },
+    { "things.drop", "" },
+    { "things.dropped", "%s" },
+    { "things.be_cursed", "" },
+    { "things.show_items1", "" },
+    { "things.show_items2", "" },
+    { "things.show_items3", "" },
+    { "things.show_items4", "" },
+    { "things.show_items5", " ('*')" },
+    { "things.not_type", "" },
+    { "things.type_one", "%c%c%c%c " },
+    { "things.press_space", "----" },
+    { "things.nothing", "" },
+    { "things.not_discovered", "" },
+    { "things.about_any", "%s" },
+    { "things.a_thing", "" },
+    { "things.things", "%d" },
+    { "things.of_thing", "%s%s" },
+    { "things.called_thing", "%s%s" },
+    { "things.which", "%s (%s)" },
+    { "things.an_thing", "" },
+    { "things.unknown_thing", "%s%s" },
+    { "things.unknown_things", "%d%s%s" },
+    { "things.what_type_list1", "" },
+    { "things.what_type_list2", "" },
+    { "things.what_type_list3", "" },
+    { "things.what_type_list4", "" },
+
+    /* weapons.c */
+    { "weapons.throw", "" },
+    { "weapons.vanishes_ground", "%s" },
+    { "weapons.wield", "" },
+    { "weapons.cant_wield_armor", "" },
+    { "weapons.you_are_now", "" },
+    { "weapons.wielding", "%s (%c)" },
+
+    /* wizard.c */
+    { "wizard.dont_have_anything", "" },
+    { "wizard.identify", "" },
+    { "wizard.must_identify_something", "" },
+    { "wizard.must_identify", "%s" },
+    { "wizard.type_item", "" },
+    { "wizard.which_you_want", "'%c' (0-h)" },
+    { "wizard.blessing", " (+,-,n)" },
+    { "wizard.how_much", "" },
+    { "wizard.password", "" },
+    { "wizard.map", "----" },
+
+    /* End of table */
+    { NULL, NULL }
+};
+
+const char *
+get_msg(const char *msgid)
+{
+    if (msgid == NULL) {
+        fprintf(stderr, "Error: msgid is NULL.\n");
+        return NULL;
+    }
+
+    const struct hashtable *ht = message_hash_table;
+    if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+	ht = message_hash_table_ja;
+    }
+
+    const message_entry *result = get_hash_item(ht, msgid);
+    if (result) return result->value;
+
+    fprintf(stderr, "Error: message not found for msgid \"%s\".\n", msgid);
+    return NULL;
+}
+
+void
+message_init(void)
+{
+    make_hashtable(message_hash_table, message_table);
+    make_hashtable(message_hash_table_ja, message_table_ja);
+}
+
+void
+message_free(void)
+{
+    free_hash_table(message_hash_table);
+    free_hash_table(message_hash_table_ja);
+}
+
+const struct h_list helpstr[] = {
+    {'?',	"	prints help",				TRUE},
+    {'/',	"	identify object",			TRUE},
+    {'h',	"	left",					TRUE},
+    {'j',	"	down",					TRUE},
+    {'k',	"	up",					TRUE},
+    {'l',	"	right",					TRUE},
+    {'y',	"	up & left",				TRUE},
+    {'u',	"	up & right",				TRUE},
+    {'b',	"	down & left",				TRUE},
+    {'n',	"	down & right",				TRUE},
+    {'H',	"	run left",				FALSE},
+    {'J',	"	run down",				FALSE},
+    {'K',	"	run up",				FALSE},
+    {'L',	"	run right",				FALSE},
+    {'Y',	"	run up & left",				FALSE},
+    {'U',	"	run up & right",			FALSE},
+    {'B',	"	run down & left",			FALSE},
+    {'N',	"	run down & right",			FALSE},
+    {CTRL('H'),	"	run left until adjacent",		FALSE},
+    {CTRL('J'),	"	run down until adjacent",		FALSE},
+    {CTRL('K'),	"	run up until adjacent",			FALSE},
+    {CTRL('L'),	"	run right until adjacent",		FALSE},
+    {CTRL('Y'),	"	run up & left until adjacent",		FALSE},
+    {CTRL('U'),	"	run up & right until adjacent",		FALSE},
+    {CTRL('B'),	"	run down & left until adjacent",	FALSE},
+    {CTRL('N'),	"	run down & right until adjacent",	FALSE},
+    {'\0',	"	<SHIFT><dir>: run that way",		TRUE},
+    {'\0',	"	<CTRL><dir>: run till adjacent",	TRUE},
+    {'f',	"<dir>	fight till death or near death",	TRUE},
+    {'t',	"<dir>	throw something",			TRUE},
+    {'m',	"<dir>	move onto without picking up",		TRUE},
+    {'z',	"<dir>	zap a wand in a direction",		TRUE},
+    {'^',	"<dir>	identify trap type",			TRUE},
+    {'s',	"	search for trap/secret door",		TRUE},
+    {'>',	"	go down a staircase",			TRUE},
+    {'<',	"	go up a staircase",			TRUE},
+    {'.',	"	rest for a turn",			TRUE},
+    {',',	"	pick something up",			TRUE},
+    {'i',	"	inventory",				TRUE},
+    {'I',	"	inventory single item",			TRUE},
+    {'q',	"	quaff potion",				TRUE},
+    {'r',	"	read scroll",				TRUE},
+    {'e',	"	eat food",				TRUE},
+    {'w',	"	wield a weapon",			TRUE},
+    {'W',	"	wear armor",				TRUE},
+    {'T',	"	take armor off",			TRUE},
+    {'P',	"	put on ring",				TRUE},
+    {'R',	"	remove ring",				TRUE},
+    {'d',	"	drop object",				TRUE},
+    {'c',	"	call object",				TRUE},
+    {'a',	"	repeat last command",			TRUE},
+    {')',	"	print current weapon",			TRUE},
+    {']',	"	print current armor",			TRUE},
+    {'=',	"	print current rings",			TRUE},
+    {'@',	"	print current stats",			TRUE},
+    {'D',	"	recall what's been discovered",		TRUE},
+    {'o',	"	examine/set options",			TRUE},
+    {CTRL('R'),	"	redraw screen",				TRUE},
+    {CTRL('P'),	"	repeat last message",			TRUE},
+    {ESCAPE,	"	cancel command",			TRUE},
+    {'S',	"	save game",				TRUE},
+    {'Q',	"	quit",					TRUE},
+    {'!',	"	shell escape",				TRUE},
+    {'F',	"<dir>	fight till either of you dies",		TRUE},
+    {'v',	"	print version number",			TRUE},
+    {0,		NULL }
+};
+
+const struct h_list helpstr_ja[] = {
+    {'?',	"	",			TRUE},
+    {'/',	"	",		TRUE},
+    {'h',	"	",				TRUE},
+    {'j',	"	",				TRUE},
+    {'k',	"	",				TRUE},
+    {'l',	"	",				TRUE},
+    {'y',	"	",				TRUE},
+    {'u',	"	",				TRUE},
+    {'b',	"	",				TRUE},
+    {'n',	"	",				TRUE},
+    {'H',	"	",				FALSE},
+    {'J',	"	",				FALSE},
+    {'K',	"	",				FALSE},
+    {'L',	"	",				FALSE},
+    {'Y',	"	",				FALSE},
+    {'U',	"	",				FALSE},
+    {'B',	"	",				FALSE},
+    {'N',	"	",				FALSE},
+    {CTRL('H'),	"	",		FALSE},
+    {CTRL('J'),	"	",		FALSE},
+    {CTRL('K'),	"	",		FALSE},
+    {CTRL('L'),	"	",		FALSE},
+    {CTRL('Y'),	"	",		FALSE},
+    {CTRL('U'),	"	",		FALSE},
+    {CTRL('B'),	"	",		FALSE},
+    {CTRL('N'),	"	",		FALSE},
+    {'\0',	"	<SHIFT><>: ",			TRUE},
+    {'\0',	"	<CTRL><>: ",	TRUE},
+    {'f',	"<>	",		TRUE},
+    {'t',	"<>	",				TRUE},
+    {'m',	"<>	",		TRUE},
+    {'z',	"<>	",			TRUE},
+    {'^',	"<>	",			TRUE},
+    {'s',	"	",		TRUE},
+    {'>',	"	",				TRUE},
+    {'<',	"	",				TRUE},
+    {'.',	"	",				TRUE},
+    {',',	"	",			TRUE},
+    {'i',	"	",			TRUE},
+    {'I',	"	",			TRUE},
+    {'q',	"	",				TRUE},
+    {'r',	"	",				TRUE},
+    {'e',	"	",			TRUE},
+    {'w',	"	",			TRUE},
+    {'W',	"	",				TRUE},
+    {'T',	"	",				TRUE},
+    {'P',	"	",				TRUE},
+    {'R',	"	",				TRUE},
+    {'d',	"	",			TRUE},
+    {'c',	"	",		TRUE},
+    {'a',	"	",		TRUE},
+    {')',	"	",			TRUE},
+    {']',	"	",			TRUE},
+    {'=',	"	",			TRUE},
+    {'@',	"	",		TRUE},
+    {'D',	"	",		TRUE},
+    {'o',	"	",		TRUE},
+    {CTRL('R'),	"	",			TRUE},
+    {CTRL('P'),	"	",		TRUE},
+    {ESCAPE,	"	",			TRUE},
+    {'S',	"	",		TRUE},
+    {'Q',	"	",			TRUE},
+    {'!',	"	",			TRUE},
+    {'F',	"<>	",		TRUE},
+    {'v',	"	",		TRUE},
+    {0,		NULL }
+};
+
+const struct h_list *
+get_help(void)
+{
+    const struct h_list *help = helpstr;
+    if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+	help = helpstr_ja;
+    }
+
+    return help;
+}
+
+static const char *sylls[] = {
+    "a", "ab", "ag", "aks", "ala", "an", "app", "arg", "arze", "ash",
+    "bek", "bie", "bit", "bjor", "blu", "bot", "bu", "byt", "comp",
+    "con", "cos", "cre", "dalf", "dan", "den", "do", "e", "eep", "el",
+    "eng", "er", "ere", "erk", "esh", "evs", "fa", "fid", "fri", "fu",
+    "gan", "gar", "glen", "gop", "gre", "ha", "hyd", "i", "ing", "ip",
+    "ish", "it", "ite", "iv", "jo", "kho", "kli", "klis", "la", "lech",
+    "mar", "me", "mi", "mic", "mik", "mon", "mung", "mur", "nej",
+    "nelg", "nep", "ner", "nes", "nes", "nih", "nin", "o", "od", "ood",
+    "org", "orn", "ox", "oxy", "pay", "ple", "plu", "po", "pot",
+    "prok", "re", "rea", "rhov", "ri", "ro", "rog", "rok", "rol", "sa",
+    "san", "sat", "sef", "seh", "shu", "ski", "sna", "sne", "snik",
+    "sno", "so", "sol", "sri", "sta", "sun", "ta", "tab", "tem",
+    "ther", "ti", "tox", "trol", "tue", "turs", "u", "ulk", "um", "un",
+    "uni", "ur", "val", "viv", "vly", "vom", "wah", "wed", "werg",
+    "wex", "whon", "wun", "xo", "y", "yot", "yu", "zant", "zeb", "zim",
+    "zok", "zon", "zum",
+};
+
+static const char *sylls_ja[] = {
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "",
+    "", "", "", "", "", "", "", "", "", "",
+    "", "", "",
+};
+
+const int sylls_num = (sizeof sylls) / (sizeof (char *));
+
+const char **
+get_sylls(void)
+{
+    const char **s = sylls;
+    if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+	s = sylls_ja;
+    }
+
+    return s;
+}
+
diff -Naur rogue5.4.5x-src.orig/misc.c rogue5.4.5x-src/misc.c
--- rogue5.4.5x-src.orig/misc.c	2017-07-08 12:05:48.000000000 +0900
+++ rogue5.4.5x-src/misc.c	2025-08-02 14:24:23.786375890 +0900
@@ -283,14 +283,14 @@
 {
     THING *obj;
 
-    if ((obj = get_item("eat", FOOD)) == NULL)
+    if ((obj = get_item(GET_MSG("misc.eat"), FOOD)) == NULL)
 	return;
     if (obj->o_type != FOOD)
     {
 	if (!terse)
-	    msg("ugh, you would get ill if you ate that");
+	    msg(GET_MSG("misc.get_ill"));
 	else
-	    msg("that's Inedible!");
+	    msg(GET_MSG("misc.inedible"));
 	return;
     }
     if (food_left < 0)
@@ -301,16 +301,16 @@
     if (obj == cur_weapon)
 	cur_weapon = NULL;
     if (obj->o_which == 1)
-	msg("my, that was a yummy %s", fruit);
+	msg(GET_MSG("misc.yummy"), fruit);
     else
 	if (rnd(100) > 70)
 	{
 	    pstats.s_exp++;
-	    msg("%s, this food tastes awful", choose_str("bummer", "yuk"));
+	    msg(GET_MSG("misc.taste_awful"), choose_str(GET_MSG("misc.taste_bummer"), GET_MSG("misc.taste_yuk")));
 	    check_level();
 	}
 	else
-	    msg("%s, that tasted good", choose_str("oh, wow", "yum"));
+	    msg(GET_MSG("misc.taste_good"), choose_str(GET_MSG("misc.taste_wow"), GET_MSG("misc.taste_yum")));
     leave_pack(obj, FALSE, FALSE);
 }
 
@@ -336,9 +336,9 @@
 	max_hp += add;
 	pstats.s_hpt += add;
 	if (rname == TRUE)
-	    msg("and achieve the rank of \"%s\"", class_name[i - 1]);
+	    msg(GET_MSG("misc.achieve_rank"), class_name[i - 1]);
 	else
-	    msg("welcome to level %d", i);
+	    msg(GET_MSG("misc.welcome_level"), i);
     }
 }
 
@@ -390,7 +390,7 @@
 	no_command += rnd(8);
 	player.t_flags &= ~(ISRUN|ISHASTE);
 	extinguish(nohaste);
-	msg("you faint from exhaustion");
+	msg(GET_MSG("misc.exhaustion_faint"));
 	return FALSE;
     }
     else
@@ -450,8 +450,8 @@
 	|| obj == cur_ring[RIGHT])
     {
 	if (!terse)
-	    addmsg("That's already ");
-	msg("in use");
+	    addmsg(GET_MSG("misc.already"));
+	msg(GET_MSG("misc.in_use"));
 	return TRUE;
     }
     return FALSE;
@@ -465,7 +465,7 @@
 int
 get_dir(void)
 {
-    char *prompt;
+    const char *prompt;
     int gotit;
     static coord last_delt= {0,0};
 
@@ -478,9 +478,9 @@
     else
     {
 	if (!terse)
-	    msg(prompt = "which direction? ");
+	    msg(prompt = GET_MSG("misc.which_dir"));
 	else
-	    prompt = "direction: ";
+	    prompt = GET_MSG("misc.direction");
 	do
 	{
 	    gotit = TRUE;
@@ -559,7 +559,7 @@
     }
     else if (!info->oi_guess)
     {
-	msg(terse ? "call it: " : "what do you want to call it? ");
+	msg(terse ? GET_MSG("misc.call_it1") : GET_MSG("misc.call_it2"));
 	if (get_str(prbuf, stdscr) == NORM)
 	{
 	    if (info->oi_guess != NULL)
diff -Naur rogue5.4.5x-src.orig/monsters.c rogue5.4.5x-src/monsters.c
--- rogue5.4.5x-src.orig/monsters.c	2017-08-24 08:43:52.000000000 +0900
+++ rogue5.4.5x-src/monsters.c	2025-08-02 14:24:23.786375890 +0900
@@ -150,7 +150,7 @@
     runto(&tp->t_pos);
 #ifdef MASTER
     if (wizard)
-	msg("started a wandering %s", monsters[tp->t_type-'A'].m_name);
+	msg(GET_MSG("monsters.start_wandering"), GET_MSG(monsters[tp->t_type-'A'].m_name));
 #endif
 }
 
@@ -168,7 +168,7 @@
 
 	if ((tp = moat(y, x)) == NULL) {
 #ifdef MASTER
-		msg("can't find monster in wake_monster");
+		msg(GET_MSG("monsters.cant_find"));
 #endif
 		return NULL;
 	}
@@ -199,10 +199,10 @@
 		    fuse(unconfuse, 0, spread(HUHDURATION), AFTER);
 		player.t_flags |= ISHUH;
 		mname = set_mname(tp);
-		addmsg("%s", mname);
+		addmsg(GET_MSG("monsters.gaze_confused1"), mname);
 		if (strcmp(mname, "it") != 0)
-		    addmsg("'");
-		msg("s gaze has confused you");
+		    addmsg(GET_MSG("monsters.gaze_confused2"));
+		msg(GET_MSG("monsters.gaze_confused3"));
 	    }
 	}
     }
diff -Naur rogue5.4.5x-src.orig/move.c rogue5.4.5x-src/move.c
--- rogue5.4.5x-src.orig/move.c	2017-07-07 12:01:28.000000000 +0900
+++ rogue5.4.5x-src/move.c	2025-08-02 14:24:23.790375967 +0900
@@ -48,7 +48,7 @@
     if (no_move)
     {
 	no_move--;
-	msg("you are still stuck in the bear trap");
+	msg(GET_MSG("move.stuck_trap"));
 	return;
     }
     /*
@@ -98,7 +98,7 @@
     }
     else if (on(player, ISHELD) && ch != 'F')
     {
-	msg("you are being held");
+	msg(GET_MSG("move.being_held"));
 	return;
     }
     switch (ch)
@@ -279,40 +279,40 @@
 	case T_DOOR:
 	    level++;
 	    new_level();
-	    msg("you fell into a trap!");
+	    msg(GET_MSG("move.fell_trap"));
 	when T_BEAR:
 	    no_move += BEARTIME;
-	    msg("you are caught in a bear trap");
+	    msg(GET_MSG("move.caught_trap"));
 	when T_MYST:
 	    switch(rnd(11))
 	    {
-		case 0: msg("you are suddenly in a parallel dimension");
-		when 1: msg("the light in here suddenly seems %s", rainbow[rnd(cNCOLORS)]);
-		when 2: msg("you feel a sting in the side of your neck");
-		when 3: msg("multi-colored lines swirl around you, then fade");
-		when 4: msg("a %s light flashes in your eyes", rainbow[rnd(cNCOLORS)]);
-		when 5: msg("a spike shoots past your ear!");
-		when 6: msg("%s sparks dance across your armor", rainbow[rnd(cNCOLORS)]);
-		when 7: msg("you suddenly feel very thirsty");
-		when 8: msg("you feel time speed up suddenly");
-		when 9: msg("time now seems to be going slower");
-		when 10: msg("you pack turns %s!", rainbow[rnd(cNCOLORS)]);
+		case 0: msg(GET_MSG("move.myst_0"));
+		when 1: msg(GET_MSG("move.myst_1"), GET_MSG(rainbow[rnd(cNCOLORS)]));
+		when 2: msg(GET_MSG("move.myst_2"));
+		when 3: msg(GET_MSG("move.myst_3"));
+		when 4: msg(GET_MSG("move.myst_4"), GET_MSG(rainbow[rnd(cNCOLORS)]));
+		when 5: msg(GET_MSG("move.myst_5"));
+		when 6: msg(GET_MSG("move.myst_6"), GET_MSG(rainbow[rnd(cNCOLORS)]));
+		when 7: msg(GET_MSG("move.myst_7"));
+		when 8: msg(GET_MSG("move.myst_8"));
+		when 9: msg(GET_MSG("move.myst_9"));
+		when 10: msg(GET_MSG("move.myst_10"), GET_MSG(rainbow[rnd(cNCOLORS)]));
 	    }
 	when T_SLEEP:
 	    no_command += SLEEPTIME;
 	    player.t_flags &= ~ISRUN;
-	    msg("a strange white mist envelops you and you fall asleep");
+	    msg(GET_MSG("move.fall_asleep"));
 	when T_ARROW:
 	    if (swing(pstats.s_lvl - 1, pstats.s_arm, 1))
 	    {
 		pstats.s_hpt -= roll(1, 6);
 		if (pstats.s_hpt <= 0)
 		{
-		    msg("an arrow killed you");
+		    msg(GET_MSG("move.arrow_killed"));
 		    death('a');
 		}
 		else
-		    msg("oh no! An arrow shot you");
+		    msg(GET_MSG("move.arrow_shot"));
 	    }
 	    else
 	    {
@@ -321,7 +321,7 @@
 		arrow->o_count = 1;
 		arrow->o_pos = hero;
 		fall(arrow, FALSE);
-		msg("an arrow shoots past you");
+		msg(GET_MSG("move.arrow_past"));
 	    }
 	when T_TELEP:
 	    /*
@@ -332,21 +332,21 @@
 	    mvaddch2(tc->y, tc->x, TRAP);
 	when T_DART:
 	    if (!swing(pstats.s_lvl+1, pstats.s_arm, 1))
-		msg("a small dart whizzes by your ear and vanishes");
+		msg(GET_MSG("move.dart_whizzes"));
 	    else
 	    {
 		pstats.s_hpt -= roll(1, 4);
 		if (pstats.s_hpt <= 0)
 		{
-		    msg("a poisoned dart killed you");
+		    msg(GET_MSG("move.dart_killed"));
 		    death('d');
 		}
 		if (!ISWEARING(R_SUSTSTR) && !save(VS_POISON))
 		    chg_str(-1);
-		msg("a small dart just hit you in the shoulder");
+		msg(GET_MSG("move.dart_hit"));
 	    }
 	when T_RUST:
-	    msg("a gush of water hits you on the head");
+	    msg(GET_MSG("move.water_hit"));
 	    rust_armor(cur_armor);
     }
     flush_type();
@@ -412,14 +412,14 @@
     if ((arm->o_flags & ISPROT) || ISWEARING(R_SUSTARM))
     {
 	if (!to_death)
-	    msg("the rust vanishes instantly");
+	    msg(GET_MSG("move.rust_vanishes"));
     }
     else
     {
 	arm->o_arm++;
 	if (!terse)
-	    msg("your armor appears to be weaker now. Oh my!");
+	    msg(GET_MSG("move.armor_weaker"));
 	else
-	    msg("your armor weakens");
+	    msg(GET_MSG("move.armor_weakens"));
     }
 }
diff -Naur rogue5.4.5x-src.orig/options.c rogue5.4.5x-src/options.c
--- rogue5.4.5x-src.orig/options.c	2020-12-18 08:27:02.000000000 +0900
+++ rogue5.4.5x-src/options.c	2025-08-02 14:24:23.790375967 +0900
@@ -41,41 +41,41 @@
 int     allowchange(const OPTION *op);
 
 static const OPTION	optlist[] = {
-    {"terse",	 "Terse output",
+    { "terse",		"options.param_terse",
 		 &terse,	put_bool,	get_bool	},
-    {"flush",	 "Flush typeahead during battle",
+    { "flush",		"options.param_flush",
 		 &fight_flush,	put_bool,	get_bool	},
-    {"jump",	 "Show position only at end of run",
+    { "jump",		"options.param_jump",
 		 &jump,		put_bool,	get_bool	},
-    {"seefloor", "Show the lamp-illuminated floor",
+    { "seefloor",	"options.param_seefloor",
 		 &see_floor,	put_bool,	get_sf		},
-    {"passgo",	"Follow turnings in passageways",
+    { "passgo",		"options.param_passgo",
 		 &passgo,	put_bool,	get_bool	},
-    {"tombstone", "Print out tombstone when killed",
+    { "tombstone",	"options.param_tombstone",
 		 &tombstone,	put_bool,	get_bool	},
-    {"inven",	"Inventory style",
+    { "inven",		"options.param_inven",
 		 &inv_type,	put_inv_t,	get_inv_t	},
-    { "color",	"Use color mode",
+    { "color",		"options.param_color",
 		 &color_mode,	put_bool,	get_bool	},
-    { "bright",	"Change bright color mode",
+    { "bright",		"options.param_bright",
 		 &bright_mode,	put_bool,	get_bool	},
-    { "rank",	"Rank name",
+    { "rank",		"options.param_rank",
 		 &rname,	put_bool,	get_bool	},
-    { "slime",	"Slime & Ur-vile",
+    { "slime",		"options.param_slime",
 		 &slime_md,	put_bool,	get_bool	},
-    { "idscrl",	"1 kind of identify scroll [fixed]",
+    { "idscrl",		"options.param_idscrl",
 		 &idscr_md,	put_bool,	get_bool	},
-    { "darkroom",	"Exist dark rooms",
+    { "darkroom",	"options.param_darkroom",
 		 &dark_room,	put_bool,	get_bool	},
-    { "mazeroom",	"Exist maze rooms",
+    { "mazeroom",	"options.param_mazeroom",
 		 &maze_room,	put_bool,	get_bool	},
-    { "pcmode",	"Pc mode [fixed]",
+    { "pcmode",		"options.param_pcmode",
 		 &pc_md,	put_bool,	get_bool	},
-    {"name",	 "Name",
+    { "name",		"options.param_name",
 		 whoami,	put_str,	get_str		},
-    {"fruit",	 "Fruit",
+    { "fruit",		"options.param_fruit",
 		 fruit,		put_str,	get_str		},
-    {"file",	 "Save file",
+    { "file",		"options.param_file",
 		 file_name,	put_str,	get_str		}
 };
 
@@ -145,7 +145,7 @@
      * Switch back to original screen
      */
     wmove(hw, LINES - 1, 0);
-    waddstr(hw, "--Press space to continue--");
+    waddstr(hw, GET_MSG("options.press_space"));
     wrefresh(hw);
     wait_for(hw, ' ');
     clearok(curscr, TRUE);
@@ -164,7 +164,7 @@
 void
 pr_optname(const OPTION *op)
 {
-    wprintw(hw, "%s (\"%s\"): ", op->o_prompt, op->o_name);
+    wprintw(hw, "%s (\"%s\"): ", GET_MSG(op->o_prompt), op->o_name);
 }
 
 /*
@@ -175,7 +175,7 @@
 void
 put_bool(void *b)
 {
-    waddstr(hw, *(int *) b ? "True" : "False");
+    waddstr(hw, *(int *) b ? GET_MSG("options.true") : GET_MSG("options.false"));
 }
 
 /*
@@ -197,7 +197,7 @@
 void
 put_inv_t(void *ip)
 {
-    waddstr(hw, inv_t_name[*(int *) ip]);
+    waddstr(hw, GET_MSG(inv_t_name[*(int *) ip]));
 }
 
 /*
@@ -213,7 +213,7 @@
 
     op_bad = TRUE;
     getyx(win, oy, ox);
-    waddstr(win, *bp ? "True" : "False");
+    waddstr(win, *bp ? GET_MSG("options.true") : GET_MSG("options.false"));
     while (op_bad)
     {
 	wmove(win, oy, ox);
@@ -240,11 +240,11 @@
 		return MINUS;
 	    default:
 		wmove(win, oy, ox + 10);
-		waddstr(win, "(T or F)");
+		waddstr(win, GET_MSG("options.true_false"));
 	}
     }
     wmove(win, oy, ox);
-    waddstr(win, *bp ? "True" : "False");
+    waddstr(win, *bp ? GET_MSG("options.true") : GET_MSG("options.false"));
     waddch2(win, '\n');
     return NORM;
 }
@@ -313,8 +313,12 @@
 	    if (sp > buf)
 	    {
 		sp--;
-		for (i = strlen(unctrl(*sp)); i; i--)
-		    waddch2(win, '\b');
+		waddch2(win, '\b');
+		while ((*sp & 0xc0) == 0x80)
+		    sp--;
+		if ((*sp & 0xf0) >= 0xc0) {
+		    waddch2(win, '\b'); 
+		}
 	    }
 	    continue;
 	}
@@ -336,12 +340,14 @@
 		continue;
 	    }
 	}
-	if (sp >= &buf[MAXINP] || !(isprint(c) || c == ' '))
+	/* if (sp >= &buf[MAXINP] || !(isprint(c) || c == ' ')) */
+	if (sp >= &buf[MAXINP] || !isprintable(c))
 	    putchar(CTRL('G'));
 	else
 	{
 	    *sp++ = (char) c;
-	    waddstr(win, unctrl(c));
+	    /* waddstr(win, unctrl(c)); */
+	    waddch(win, c);
 	}
     }
     *sp = '\0';
@@ -372,7 +378,7 @@
 
     op_bad = TRUE;
     getyx(win, oy, ox);
-    waddstr(win, inv_t_name[*ip]);
+    waddstr(win, GET_MSG(inv_t_name[*ip]));
     while (op_bad)
     {
 	wmove(win, oy, ox);
@@ -404,10 +410,10 @@
 		return MINUS;
 	    default:
 		wmove(win, oy, ox + 15);
-		waddstr(win, "(O, S, or C)");
+		waddstr(win, GET_MSG("options.styles"));
 	}
     }
-    mvwprintw(win, oy, ox, "%s\n", inv_t_name[*ip]);
+    mvwprintw(win, oy, ox, "%s\n", GET_MSG(inv_t_name[*ip]));
     return NORM;
 }
 
@@ -527,6 +533,15 @@
     }
 }
 
+int
+isprintable(int c)
+{
+    unsigned char ch = (unsigned char)(c & 0xff);
+    if ((ch & 0x80) != 0) return 1; /* multi-bytes char */
+    if (ch >= 0x20 && ch < 0x7f) return 1; /* printable ascii char or space */
+    return 0;
+}
+
 /*
  * strucpy:
  *	Copy string using unctrl for things
@@ -539,7 +554,8 @@
 	len = MAXINP;
     while (len--)
     {
-	if (isprint((int)*s2) || *s2 == ' ')
+	/* if (isprint((int)*s2) || *s2 == ' ') */
+	if (isprintable((int)*s2))
 	    *s1++ = *s2;
 	s2++;
     }
diff -Naur rogue5.4.5x-src.orig/pack.c rogue5.4.5x-src/pack.c
--- rogue5.4.5x-src.orig/pack.c	2017-07-08 17:05:58.000000000 +0900
+++ rogue5.4.5x-src/pack.c	2025-08-02 14:24:23.790375967 +0900
@@ -65,7 +65,7 @@
 	    update_mdest(obj);
 	    discarded = 1;
 	    discard(obj);
-	    msg("the scroll turns to dust as you pick it up");
+	    msg(GET_MSG("pack.scroll_dust"));
 	    return;
 	}
 
@@ -172,8 +172,8 @@
     if (!silent)
     {
 	if (!terse)
-	    addmsg("you now have ");
-	msg("%s (%c)", inv_name(obj, !terse), obj->o_packch);
+	    addmsg(GET_MSG("pack.have_item1"));
+	msg(GET_MSG("pack.have_item2"), inv_name(obj, !terse), obj->o_packch);
     }
 }
 
@@ -188,10 +188,10 @@
     if (++inpack > MAXPACK)
     {
 	if (!terse)
-	    addmsg("there's ");
-	addmsg("no room");
+	    addmsg(GET_MSG("pack.no_room1"));
+	addmsg(GET_MSG("pack.no_room2"));
 	if (!terse)
-	    addmsg(" in your pack");
+	    addmsg(GET_MSG("pack.no_room3"));
 	endmsg();
 	if (from_floor)
 	    move_msg(obj);
@@ -295,11 +295,11 @@
     if (n_objs == 0)
     {
 	if (terse)
-	    msg(type == 0 ? "empty handed" :
-			    "nothing appropriate");
+	    msg(type == 0 ? GET_MSG("pack.empty_handed1") :
+			    GET_MSG("pack.empty_no_appropriate1"));
 	else
-	    msg(type == 0 ? "you are empty handed" :
-			    "you don't have anything appropriate");
+	    msg(type == 0 ? GET_MSG("pack.empty_handed2") :
+			    GET_MSG("pack.empty_no_appropriate2"));
 	return FALSE;
     }
     end_line();
@@ -336,7 +336,7 @@
 		break;
 	    default:
 #ifdef MASTER
-		debug("Where did you pick a '%s' up???", unctrl(ch));
+		debug(GET_MSG("pack.where_pick"), unctrl(ch));
 #endif
 	    case ARMOR:
 	    case POTION:
@@ -360,8 +360,8 @@
 move_msg(const THING *obj)
 {
     if (!terse)
-	addmsg("you ");
-    msg("moved onto %s", inv_name(obj, TRUE));
+	addmsg(GET_MSG("pack.moved_you1"));
+    msg(GET_MSG("pack.moved_you2"), inv_name(obj, TRUE));
 }
 
 /*
@@ -376,12 +376,12 @@
     int mch;
 
     if (pack == NULL)
-	msg("you aren't carrying anything");
+	msg(GET_MSG("pack.no_carrying"));
     else if (next(pack) == NULL)
 	msg("a) %s", inv_name(pack, FALSE));
     else
     {
-	msg(terse ? "item: " : "which item do you wish to inventory: ");
+	msg(terse ? GET_MSG("pack.item_invent1") : GET_MSG("pack.item_invent2"));
 	mch = readchar();
 	mpos = 0;
 	if (mch == ESCAPE)
@@ -395,7 +395,7 @@
 		msg("%c) %s", mch, inv_name(obj, FALSE));
 		return;
 	    }
-	msg("'%s' not in pack", unctrl(mch));
+	msg(GET_MSG("pack.not_in_pack"), unctrl(mch));
     }
 }
 
@@ -410,22 +410,22 @@
     int ch;
 
     if (pack == NULL)
-	msg("you aren't carrying anything");
+	msg(GET_MSG("pack.no_carrying"));
     else if (again)
 	if (last_pick)
 	    return last_pick;
 	else
-	    msg("you ran out");
+	    msg(GET_MSG("pack.ran_out"));
     else
     {
 	for (;;)
 	{
 	    if (!terse)
-		addmsg("which object do you want to ");
+		addmsg(GET_MSG("pack.which_object1"));
 	    addmsg(purpose);
 	    if (terse)
-		addmsg(" what");
-	    msg("? (* for list): ");
+		addmsg(GET_MSG("pack.which_object2"));
+	    msg(GET_MSG("pack.which_object3"));
 	    ch = readchar();
 	    mpos = 0;
 	    /*
@@ -454,7 +454,7 @@
 		    break;
 	    if (obj == NULL)
 	    {
-		msg("'%s' is not a valid item",unctrl(ch));
+		msg(GET_MSG("pack.invalid_item"),unctrl(ch));
 		continue;
 	    }
 	    else {
@@ -480,8 +480,8 @@
     if (value > 0)
     {
 	if (!terse)
-	    addmsg("you found ");
-	msg("%d gold pieces", value);
+	    addmsg(GET_MSG("pack.found_gold1"));
+	msg(GET_MSG("pack.found_gold2"), value);
     }
 }
 
diff -Naur rogue5.4.5x-src.orig/potions.c rogue5.4.5x-src/potions.c
--- rogue5.4.5x-src.orig/potions.c	2017-08-24 08:45:50.000000000 +0900
+++ rogue5.4.5x-src/potions.c	2025-08-02 14:24:23.790375967 +0900
@@ -25,11 +25,11 @@
 static const PACT p_actions[] =
 {
 	{ ISHUH,	unconfuse,	HUHDURATION,	/* P_CONFUSE */
-		"what a tripy feeling!",
-		"wait, what's going on here. Huh? What? Who?" },
+		"potions.pot_confuse",
+		"potions.pot_confuse2" },
 	{ ISHALU,	come_down,	SEEDURATION,	/* P_LSD */
-		"Oh, wow!  Everything seems so cosmic!",
-		"Oh, wow!  Everything seems so cosmic!" },
+		"potions.pot_cosmic",
+		"potions.pot_cosmic2" },
 	{ 0,		NULL,	0 },			/* P_POISON */
 	{ 0,		NULL,	0 },			/* P_STRENGTH */
 	{ CANSEE,	unsee,	SEEDURATION,		/* P_SEEINVIS */
@@ -43,11 +43,11 @@
 	{ 0,		NULL,	0 },			/* P_HASTE */
 	{ 0,		NULL,	0 },			/* P_RESTORE */
 	{ ISBLIND,	sight,	SEEDURATION,		/* P_BLIND */
-		"oh, bummer!  Everything is dark!  Help!",
-		"a cloak of darkness falls around you" },
+		"potions.pot_dark",
+		"potions.pot_dark2" },
 	{ ISLEVIT,	land,	HEALTIME,		/* P_LEVIT */
-		"oh, wow!  You're floating in the air!",
-		"you start to float in the air" }
+		"potions.pot_float",
+		"potions.pot_float2" }
 };
 
 /*
@@ -62,7 +62,7 @@
     int discardit = FALSE;
     int show, trip;
 
-    obj = get_item("quaff", POTION);
+    obj = get_item(GET_MSG("potions.quaff"), POTION);
     /*
      * Make certain that it is somethings that we want to drink
      */
@@ -71,9 +71,9 @@
     if (obj->o_type != POTION)
     {
 	if (!terse)
-	    msg("yuk! Why would you want to drink that?");
+	    msg(GET_MSG("potions.why_want_drink1"));
 	else
-	    msg("that's undrinkable");
+	    msg(GET_MSG("potions.why_want_drink2"));
 	return;
     }
     if (obj == cur_weapon)
@@ -92,11 +92,11 @@
 	when P_POISON:
 	    pot_info[P_POISON].oi_know = TRUE;
 	    if (ISWEARING(R_SUSTSTR))
-		msg("you feel momentarily sick");
+		msg(GET_MSG("potions.momentarily_sick"));
 	    else
 	    {
 		chg_str(-(rnd(3) + 1));
-		msg("you feel very sick now");
+		msg(GET_MSG("potions.very_sick"));
 		come_down();
 	    }
 	when P_HEALING:
@@ -104,17 +104,17 @@
 	    if ((pstats.s_hpt += roll(pstats.s_lvl, 4)) > max_hp)
 		pstats.s_hpt = ++max_hp;
 	    sight();
-	    msg("you begin to feel better");
+	    msg(GET_MSG("potions.feel_better"));
 	when P_STRENGTH:
 	    pot_info[P_STRENGTH].oi_know = TRUE;
 	    chg_str(1);
-	    msg("you feel stronger, now.  What bulging muscles!");
+	    msg(GET_MSG("potions.feel_stronger"));
 	when P_MFIND:
 	    player.t_flags |= SEEMONST;
 	    fuse(turn_see_off, TRUE, HUHDURATION, AFTER);
 	    if (!turn_see(FALSE))
-		msg("you have a %s feeling for a moment, then it passes",
-		    choose_str("normal", "strange"));
+		msg(GET_MSG("potions.moment_and_passed"),
+		    GET_MSG(choose_str("potions.feel_normal", "potions.feel_strange")));
 	when P_TFIND:
 	    /*
 	     * Potion of magic detection.  Show the potions and scrolls
@@ -149,11 +149,11 @@
 	    if (show)
 	    {
 		pot_info[P_TFIND].oi_know = TRUE;
-		show_win("You sense the presence of magic on this level.--More--");
+		show_win(GET_MSG("potions.sense_magic"));
 	    }
 	    else
-		msg("you have a %s feeling for a moment, then it passes",
-		    choose_str("normal", "strange"));
+		msg(GET_MSG("potions.moment_and_passed"),
+		    GET_MSG(choose_str("potions.feel_normal", "potions.feel_strange")));
 	when P_LSD:
 	    if (pc_md == FALSE) {
 		if (!trip)
@@ -169,10 +169,10 @@
 		pot_info[P_LSD].oi_know = TRUE;
 		no_command = HOLDTIME;
 		player.t_flags &= ~ISRUN;
-		msg("you can't move");
+		msg(GET_MSG("potions.cant_move"));
 	    }
 	when P_SEEINVIS:
-	    sprintf(prbuf, "this potion tastes like %s juice", fruit);
+	    sprintf(prbuf, GET_MSG("potions.taste_juice"), fruit);
 	    show = on(player, CANSEE);
 	    do_pot(P_SEEINVIS, FALSE);
 	    if (!show)
@@ -180,7 +180,7 @@
 	    sight();
 	when P_RAISE:
 	    pot_info[P_RAISE].oi_know = TRUE;
-	    msg("you suddenly feel much more skillful");
+	    msg(GET_MSG("potions.feel_skillful"));
 	    raise_level();
 	when P_XHEAL:
 	    pot_info[P_XHEAL].oi_know = TRUE;
@@ -192,12 +192,12 @@
 	    }
 	    sight();
 	    come_down();
-	    msg("you begin to feel much better");
+	    msg(GET_MSG("potions.feel_much_better"));
 	when P_HASTE:
 	    pot_info[P_HASTE].oi_know = TRUE;
 	    after = FALSE;
 	    if (add_haste(TRUE))
-		msg("you feel yourself moving much faster");
+		msg(GET_MSG("potions.feel_faster"));
 	when P_RESTORE:
 	    if (ISRING(LEFT, R_ADDSTR))
 		add_str(&pstats.s_str, -cur_ring[LEFT]->o_arm);
@@ -209,17 +209,17 @@
 		add_str(&pstats.s_str, cur_ring[LEFT]->o_arm);
 	    if (ISRING(RIGHT, R_ADDSTR))
 		add_str(&pstats.s_str, cur_ring[RIGHT]->o_arm);
-	    msg("hey, this tastes great.  It make you feel warm all over");
+	    msg(GET_MSG("potions.taste_great"));
 	when P_BLIND:
 	    do_pot(P_BLIND, TRUE);
 	when P_LEVIT:
 	    if (pc_md == FALSE)
 		do_pot(P_LEVIT, TRUE);
 	    else
-		msg("this potion tastes extremely dull");
+		msg(GET_MSG("potions.taste_dull"));
 #ifdef MASTER
 	otherwise:
-	    msg("what an odd tasting potion!");
+	    msg(GET_MSG("potions.taste_odd"));
 	    return;
 #endif
     }
@@ -394,5 +394,5 @@
     }
     else
 	lengthen(pp->pa_daemon, t);
-    msg(choose_str(pp->pa_high, pp->pa_straight));
+    msg(GET_MSG(choose_str(pp->pa_high, pp->pa_straight)));
 }
diff -Naur rogue5.4.5x-src.orig/rings.c rogue5.4.5x-src/rings.c
--- rogue5.4.5x-src.orig/rings.c	2017-07-07 12:01:40.000000000 +0900
+++ rogue5.4.5x-src/rings.c	2025-08-02 14:24:23.790375967 +0900
@@ -24,7 +24,7 @@
     THING *obj;
     int ring;
 
-    obj = get_item("put on", RING);
+    obj = get_item(GET_MSG("rings.put_on"), RING);
     /*
      * Make certain that it is somethings that we want to wear
      */
@@ -33,9 +33,9 @@
     if (obj->o_type != RING)
     {
 	if (!terse)
-	    msg("it would be difficult to wrap that around a finger");
+	    msg(GET_MSG("rings.difficult_wrap"));
 	else
-	    msg("not a ring");
+	    msg(GET_MSG("rings.not_ring"));
 	return;
     }
 
@@ -57,9 +57,9 @@
     else
     {
 	if (!terse)
-	    msg("you already have a ring on each hand");
+	    msg(GET_MSG("rings.already_have"));
 	else
-	    msg("wearing two");
+	    msg(GET_MSG("rings.wearing_two"));
 	return;
     }
     cur_ring[ring] = obj;
@@ -81,8 +81,8 @@
     }
 
     if (!terse)
-	addmsg("you are now wearing ");
-    msg("%s (%c)", inv_name(obj, TRUE), obj->o_packch);
+	addmsg(GET_MSG("rings.now_wearing1"));
+    msg(GET_MSG("rings.now_wearing2"), inv_name(obj, TRUE), obj->o_packch);
 }
 
 /*
@@ -99,9 +99,9 @@
     if (cur_ring[LEFT] == NULL && cur_ring[RIGHT] == NULL)
     {
 	if (terse)
-	    msg("no rings");
+	    msg(GET_MSG("rings.no_rings1"));
 	else
-	    msg("you aren't wearing any rings");
+	    msg(GET_MSG("rings.no_rings2"));
 	return;
     }
     else if (cur_ring[LEFT] == NULL)
@@ -115,11 +115,11 @@
     obj = cur_ring[ring];
     if (obj == NULL)
     {
-	msg("not wearing such a ring");
+	msg(GET_MSG("rings.not_wearing"));
 	return;
     }
     if (dropcheck(obj))
-	msg("was wearing %s(%c)", inv_name(obj, TRUE), obj->o_packch);
+	msg(GET_MSG("rings.was_wearing"), inv_name(obj, TRUE), obj->o_packch);
 }
 
 /*
@@ -134,9 +134,9 @@
     for (;;)
     {
 	if (terse)
-	    msg("left or right ring? ");
+	    msg(GET_MSG("rings.left_or_right1"));
 	else
-	    msg("left hand or right hand? ");
+	    msg(GET_MSG("rings.left_or_right2"));
 	if ((c = readchar()) == ESCAPE)
 	    return -1;
 	mpos = 0;
@@ -145,9 +145,9 @@
 	else if (c == 'r' || c == 'R')
 	    return RIGHT;
 	if (terse)
-	    msg("L or R");
+	    msg(GET_MSG("rings.please_l_r1"));
 	else
-	    msg("please type L or R");
+	    msg(GET_MSG("rings.please_l_r2"));
     }
 }
 
diff -Naur rogue5.4.5x-src.orig/rip.c rogue5.4.5x-src/rip.c
--- rogue5.4.5x-src.orig/rip.c	2017-08-25 18:33:08.000000000 +0900
+++ rogue5.4.5x-src/rip.c	2025-08-02 14:22:41.688411139 +0900
@@ -25,15 +25,15 @@
 static char *rip[] = {
 "                       __________\n",
 "                      /          \\\n",
-"                     /    REST    \\\n",
-"                    /      IN      \\\n",
-"                   /     PEACE      \\\n",
+"                     /            \\\n",
+"                    /              \\\n",
+"                   /                \\\n",
 "                  /                  \\\n",
 "                  |                  |\n",
 "                  |                  |\n",
-"                  |   killed by a    |\n",
 "                  |                  |\n",
-"                  |       1980       |\n",
+"                  |                  |\n",
+"                  |                  |\n",
 "                 *|     *  *  *      | *\n",
 "         ________)/\\\\_//(\\/(/\\)/\\//\\/|_)_______\n",
     0
@@ -49,7 +49,7 @@
 score(int amount, int flags, int monst)
 {
     SCORE *scp;
-    int i;
+    int i, n;
     SCORE *sc2;
     SCORE *top_ten, *endp;
 # ifdef MASTER
@@ -58,10 +58,10 @@
     void (*fp)(int);
     uid_t uid;
     char *reason[] = {
-	"killed",
-	"quit",
-	"A total winner",
-	"killed with Amulet"
+	"rip.killed",
+	"rip.quit",
+	"rip.a_total_winner",
+	"rip.killed_with_amulet",
     };
     char buf[160], buf2[160];
 
@@ -73,7 +73,7 @@
 #endif
 	)
     {
-	mvaddstr(LINES - 1, 0 , "[Press return to continue]");
+	mvaddstr(LINES - 1, 0 , GET_MSG("rip.press_return"));
 	refresh();
 	wgetnstr(stdscr,prbuf,80);
 	endwin();
@@ -169,8 +169,8 @@
      */
     if (flags != -1)
 	putchar('\n');
-    printf("Top %s %s:\n", Numname, allscore ? "Scores" : "Rogueists");
-    printf("   Score Name\n");
+    printf(GET_MSG("rip.top"), Numname, GET_MSG(allscore ? "rip.scores" : "rip.rogueists"));
+    printf(GET_MSG("rip.score_name"));
     for (scp = top_ten; scp < endp; scp++)
     {
 	if (scp->sc_score) {
@@ -178,18 +178,22 @@
 		md_raw_standout();
 		printf("\x1b[7m");
 	    }
-	    sprintf(buf, "%2d %5d %s: %s on level %d", (int) (scp - top_ten + 1),
-		scp->sc_score, scp->sc_name, reason[scp->sc_flags],
-		scp->sc_level);
+	    n = sprintf(buf, "%2d %5d %s: ", (int) (scp - top_ten + 1),
+		scp->sc_score, scp->sc_name);
+	    n += sprintf(buf + n, GET_MSG("rip.on_level1"), GET_MSG(reason[scp->sc_flags]));
+	    n += sprintf(buf + n, GET_MSG("rip.on_level2"), scp->sc_level);
+            
 	    if (scp->sc_flags == 0 || scp->sc_flags == 3) {
-		sprintf(buf2, " by %s", killname(scp->sc_monster, TRUE));
-		strncat(buf, buf2, 80);
+		n += snprintf(buf + n, 80, GET_MSG("rip.on_level3"), killname(scp->sc_monster, TRUE));
 	    }
+
+	    n += sprintf(buf + n, GET_MSG("rip.on_level4"), GET_MSG(reason[scp->sc_flags]));
 #ifdef MASTER
 	    if (prflags == 1)
 	    {
 		sprintf(buf2, " (%s)", md_getrealname(scp->sc_uid));
-		strncat(buf, buf2, 80);
+		n = strlen(buf);
+		strncat(buf, buf2, sizeof(buf) - n - 1);
 	    }
 	    else if (prflags == 2)
 	    {
@@ -211,9 +215,10 @@
 	    }
 	    else
 #endif /* MASTER */
-	    sprintf(buf2, "%s%-80s", buf, ".");
-	    buf2[79] = '\0';
-//	    printf("%s", buf2);
+	    n = snprintf(buf2, sizeof(buf2)-1, "%s%s", buf, GET_MSG("rip.on_level5"));
+	    buf2[n] = '\0';
+	    if (COLS > 0) /* COLS is 0 when running "rogue -s" */
+		utf8truncate(buf2, COLS);
 	    fputs(buf2, stdout);
 	    if (sc2 == scp) {
 		printf("\x1b[m");
@@ -307,6 +312,7 @@
     const char *killer;
     struct tm *lt;
     time_t date;
+    char anbuf[4];
 
     signal(SIGINT, SIG_IGN);
     purse -= purse / 10;
@@ -317,11 +323,15 @@
     refresh2();
     if (!tombstone)
     {
-	mvprintw(LINES - 2, 0, "Killed by ");
-	killer = killname(monst, FALSE);
-	if (monst != 's' && monst != 'h')
-	    printw("a%s ", vowelstr(killer));
-	printw("%s with %d gold", killer, purse);
+	mvprintw(LINES - 2, 0, GET_MSG("rip.notomb_killed"));
+        anbuf[0] = '\0';
+	if (monst != 's' && monst != 'h' && isalpha(killer[0]))
+	    sprintf(anbuf, " a%s", vowelstr(killer));
+	if (isupper(monst)) {
+	    printw(GET_MSG("rip.notomb_killedby1"), anbuf, killer, purse);
+	} else {
+	    printw(GET_MSG("rip.notomb_killedby2"), anbuf, killer, purse);
+	}
     }
     else
     {
@@ -331,11 +341,20 @@
 	dp = rip;
 	while (*dp)
 	    addstr(*dp++);
-	mvaddstr(17, center(killer), killer);
-	if (monst == 's' || monst == 'h')
-	    mvaddch2(16, 32, ' ');
-	else
-	    mvaddstr(16, 33, vowelstr(killer));
+	mvaddstr(10, 24, GET_MSG("rip.tomb_rip1"));
+	mvaddstr(11, 24, GET_MSG("rip.tomb_rip2"));
+	mvaddstr(12, 24, GET_MSG("rip.tomb_rip3"));
+        if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+	    mvaddstr(16, center(killer), killer);
+	    mvaddstr(17, 23, GET_MSG("rip.tomb_killed"));
+        } else {
+	    mvaddstr(16, 22, GET_MSG("rip.tomb_killed"));
+	    if (monst == 's' || monst == 'h' || !isalpha(killer[0]))
+		mvaddch2(16, 32, ' ');
+	    else
+		mvaddstr(16, 33, vowelstr(killer));
+	    mvaddstr(17, center(killer), killer);
+        }
 	mvaddstr(14, center(whoami), whoami);
 	sprintf(prbuf, "%d Au", purse);
 	move(15, center(prbuf));
@@ -348,7 +367,7 @@
     writelog(purse, amulet ? 3 : 0, monst);
     score(purse, amulet ? 3 : 0, monst);
     /* Make sure the output gets through. */
-    printf("[Press return to exit]\n");
+    printf(GET_MSG("rip.return_exit"));
     fflush(NULL);
     getchar();
     my_exit(0);
@@ -361,7 +380,7 @@
 int
 center(const char *str)
 {
-    return 28 - (((int)strlen(str) + 1) / 2);
+    return 28 - (((int)utf8width(str) + 1) / 2);
 }
 
 /*
@@ -388,16 +407,16 @@
     addstr("  @   @ @   @ @  @@   @   @ @   @ @   @ @         @   @  @     \n");
     addstr("   @@@   @@@   @@ @   @   @  @@@@  @@@@  @@@     @@@   @@   @  \n");
     addstr("                                                               \n");
-    addstr("     Congratulations, you have made it to the light of day!    \n");
+    addstr(GET_MSG("rip.congratulations"));
     standend2();
-    addstr("\nYou have joined the elite ranks of those who have escaped the\n");
-    addstr("Dungeons of Doom alive.  You journey home and sell all your loot at\n");
-    addstr("a great profit and are admitted to the Fighters' Guild.\n");
-    mvaddstr(LINES - 1, 0, "--Press space to continue--");
+    addstr(GET_MSG("rip.winner1"));
+    addstr(GET_MSG("rip.winner2"));
+    addstr(GET_MSG("rip.winner3"));
+    mvaddstr(LINES - 1, 0, GET_MSG("rip.return_continue"));
     refresh();
     wait_for(stdscr, ' ');
     clear();
-    mvaddstr(0, 0, "   Worth  Item\n");
+    mvaddstr(0, 0, GET_MSG("rip.worth_item"));
     oldpurse = purse;
     for (obj = pack; obj != NULL; obj = next(obj))
     {
@@ -459,11 +478,11 @@
 	printw("%c) %5d  %s\n", obj->o_packch, worth, inv_name(obj, FALSE));
 	purse += worth;
     }
-    printw("   %5d  Gold Pieces          ", oldpurse);
+    printw(GET_MSG("rip.gold_pieces"), oldpurse);
     refresh();
     writelog(purse, 2, ' ');
     score(purse, 2, ' ');
-    printf("[Press return to exit]\n");
+    printf(GET_MSG("rip.return_exit"));
     fflush(NULL);
     getchar();
     my_exit(0);
@@ -480,32 +499,32 @@
     const char *sp;
     int article;
     struct h_list nlist[] = {
-	{'a',	"arrow",		TRUE},
-	{'b',	"bolt",			TRUE},
-	{'d',	"dart",			TRUE},
-	{'h',	"hypothermia",		FALSE},
-	{'s',	"starvation",		FALSE},
+	{'a',	"rip.killname_arrow",		TRUE},
+	{'b',	"rip.killname_bolt",			TRUE},
+	{'d',	"rip.killname_dart",			TRUE},
+	{'h',	"rip.killname_hypothermia",		FALSE},
+	{'s',	"rip.killname_starvation",		FALSE},
 	{'\0'}
     };
 
     if (isupper(monst))
     {
-	sp = monsters[monst-'A'].m_name;
+	sp = GET_MSG(monsters[monst-'A'].m_name);
 	article = TRUE;
     }
     else
     {
-	sp = "Wally the Wonder Badger";
+	sp = GET_MSG("rip.killname_wally");
 	article = FALSE;
 	for (hp = nlist; hp->h_ch; hp++)
 	    if (hp->h_ch == monst)
 	    {
-		sp = hp->h_desc;
+		sp = GET_MSG(hp->h_desc);
 		article = hp->h_print;
 		break;
 	    }
     }
-    if (doart && article)
+    if (doart && article && sp != NULL && isalpha(sp[0]))
 	sprintf(prbuf, "a%s ", vowelstr(sp));
     else
 	prbuf[0] = '\0';
diff -Naur rogue5.4.5x-src.orig/rogue.h rogue5.4.5x-src/rogue.h
--- rogue5.4.5x-src.orig/rogue.h	2017-07-09 17:25:36.000000000 +0900
+++ rogue5.4.5x-src/rogue.h	2025-08-02 14:24:23.790375967 +0900
@@ -754,6 +754,7 @@
 void	status(void);
 int	step_ok(int ch);
 void	stomach(void);
+int	isprintable(int c);
 void	strucpy(char *s1, const char *s2, size_t len);
 void	swander(void);
 int	swing(int at_lvl, int op_arm, int wplus);
diff -Naur rogue5.4.5x-src.orig/save.c rogue5.4.5x-src/save.c
--- rogue5.4.5x-src.orig/save.c	2021-03-25 09:35:06.000000000 +0900
+++ rogue5.4.5x-src/save.c	2025-08-02 14:24:23.794376044 +0900
@@ -42,9 +42,9 @@
 	for (;;)
 	{
 	    if (use_savedir)
-		msg("Save game? ");
+		msg(GET_MSG("save.game"));
 	    else
-		msg("Save file (%s)? ", file_name);
+		msg(GET_MSG("save.file"), file_name);
 	    c = readchar();
 	    mpos = 0;
 	    if (c == ESCAPE)
@@ -55,7 +55,7 @@
 	    else if (c == 'n' || c == 'N' || c == 'y' || c == 'Y')
 		break;
 	    else
-		msg("please answer Y or N");
+		msg(GET_MSG("save.please_answer"));
 	}
 	if (c == 'y' || c == 'Y')
 	{
@@ -71,7 +71,7 @@
     do
     {
 	mpos = 0;
-	msg("file name: ");
+	msg(GET_MSG("save.filename"));
 	buf[0] = '\0';
 	if (get_str(buf, stdscr) == QUIT)
 	{
@@ -88,7 +88,7 @@
 	{
 	    for (;;)
 	    {
-		msg("File exists.  Do you wish to overwrite it?");
+		msg(GET_MSG("save.confirm"));
 		c = readchar();
 		mpos = 0;
 		if (c == ESCAPE)
@@ -98,9 +98,9 @@
 		else if (c == 'n' || c == 'N')
 		    goto over;
 		else
-		    msg("Please answer Y or N");
+		    msg(GET_MSG("save.please_answer"));
 	    }
-	    msg("file name: %s", buf);
+	    msg(GET_MSG("save.filename"), buf);
 	    md_unlink(file_name);
 	}
 	strcpy(file_name, buf);
@@ -155,7 +155,7 @@
     rs_save_file(savef);
     fflush(savef);
     fclose(savef);
-    printf("See you soon, %s!\n", whoami);
+    printf(GET_MSG("save.see_you_soon"), whoami);
     exit(0);
 }
 
@@ -195,7 +195,7 @@
     encread(buf, strlen(version) + 1, inf);
     if (strcmp(buf, version) != 0)
     {
-	printf("Sorry, saved game is out of date.\n");
+	printf(GET_MSG("save.out_of_date"));
 	return FALSE;
     }
     encread(buf,80,inf);
@@ -208,15 +208,15 @@
     if (lines > LINES)
     {
 	endwin();
-	printf("Sorry, original game was played on a screen with %d lines.\n",lines);
-	printf("Current screen only has %d lines. Unable to restore game\n",LINES);
+	printf(GET_MSG("save.played_lines"),lines);
+	printf(GET_MSG("save.unable_restore_l"),LINES);
 	return(FALSE);
     }
     if (cols > COLS)
     {
 	endwin();
-	printf("Sorry, original game was played on a screen with %d columns.\n",cols);
-	printf("Current screen only has %d columns. Unable to restore game\n",COLS);
+	printf(GET_MSG("save.played_columns"),cols);
+	printf(GET_MSG("save.unable_restore_c"),COLS);
 	return(FALSE);
     }
 
@@ -235,7 +235,7 @@
 #endif
 	md_unlink_open_file(file, inf) < 0)
     {
-	printf("Cannot unlink file\n");
+	printf(GET_MSG("save.unlink_file"));
 	return FALSE;
     }
     mpos = 0;
@@ -253,14 +253,14 @@
 	if (sbuf2.st_nlink != 1 || syml)
 	{
 	    endwin();
-	    printf("\nCannot restore from a linked file\n");
+	    printf(GET_MSG("save.cannot_restore"));
 	    return FALSE;
 	}
 
     if (pstats.s_hpt <= 0)
     {
 	endwin();
-	printf("\n\"He's dead, Jim\"\n");
+	printf(GET_MSG("save.dead_jim"));
 	return FALSE;
     }
 
@@ -270,7 +270,7 @@
     clearok(curscr, TRUE);
     srand(md_random_seed());
     if (!(rname))
-	msg("file name: %s", file);
+	msg(GET_MSG("save.filename2"), file);
     fclose(inf);
     slime_md2 = slime_md;
     slime_snake();
diff -Naur rogue5.4.5x-src.orig/scmisc.c rogue5.4.5x-src/scmisc.c
--- rogue5.4.5x-src.orig/scmisc.c	2017-07-07 12:01:52.000000000 +0900
+++ rogue5.4.5x-src/scmisc.c	2025-08-02 14:24:23.794376044 +0900
@@ -201,7 +201,7 @@
 		article = FALSE;
 	    }
     }
-    if (doart && article)
+    if (doart && article && isalpha(sp[0]))
 	sprintf(prbuf, "a%s ", s_vowelstr(sp));
     else
 	prbuf[0] = '\0';
diff -Naur rogue5.4.5x-src.orig/scrolls.c rogue5.4.5x-src/scrolls.c
--- rogue5.4.5x-src.orig/scrolls.c	2017-07-07 12:01:54.000000000 +0900
+++ rogue5.4.5x-src/scrolls.c	2025-08-02 14:24:23.794376044 +0900
@@ -32,15 +32,15 @@
     THING *orig_obj;
     coord mp;
 
-    obj = get_item("read", SCROLL);
+    obj = get_item(GET_MSG("scrolls.read"), SCROLL);
     if (obj == NULL)
 	return;
     if (obj->o_type != SCROLL)
     {
 	if (!terse)
-	    msg("there is nothing on it to read");
+	    msg(GET_MSG("scrolls.nothing_it_read"));
 	else
-	    msg("nothing to read");
+	    msg(GET_MSG("scrolls.nothing_read"));
 	return;
     }
     /*
@@ -62,13 +62,13 @@
 	     * Scroll of monster confusion.  Give him that power.
 	     */
 	    player.t_flags |= CANHUH;
-	    msg("your hands begin to glow %s", pick_color("red"));
+	    msg(GET_MSG("scrolls.glow_hands"), GET_MSG(pick_color("red")));
 	when S_ARMOR:
 	    if (cur_armor != NULL)
 	    {
 		cur_armor->o_arm--;
 		cur_armor->o_flags &= ~ISCURSED;
-		msg("your armor glows %s for a moment", pick_color("silver"));
+		msg(GET_MSG("scrolls.glow_armor"), GET_MSG(pick_color("silver")));
 	    }
 	when S_HOLD:
 	    /*
@@ -89,17 +89,17 @@
 			    }
 	    if (ch)
 	    {
-		addmsg("the monster");
+		addmsg(GET_MSG("scrolls.monster"));
 		if (ch > 1)
-		    addmsg("s around you");
-		addmsg(" freeze");
+		    addmsg(GET_MSG("scrolls.around_you"));
+		addmsg(GET_MSG("scrolls.freeze"));
 		if (ch == 1)
-		    addmsg("s");
+		    addmsg("scrolls.s");
 		endmsg();
 		scr_info[S_HOLD].oi_know = TRUE;
 	    }
 	    else
-		msg("you feel a strange sense of loss");
+		msg(GET_MSG("scrolls.feel_sense_loss"));
 	when S_SLEEP:
 	    /*
 	     * Scroll which makes you fall asleep
@@ -107,7 +107,7 @@
 	    scr_info[S_SLEEP].oi_know = TRUE;
 	    no_command += rnd(SLEEPTIME) + 4;
 	    player.t_flags &= ~ISRUN;
-	    msg("you fall asleep");
+	    msg(GET_MSG("scrolls.fall_asleep"));
 	when S_CREATE:
 	    /*
 	     * Create a monster:
@@ -138,7 +138,7 @@
 			}
 		    }
 	    if (i == 0)
-		msg("you hear a faint cry of anguish in the distance");
+		msg(GET_MSG("scrolls.hear_cry"));
 	    else
 	    {
 		obj = new_item();
@@ -156,7 +156,7 @@
 	     * Identify, let him figure something out
 	     */
 	    scr_info[obj->o_which].oi_know = TRUE;
-	    msg("this scroll is an %s scroll", scr_info[obj->o_which].oi_name);
+	    msg(GET_MSG("scrolls.is_scroll"), GET_MSG(scr_info[obj->o_which].oi_name));
 	    if (idscr_md != TRUE)
 		whatis(TRUE, id_type[obj->o_which]);
 	    else
@@ -167,7 +167,7 @@
 	     * Scroll of magic mapping.
 	     */
 	    scr_info[S_MAP].oi_know = TRUE;
-	    msg("oh, now this scroll has a map on it");
+	    msg(GET_MSG("scrolls.has_map"));
 	    /*
 	     * take all the things we want to keep hidden out of the window
 	     */
@@ -247,10 +247,10 @@
 	    if (ch)
 	    {
 		scr_info[S_FDET].oi_know = TRUE;
-		show_win("Your nose tingles and you smell food.--More--");
+		show_win(GET_MSG("scrolls.nose_tingles_smell"));
 	    }
 	    else
-		msg("your nose tingles");
+		msg(GET_MSG("scrolls.nose_tingles"));
 	when S_TELEP:
 	    /*
 	     * Scroll of teleportation:
@@ -264,7 +264,7 @@
 	    }
 	when S_ENCH:
 	    if (cur_weapon == NULL || cur_weapon->o_type != WEAPON)
-		msg("you feel a strange sense of loss");
+		msg(GET_MSG("scrolls.feel_sense_loss"));
 	    else
 	    {
 		cur_weapon->o_flags &= ~ISCURSED;
@@ -272,29 +272,29 @@
 		    cur_weapon->o_hplus++;
 		else
 		    cur_weapon->o_dplus++;
-		msg("your %s glows %s for a moment",
-		    weap_info[cur_weapon->o_which].oi_name, pick_color("blue"));
+		msg(GET_MSG("scrolls.glow_weapon"),
+		    GET_MSG(weap_info[cur_weapon->o_which].oi_name), GET_MSG(pick_color("blue")));
 	    }
 	when S_SCARE:
 	    /*
 	     * Reading it is a mistake and produces laughter at her
 	     * poor boo boo.
 	     */
-	    msg("you hear maniacal laughter in the distance");
+	    msg(GET_MSG("scrolls.hear_laughter"));
 	when S_REMOVE:
 	    uncurse(cur_armor);
 	    uncurse(cur_weapon);
 	    uncurse(cur_ring[LEFT]);
 	    uncurse(cur_ring[RIGHT]);
-	    msg(choose_str("you feel in touch with the Universal Onenes",
-			   "you feel as if somebody is watching over you"));
+	    msg(GET_MSG(choose_str("scrolls.feel_onenes",
+				   "scrolls.feel_watching")));
 	when S_AGGR:
 	    /*
 	     * This scroll aggravates all the monsters on the current
 	     * level and sets them running towards the hero
 	     */
 	    aggravate();
-	    msg("you hear a high pitched humming noise");
+	    msg(GET_MSG("scrolls.hear_noise"));
 	when S_PROTECT:
 /*      when S_NOP: */
 	    if (pc_md == FALSE) {
@@ -302,17 +302,17 @@
 		{
 		    uncurse(cur_armor);
 		    cur_armor->o_flags |= ISPROT;
-		    msg("your armor is covered by a shimmering %s shield",
-			pick_color("gold"));
+		    msg(GET_MSG("scrolls.armor_covered"),
+			GET_MSG(pick_color("gold")));
 		}
 		else
-		    msg("you feel a strange sense of loss");
+		    msg(GET_MSG("scrolls.feel_sense_loss"));
 	    }
 	    else
-		msg("this scroll seems to be blank");
+		msg(GET_MSG("scrolls.seems_blank"));
 #ifdef MASTER
 	otherwise:
-	    msg("what a puzzling scroll!");
+	    msg(GET_MSG("scrolls.what_puzzling"));
 	    return;
 #endif
     }
diff -Naur rogue5.4.5x-src.orig/sticks.c rogue5.4.5x-src/sticks.c
--- rogue5.4.5x-src.orig/sticks.c	2021-03-25 09:41:56.000000000 +0900
+++ rogue5.4.5x-src/sticks.c	2025-08-02 14:24:23.794376044 +0900
@@ -57,21 +57,21 @@
 {
     THING *obj, *tp;
     int y, x, i;
-    char *name;
+    const char *name;
     int monster, oldch;
     THING bolt;
 
-    if ((obj = get_item("zap with", STICK)) == NULL)
+    if ((obj = get_item(GET_MSG("sticks.zap_with"), STICK)) == NULL)
 	return;
     if (obj->o_type != STICK)
     {
 	after = FALSE;
-	msg("you can't zap with that!");
+	msg(GET_MSG("sticks.cant_zap"));
 	return;
     }
     if (obj->o_charges == 0)
     {
-	msg("nothing happens");
+	msg(GET_MSG("sticks.nothing_happens"));
 	return;
     }
     i = obj->o_which;
@@ -85,7 +85,7 @@
 	     */
 	    ws_info[WS_LIGHT].oi_know = TRUE;
 	    if (proom->r_flags & ISGONE)
-		msg("the corridor glows and then fades");
+		msg(GET_MSG("sticks.glows_corridor"));
 	    else
 	    {
 		proom->r_flags &= ~ISDARK;
@@ -93,9 +93,10 @@
 		 * Light the room and put the player back up
 		 */
 		enter_room(&hero);
-		addmsg("the room is lit");
+		addmsg(GET_MSG("sticks.room_lit1"));
 		if (!terse)
-		    addmsg(" by a shimmering %s light", pick_color("blue"));
+		    addmsg(GET_MSG("sticks.room_lit2"), GET_MSG(pick_color("blue")));
+		addmsg(GET_MSG("sticks.room_lit3"));
 		endmsg();
 	    }
 	when WS_DRAIN:
@@ -106,7 +107,7 @@
 	     */
 	    if (pstats.s_hpt < 2)
 	    {
-		msg("you are too weak to use it");
+		msg(GET_MSG("sticks.too_weak_use"));
 		return;
 	    }
 	    else
@@ -197,9 +198,9 @@
 		&& !save_throw(VS_MAGIC, tp))
 		    hit_monster(unc(bolt.o_pos), &bolt);
 	    else if (terse)
-		msg("missile vanishes");
+		msg(GET_MSG("sticks.missile_vanishes"));
 	    else
-		msg("the missile vanishes with a puff of smoke");
+		msg(GET_MSG("sticks.vanishes_with_smoke"));
 	when WS_HIT + MAXSTICKS:
 	    delta.y += hero.y;
 	    delta.x += hero.x;
@@ -248,18 +249,18 @@
 	case WS_FIRE:
 	case WS_COLD:
 	    if (obj->o_which == WS_ELECT)
-		name = "bolt";
+		name = GET_MSG("sticks.ws_bolt");
 	    else if (obj->o_which == WS_FIRE)
-		name = "flame";
+		name = GET_MSG("sticks.ws_flame");
 	    else
-		name = "ice";
+		name = GET_MSG("sticks.ws_ice");
 	    fire_bolt(&hero, &delta, name);
 	    ws_info[obj->o_which].oi_know = TRUE;
 	when WS_NOP:
 	    break;
 #ifdef MASTER
 	otherwise:
-	    msg("what a bizarre schtick!");
+	    msg(GET_MSG("sticks.bizarre_schtick"));
 #endif
     }
     obj->o_charges--;
@@ -297,7 +298,7 @@
 		*dp++ = mp;
     if ((cnt = (int)(dp - drainee)) == 0)
     {
-	msg("you have a tingling feeling");
+	msg(GET_MSG("sticks.have_tingling"));
 	return;
     }
     *dp = NULL;
@@ -376,7 +377,7 @@
 		dir->y = -dir->y;
 		dir->x = -dir->x;
 		c1--;
-		msg("the %s bounces", name);
+		msg(GET_MSG("sticks.bounces"), GET_MSG(name));
 		break;
 	    default:
 def:
@@ -389,11 +390,12 @@
 		    {
 			bolt.o_pos = pos;
 			used = TRUE;
-			if (tp->t_type == 'D' && strcmp(name, "flame") == 0)
+			if (tp->t_type == 'D' && strcmp(name, dragon_flame) == 0)
 			{
-			    addmsg("the flame bounces");
+			    addmsg(GET_MSG("sticks.flame_bounces1"));
 			    if (!terse)
-				addmsg(" off the dragon");
+				addmsg(GET_MSG("sticks.flame_bounces2"));
+			    addmsg(GET_MSG("sticks.flame_bounces3"));
 			    endmsg();
 			}
 			else
@@ -404,9 +406,9 @@
 			if (start == &hero)
 			    runto(&pos);
 			if (terse)
-			    msg("%s misses", name);
+			    msg(GET_MSG("sticks.misses"), GET_MSG(name));
 			else
-			    msg("the %s whizzes past %s", name, set_mname(tp));
+			    msg(GET_MSG("sticks.whizzes_past"), GET_MSG(name), set_mname(tp));
 		    }
 		}
 		else if (hit_hero && ce(pos, hero))
@@ -424,12 +426,12 @@
 			}
 			used = TRUE;
 			if (terse)
-			    msg("the %s hits", name);
+			    msg(GET_MSG("sticks.hits"), GET_MSG(name));
 			else
-			    msg("you are hit by the %s", name);
+			    msg(GET_MSG("sticks.hit_by"), GET_MSG(name));
 		    }
 		    else
-			msg("the %s whizzes by you", name);
+			msg(GET_MSG("sticks.whizzes_by"), GET_MSG(name));
 		}
 		mvaddch2(pos.y, pos.x, dirch);
 		refresh();
@@ -453,6 +455,6 @@
     else if (terse)
 	sprintf(buf, " [%d]", obj->o_charges);
     else
-	sprintf(buf, " [%d charges]", obj->o_charges);
+	sprintf(buf, GET_MSG("sticks.charges"), obj->o_charges);
     return buf;
 }
diff -Naur rogue5.4.5x-src.orig/things.c rogue5.4.5x-src/things.c
--- rogue5.4.5x-src.orig/things.c	2017-08-24 13:23:06.000000000 +0900
+++ rogue5.4.5x-src/things.c	2025-08-02 14:24:23.794376044 +0900
@@ -35,96 +35,116 @@
     switch (obj->o_type)
     {
 	case POTION:
-	    nameit(obj, "potion", p_colors[which], &pot_info[which], nullstr);
+	    nameit(obj, "potion", GET_MSG(p_colors[which]), &pot_info[which], nullstr);
 	when RING:
-	    nameit(obj, "ring", r_stones[which], &ring_info[which], ring_num);
+	    nameit(obj, "ring", GET_MSG(r_stones[which]), &ring_info[which], ring_num);
 	when STICK:
-	    nameit(obj, ws_type[which], ws_made[which], &ws_info[which], charge_str);
+	    nameit(obj, ws_type[which], GET_MSG(ws_made[which]), &ws_info[which], charge_str);
 	when SCROLL:
 	    if (obj->o_count == 1)
 	    {
-		strcpy(pb, "A scroll ");
-		pb = &prbuf[9];
+		strcpy(pb, GET_MSG("things.a_scroll"));
+		pb = &prbuf[strlen(prbuf)];
 	    }
 	    else
 	    {
-		sprintf(pb, "%d scrolls ", obj->o_count);
+		sprintf(pb, GET_MSG("things.scrolls"), obj->o_count);
 		pb = &prbuf[strlen(prbuf)];
 	    }
 	    op = &scr_info[which];
 	    if (op->oi_know)
-		sprintf(pb, "of %s", op->oi_name);
+		sprintf(pb, GET_MSG("things.of_scroll"), GET_MSG(op->oi_name));
 	    else if (op->oi_guess)
-		sprintf(pb, "called %s", op->oi_guess);
+		sprintf(pb, GET_MSG("things.called_scroll"), op->oi_guess);
 	    else
-		sprintf(pb, "titled '%s'", s_names[which]);
+		sprintf(pb, GET_MSG("things.titled_scroll"), s_names[which]);
 	when FOOD:
 	    if (which == 1)
 		if (obj->o_count == 1)
-		    sprintf(pb, "A%s %s", vowelstr(fruit), fruit);
+		    sprintf(pb, GET_MSG("things.a_food"), vowelstr(fruit), fruit);
 		else
-		    sprintf(pb, "%d %ss", obj->o_count, fruit);
+		    sprintf(pb, GET_MSG("things.foods"), obj->o_count, fruit);
 	    else
 		if (obj->o_count == 1)
-		    strcpy(pb, "Some food");
+		    strcpy(pb, GET_MSG("things.some_food"));
 		else
-		    sprintf(pb, "%d rations of food", obj->o_count);
+		    sprintf(pb, GET_MSG("things.rations_food"), obj->o_count);
 	when WEAPON:
-	    sp = weap_info[which].oi_name;
+	    sp = GET_MSG(weap_info[which].oi_name);
 	    if (obj->o_count > 1)
-		sprintf(pb, "%d ", obj->o_count);
+		sprintf(pb, GET_MSG("things.weapons"), obj->o_count);
 	    else
-		sprintf(pb, "A%s ", vowelstr(sp));
+		sprintf(pb, GET_MSG("things.a_weapon"), vowelstr(sp));
+	    if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+		if (obj->o_label != NULL)
+		{
+		    pb = &prbuf[strlen(prbuf)];
+		    sprintf(pb, GET_MSG("things.called"), obj->o_label);
+		}
+	    }
 	    pb = &prbuf[strlen(prbuf)];
 	    if (obj->o_flags & ISKNOW)
-		sprintf(pb, "%s %s", num(obj->o_hplus,obj->o_dplus,WEAPON), sp);
+		sprintf(pb, GET_MSG("things.known_weapon"), num(obj->o_hplus,obj->o_dplus,WEAPON), sp);
 	    else
-		sprintf(pb, "%s", sp);
+		sprintf(pb, GET_MSG("things.unknown_weapon"), sp);
 	    if (obj->o_count > 1)
-		strcat(pb, "s");
-	    if (obj->o_label != NULL)
-	    {
-		pb = &prbuf[strlen(prbuf)];
-		sprintf(pb, " called %s", obj->o_label);
+		strcat(pb, GET_MSG("things.s"));
+	    if (lang == NULL || strncmp(lang, "ja", 2) != 0) {
+		if (obj->o_label != NULL)
+		{
+		    pb = &prbuf[strlen(prbuf)];
+		    sprintf(pb, GET_MSG("things.called"), obj->o_label);
+		}
 	    }
 	when ARMOR:
-	    sp = arm_info[which].oi_name;
+	    sp = GET_MSG(arm_info[which].oi_name);
+	    sprintf(pb, "");
+	    if (lang != NULL && strncmp(lang, "ja", 2) == 0) {
+		if (obj->o_label != NULL)
+		{
+		    pb = &prbuf[strlen(prbuf)];
+		    sprintf(pb, GET_MSG("things.called"), obj->o_label);
+		}
+	    }
+	    pb = &prbuf[strlen(prbuf)];
 	    if (obj->o_flags & ISKNOW)
 	    {
-		sprintf(pb, "%s %s [",
+		sprintf(pb, GET_MSG("things.known_armor"),
 		    num(a_class[which] - obj->o_arm, 0, ARMOR), sp);
 		if (!terse)
-		    strcat(pb, "protection ");
+		    strcat(pb, GET_MSG("things.protection1"));
 		pb = &prbuf[strlen(prbuf)];
-		sprintf(pb, "%d]", 10 - obj->o_arm);
+		sprintf(pb, GET_MSG("things.protection2"), 10 - obj->o_arm);
 	    }
 	    else
-		sprintf(pb, "%s", sp);
-	    if (obj->o_label != NULL)
-	    {
-		pb = &prbuf[strlen(prbuf)];
-		sprintf(pb, " called %s", obj->o_label);
+		sprintf(pb, GET_MSG("things.unknown_armor"), sp);
+	    if (lang == NULL || strncmp(lang, "ja", 2) != 0) {
+		if (obj->o_label != NULL)
+		{
+		    pb = &prbuf[strlen(prbuf)];
+		    sprintf(pb, GET_MSG("things.called"), obj->o_label);
+		}
 	    }
 	when AMULET:
-	    strcpy(pb, "The Amulet of Yendor");
+	    strcpy(pb, GET_MSG("things.amulet_of_yendor"));
 	when GOLD:
-	    sprintf(prbuf, "%d Gold pieces", obj->o_goldval);
+	    sprintf(prbuf, GET_MSG("things.gold_pieces"), obj->o_goldval);
 #ifdef MASTER
 	otherwise:
-	    debug("Picked up something funny %s", unctrl(obj->o_type));
-	    sprintf(pb, "Something bizarre %s", unctrl(obj->o_type));
+	    debug(GET_MSG("things.pick_funny"), unctrl(obj->o_type));
+	    sprintf(pb, GET_MSG("things.something_bizarre"), unctrl(obj->o_type));
 #endif
     }
     if (inv_describe)
     {
 	if (obj == cur_armor)
-	    strcat(pb, " (being worn)");
+	    strcat(pb, GET_MSG("things.being_worn"));
 	if (obj == cur_weapon)
-	    strcat(pb, " (weapon in hand)");
+	    strcat(pb, GET_MSG("things.weapon_in_hand"));
 	if (obj == cur_ring[LEFT])
-	    strcat(pb, " (on left hand)");
+	    strcat(pb, GET_MSG("things.on_left_hand"));
 	else if (obj == cur_ring[RIGHT])
-	    strcat(pb, " (on right hand)");
+	    strcat(pb, GET_MSG("things.on_right_hand"));
     }
     if (drop && isupper((int)prbuf[0]))
 	prbuf[0] = (char) tolower(prbuf[0]);
@@ -149,10 +169,10 @@
     if (ch != FLOOR && ch != PASSAGE)
     {
 	after = FALSE;
-	msg("there is something there already");
+	msg(GET_MSG("things.something_already"));
 	return;
     }
-    if ((obj = get_item("drop", 0)) == NULL)
+    if ((obj = get_item(GET_MSG("things.drop"), 0)) == NULL)
 	return;
     if (!dropcheck(obj))
 	return;
@@ -166,7 +186,7 @@
     obj->o_pos = hero;
     if (obj->o_type == AMULET)
 	amulet = FALSE;
-    msg("dropped %s", inv_name(obj, TRUE));
+    msg(GET_MSG("things.dropped"), inv_name(obj, TRUE));
 }
 
 /*
@@ -183,7 +203,7 @@
 	    return TRUE;
     if (obj->o_flags & ISCURSED)
     {
-	msg("you can't.  It appears to be cursed");
+	msg(GET_MSG("things.be_cursed"));
 	return FALSE;
     }
     if (obj == cur_weapon)
@@ -329,7 +349,7 @@
 	{
 	    msg("bad pick_one: %d from %d items", i, nitems);
 	    for (info = start; info < end; info++)
-		msg("%s: %d%%", info->oi_name, info->oi_prob);
+		msg("%s: %d%%", GET_MSG(info->oi_name), info->oi_prob);
 	}
 #endif
 	info = start;
@@ -356,12 +376,13 @@
 
     do {
 	disc_list = FALSE;
+	addmsg(GET_MSG("things.show_items1"));
 	if (!terse)
-	    addmsg("for ");
-	addmsg("what type");
+	    addmsg(GET_MSG("things.show_items2"));
+	addmsg(GET_MSG("things.show_items3"));
 	if (!terse)
-	    addmsg(" of object do you want a list");
-	msg("? (* for all)");
+	    addmsg(GET_MSG("things.show_items4"));
+	msg(GET_MSG("things.show_items5"));
 	ch = readchar();
 	switch (ch)
 	{
@@ -377,9 +398,9 @@
 		break;
 	    default:
 		if (terse)
-		    msg("Not a type");
+		    msg(GET_MSG("things.not_type"));
 		else
-		    msg("Please type one of %c%c%c%c (ESCAPE to quit)", POTION, SCROLL, RING, STICK);
+		    msg(GET_MSG("things.type_one"), POTION, SCROLL, RING, STICK);
 	}
     } while (!disc_list);
     if (ch == '*')
@@ -483,7 +504,7 @@
 {
     WINDOW *tw, *sw;
     int x, y;
-    char *prompt = "--Press space to continue--";
+    const char *prompt = GET_MSG("things.press_space");
     static int maxlen = -1;
 
     if (line_cnt == 0)
@@ -603,9 +624,9 @@
     char *sp, *tystr = NULL;
 
     if (terse)
-	sprintf(prbuf, "Nothing");
+	sprintf(prbuf, GET_MSG("things.nothing"));
     else
-	sprintf(prbuf, "Haven't discovered anything");
+	sprintf(prbuf, GET_MSG("things.not_discovered"));
     if (type != '*')
     {
 	sp = &prbuf[strlen(prbuf)];
@@ -616,7 +637,7 @@
 	    when RING: tystr = "ring";
 	    when STICK: tystr = "stick";
 	}
-	sprintf(sp, " about any %ss", tystr);
+	sprintf(sp, GET_MSG("things.about_any"), GET_MSG(tystr));
     }
     return prbuf;
 }
@@ -635,19 +656,25 @@
     if (op->oi_know || op->oi_guess)
     {
 	if (obj->o_count == 1)
-	    sprintf(prbuf, "A %s ", type);
+	    sprintf(prbuf, GET_MSG("things.a_thing"), GET_MSG(type));
 	else
-	    sprintf(prbuf, "%d %ss ", obj->o_count, type);
+	    sprintf(prbuf, GET_MSG("things.things"), obj->o_count, GET_MSG(type));
 	pb = &prbuf[strlen(prbuf)];
 	if (op->oi_know)
-	    sprintf(pb, "of %s%s(%s)", op->oi_name, (*prfunc)(obj), which);
+	    sprintf(pb, GET_MSG("things.of_thing"), GET_MSG(op->oi_name), GET_MSG(type));
 	else if (op->oi_guess)
-	    sprintf(pb, "called %s%s(%s)", op->oi_guess, (*prfunc)(obj), which);
+	    sprintf(pb, GET_MSG("things.called_thing"), op->oi_guess, GET_MSG(type));
+	pb = &prbuf[strlen(prbuf)];
+	sprintf(pb, GET_MSG("things.which"), (*prfunc)(obj), which);
     }
     else if (obj->o_count == 1)
-	sprintf(prbuf, "A%s %s %s", vowelstr(which), which, type);
+    {
+	sprintf(prbuf, GET_MSG("things.an_thing"), vowelstr(which));
+	pb = &prbuf[strlen(prbuf)];
+	sprintf(pb, GET_MSG("things.unknown_thing"), which, GET_MSG(type));
+    }
     else
-	sprintf(prbuf, "%d %s %ss", obj->o_count, which, type);
+	sprintf(prbuf, GET_MSG("things.unknown_things"), obj->o_count, which, GET_MSG(type));
 }
 
 /*
@@ -673,11 +700,11 @@
     int ch;
 
     if (!terse)
-	addmsg("for ");
-    addmsg("what type");
+	addmsg(GET_MSG("things.what_type_list1"));
+    addmsg(GET_MSG("things.what_type_list2"));
     if (!terse)
-	addmsg(" of object do you want a list");
-    msg("? ");
+	addmsg(GET_MSG("things.what_type_list3"));
+    msg(GET_MSG("things.what_type_list4"));
     ch = readchar();
 	msg("");
     switch (ch)
@@ -720,7 +747,7 @@
 		i = 'a';
 	    sprintf(prbuf, "%c: %%s (%d%%%%)", i, info->oi_prob - lastprob);
 	    lastprob = info->oi_prob;
-	    add_line(prbuf, info->oi_name);
+	    add_line(prbuf, GET_MSG(info->oi_name));
 	}
 	info++;
     }
diff -Naur rogue5.4.5x-src.orig/utf8.c rogue5.4.5x-src/utf8.c
--- rogue5.4.5x-src.orig/utf8.c	1970-01-01 09:00:00.000000000 +0900
+++ rogue5.4.5x-src/utf8.c	2025-08-02 14:24:23.794376044 +0900
@@ -0,0 +1,76 @@
+#include <stdio.h>
+
+/*
+ * utf8len:
+ *   Returns the number of bytes in a UTF-8 character from its
+ *   first byte 'ch'.
+ *
+ *   0x00 - 0x7f: 1byte
+ *   0x80 - 0xbf: - (A part of a multibyte character, counted as 1 byte)
+ *   0xc0 - 0xdf: 2bytes
+ *   0xe0 - 0xef: 3bytes
+ *   0xf0 - 0xf7: 4bytes
+ *   0xf8 - 0xfb: 5bytes
+ *   0xfc - 0xfd: 6bytes
+ *   0xfe - 0xff: - (Assumed 6 bytes)
+ */
+int
+utf8len(unsigned char ch)
+{
+    static unsigned char utf8len_table[] = { 0xbf, 0xdf, 0xef, 0xf7, 0xfb, 0xff };
+    int len = 1;
+
+    while (len <= 6) {
+	if (ch <= utf8len_table[len-1]) break;
+	len++;
+    }
+    return len;
+}
+
+/*
+ * utf8width:
+ *   Return the display width of a UTF-8 string.
+ */
+size_t
+utf8width(const char *str)
+{
+    size_t width = 0;
+    unsigned char *p = (unsigned char *)str;
+
+    while (*p) {
+	int len = utf8len(*p);
+	width += (len == 1) ? 1 : 2;
+	p += len;
+    }
+
+    return width;
+}
+
+/*
+ * utf8truncate:
+ *   Truncate a UTF-8 string to a specified display width,
+ *   and return the actual number of bytes after truncation.
+ */
+size_t
+utf8truncate(char *str, size_t width)
+{
+    size_t display_width = 0;
+    size_t byte_pos = 0;
+    unsigned char *p = (unsigned char *)str;
+
+    while (p[byte_pos] != '\0') {
+	int len = utf8len(p[byte_pos]);
+	size_t char_width = (len == 1) ? 1 : 2;
+
+	if (display_width + char_width > width) {
+	    break;
+	}
+
+	display_width += char_width;
+	byte_pos += len;
+    }
+
+    str[byte_pos] = '\0';
+
+    return byte_pos;
+}
diff -Naur rogue5.4.5x-src.orig/weapons.c rogue5.4.5x-src/weapons.c
--- rogue5.4.5x-src.orig/weapons.c	2017-08-04 12:23:32.000000000 +0900
+++ rogue5.4.5x-src/weapons.c	2025-08-02 14:24:23.794376044 +0900
@@ -49,7 +49,7 @@
     /*
      * Get which thing we are hurling
      */
-    if ((obj = get_item("throw", WEAPON)) == NULL)
+    if ((obj = get_item(GET_MSG("weapons.throw"), WEAPON)) == NULL)
 	return;
     if (!dropcheck(obj) || is_current(obj))
 	return;
@@ -150,8 +150,8 @@
 	    endmsg();
 	    has_hit = FALSE;
 	}
-	msg("the %s vanishes as it hits the ground",
-	    weap_info[obj->o_which].oi_name);
+	msg(GET_MSG("weapons.vanishes_ground"),
+	    GET_MSG(weap_info[obj->o_which].oi_name));
     }
     discard(obj);
 }
@@ -256,7 +256,7 @@
 	return;
     }
     cur_weapon = oweapon;
-    if ((obj = get_item("wield", WEAPON)) == NULL)
+    if ((obj = get_item(GET_MSG("weapons.wield"), WEAPON)) == NULL)
     {
 bad:
 	after = FALSE;
@@ -265,7 +265,7 @@
 
     if (obj->o_type == ARMOR)
     {
-	msg("you can't wield armor");
+	msg(GET_MSG("weapons.cant_wield_armor"));
 	goto bad;
     }
     if (is_current(obj))
@@ -274,8 +274,8 @@
     sp = inv_name(obj, TRUE);
     cur_weapon = obj;
     if (!terse)
-	addmsg("you are now ");
-    msg("wielding %s (%c)", sp, obj->o_packch);
+	addmsg(GET_MSG("weapons.you_are_now"));
+    msg(GET_MSG("weapons.wielding"), sp, obj->o_packch);
 }
 
 /*
diff -Naur rogue5.4.5x-src.orig/wizard.c rogue5.4.5x-src/wizard.c
--- rogue5.4.5x-src.orig/wizard.c	2017-08-24 08:48:16.000000000 +0900
+++ rogue5.4.5x-src/wizard.c	2025-08-02 14:24:23.794376044 +0900
@@ -29,22 +29,22 @@
 
     if (pack == NULL)
     {
-	msg("you don't have anything in your pack to identify");
+	msg(GET_MSG("wizard.dont_have_anything"));
 	return;
     }
 
     for (;;)
     {
-	obj = get_item("identify", type);
+	obj = get_item(GET_MSG("wizard.identify"), type);
 	if (insist)
 	{
 	    if (n_objs == 0)
 		return;
 	    else if (obj == NULL)
-		msg("you must identify something");
+		msg(GET_MSG("wizard.must_identify_something"));
 	    else if (type && obj->o_type != type &&
 	       !(type == R_OR_S && (obj->o_type == RING || obj->o_type == STICK)) )
-		    msg("you must identify a %s", type_name(type));
+		    msg(GET_MSG("wizard.must_identify"), GET_MSG(type_name(type)));
 	    else
 		break;
 	}
@@ -131,17 +131,17 @@
     int ch, bless;
 
     obj = new_item();
-    msg("type of item: ");
+    msg(GET_MSG("wizard.type_item"));
     obj->o_type = readchar();
     mpos = 0;
-    msg("which %c do you want? (0-f)", obj->o_type);
+    msg(GET_MSG("wizard.which_you_want"), obj->o_type);
     obj->o_which = (isdigit((ch = readchar())) ? ch - '0' : ch - 'a' + 10);
     obj->o_group = 0;
     obj->o_count = 1;
     mpos = 0;
     if (obj->o_type == WEAPON || obj->o_type == ARMOR)
     {
-	msg("blessing? (+,-,n)");
+	msg(GET_MSG("wizard.blessing"));
 	bless = readchar();
 	mpos = 0;
 	if (bless == '-')
@@ -170,7 +170,7 @@
 	    case R_ADDSTR:
 	    case R_ADDHIT:
 	    case R_ADDDAM:
-		msg("blessing? (+,-,n)");
+		msg(GET_MSG("wizard.blessing"));
 		bless = readchar();
 		mpos = 0;
 		if (bless == '-')
@@ -184,7 +184,7 @@
 	fix_stick(obj);
     else if (obj->o_type == GOLD)
     {
-	msg("how much?");
+	msg(GET_MSG("wizard.how_much"));
 	get_num(&obj->o_goldval, stdscr);
     }
     add_pack(obj, FALSE);
@@ -247,7 +247,7 @@
     int c;
     static char buf[MAXSTR];
 
-    msg("wizard's Password:");
+    msg(GET_MSG("wizard.password"));
     mpos = 0;
     sp = buf;
     while ((c = readchar()) != '\n' && c != '\r' && c != ESCAPE)
@@ -289,6 +289,6 @@
 		wstandend(hw);
 	    }
 	}
-    show_win("---More (level map)---");
+    show_win(GET_MSG("wizard.map"));
 }
 #endif
